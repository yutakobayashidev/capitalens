/*! For license information please see 348.6f449032.iframe.bundle.js.LICENSE.txt */
(self.webpackChunkcapitalens=self.webpackChunkcapitalens||[]).push([[348],{"./node_modules/.prisma/client/index-browser.js":(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0});const{Decimal,objectEnumValues,makeStrictEnum,Public,detectRuntime}=__webpack_require__("./node_modules/@prisma/client/runtime/index-browser.js"),Prisma={};exports.Prisma=Prisma,exports.$Enums={},Prisma.prismaVersion={client:"5.3.1",engine:"61e140623197a131c2a6189271ffee05a7aa9a59"},Prisma.PrismaClientKnownRequestError=()=>{throw new Error(`PrismaClientKnownRequestError is unable to be run ${runtimeDescription}.\nIn case this error is unexpected for you, please report it in https://github.com/prisma/prisma/issues`)},Prisma.PrismaClientUnknownRequestError=()=>{throw new Error(`PrismaClientUnknownRequestError is unable to be run ${runtimeDescription}.\nIn case this error is unexpected for you, please report it in https://github.com/prisma/prisma/issues`)},Prisma.PrismaClientRustPanicError=()=>{throw new Error(`PrismaClientRustPanicError is unable to be run ${runtimeDescription}.\nIn case this error is unexpected for you, please report it in https://github.com/prisma/prisma/issues`)},Prisma.PrismaClientInitializationError=()=>{throw new Error(`PrismaClientInitializationError is unable to be run ${runtimeDescription}.\nIn case this error is unexpected for you, please report it in https://github.com/prisma/prisma/issues`)},Prisma.PrismaClientValidationError=()=>{throw new Error(`PrismaClientValidationError is unable to be run ${runtimeDescription}.\nIn case this error is unexpected for you, please report it in https://github.com/prisma/prisma/issues`)},Prisma.NotFoundError=()=>{throw new Error(`NotFoundError is unable to be run ${runtimeDescription}.\nIn case this error is unexpected for you, please report it in https://github.com/prisma/prisma/issues`)},Prisma.Decimal=Decimal,Prisma.sql=()=>{throw new Error(`sqltag is unable to be run ${runtimeDescription}.\nIn case this error is unexpected for you, please report it in https://github.com/prisma/prisma/issues`)},Prisma.empty=()=>{throw new Error(`empty is unable to be run ${runtimeDescription}.\nIn case this error is unexpected for you, please report it in https://github.com/prisma/prisma/issues`)},Prisma.join=()=>{throw new Error(`join is unable to be run ${runtimeDescription}.\nIn case this error is unexpected for you, please report it in https://github.com/prisma/prisma/issues`)},Prisma.raw=()=>{throw new Error(`raw is unable to be run ${runtimeDescription}.\nIn case this error is unexpected for you, please report it in https://github.com/prisma/prisma/issues`)},Prisma.validator=Public.validator,Prisma.getExtensionContext=()=>{throw new Error(`Extensions.getExtensionContext is unable to be run ${runtimeDescription}.\nIn case this error is unexpected for you, please report it in https://github.com/prisma/prisma/issues`)},Prisma.defineExtension=()=>{throw new Error(`Extensions.defineExtension is unable to be run ${runtimeDescription}.\nIn case this error is unexpected for you, please report it in https://github.com/prisma/prisma/issues`)},Prisma.DbNull=objectEnumValues.instances.DbNull,Prisma.JsonNull=objectEnumValues.instances.JsonNull,Prisma.AnyNull=objectEnumValues.instances.AnyNull,Prisma.NullTypes={DbNull:objectEnumValues.classes.DbNull,JsonNull:objectEnumValues.classes.JsonNull,AnyNull:objectEnumValues.classes.AnyNull},exports.Prisma.TransactionIsolationLevel=makeStrictEnum({ReadUncommitted:"ReadUncommitted",ReadCommitted:"ReadCommitted",RepeatableRead:"RepeatableRead",Serializable:"Serializable"}),exports.Prisma.ViewsScalarFieldEnum={name:"name",count:"count"},exports.Prisma.GroupScalarFieldEnum={id:"id",name:"name",image:"image",twitter:"twitter",facebook:"facebook",wikipedia:"wikipedia",website:"website",description:"description"},exports.Prisma.MemberScalarFieldEnum={id:"id",name:"name",fullname:"fullname",firstName:"firstName",lastName:"lastName",nameHira:"nameHira",firstNameHira:"firstNameHira",lastNameHira:"lastNameHira",nameKana:"nameKana",firstNameKana:"firstNameKana",lastNameKana:"lastNameKana",role:"role",groupId:"groupId",house:"house",win:"win",scannedCount:"scannedCount",description:"description",image:"image",website:"website",wikipedia:"wikipedia",abstract:"abstract",twitter:"twitter",facebook:"facebook",youtube:"youtube",instagram:"instagram",feed:"feed",birthplace:"birthplace",school:"school",birthday:"birthday",createdAt:"createdAt",updatedAt:"updatedAt"},exports.Prisma.TimelineScalarFieldEnum={id:"id",title:"title",link:"link",isoDate:"isoDate",contentSnippet:"contentSnippet",dateMiliSeconds:"dateMiliSeconds",ogImageURL:"ogImageURL",memberId:"memberId"},exports.Prisma.BillScalarFieldEnum={id:"id",reason:"reason",name:"name",bill_number:"bill_number",category:"category",createdAt:"createdAt",updatedAt:"updatedAt"},exports.Prisma.BillSupportScalarFieldEnum={id:"id",billId:"billId",memberId:"memberId",createdAt:"createdAt",updatedAt:"updatedAt"},exports.Prisma.CommentScalarFieldEnum={comment:"comment",id:"id",type:"type",billId:"billId",userId:"userId",createdAt:"createdAt",updatedAt:"updatedAt"},exports.Prisma.VoteScalarFieldEnum={id:"id",createdAt:"createdAt",updatedAt:"updatedAt",userId:"userId",commentId:"commentId"},exports.Prisma.AccountScalarFieldEnum={id:"id",userId:"userId",type:"type",provider:"provider",providerAccountId:"providerAccountId",refresh_token:"refresh_token",access_token:"access_token",expires_at:"expires_at",token_type:"token_type",scope:"scope",id_token:"id_token",session_state:"session_state"},exports.Prisma.SessionScalarFieldEnum={id:"id",sessionToken:"sessionToken",userId:"userId",expires:"expires"},exports.Prisma.UserScalarFieldEnum={id:"id",name:"name",email:"email",emailVerified:"emailVerified",image:"image",createdAt:"createdAt",updatedAt:"updatedAt",kids:"kids",prefectureId:"prefectureId"},exports.Prisma.PrefectureScalarFieldEnum={id:"id",name:"name"},exports.Prisma.VerificationTokenScalarFieldEnum={identifier:"identifier",token:"token",expires:"expires"},exports.Prisma.VideoScalarFieldEnum={id:"id",m3u8_url:"m3u8_url",page_url:"page_url",date:"date",house:"house",summary:"summary",meeting_name:"meeting_name",kids:"kids",meetingURL:"meetingURL",apiURL:"apiURL"},exports.Prisma.NoteScalarFieldEnum={id:"id",start:"start",end:"end",text:"text",videoId:"videoId"},exports.Prisma.UtteranceScalarFieldEnum={id:"id",start:"start",end:"end",videoId:"videoId"},exports.Prisma.WordScalarFieldEnum={id:"id",start:"start",end:"end",text:"text",speaker:"speaker",memberId:"memberId",utteranceId:"utteranceId"},exports.Prisma.VideoCommentScalarFieldEnum={id:"id",comment:"comment",createdAt:"createdAt",updatedAt:"updatedAt",videoId:"videoId",userId:"userId"},exports.Prisma.BooksScalarFieldEnum={id:"id",title:"title",date:"date",isbn:"isbn"},exports.Prisma.QuestionScalarFieldEnum={id:"id",title:"title",start:"start",end:"end",videoId:"videoId",memberId:"memberId"},exports.Prisma.AnnotationScalarFieldEnum={id:"id",speaker_name:"speaker_name",videoId:"videoId",start_sec:"start_sec",end_sec:"end_sec",speaker_info:"speaker_info",memberId:"memberId"},exports.Prisma.SortOrder={asc:"asc",desc:"desc"},exports.Prisma.NullsOrder={first:"first",last:"last"},exports.ParliamentaryGroup=exports.$Enums.ParliamentaryGroup={JIMIN:"JIMIN",RIKKEN:"RIKKEN",KOMEI:"KOMEI",KYOSAN:"KYOSAN",ISHIN:"ISHIN",KOKUMIN:"KOKUMIN",REIWA:"REIWA"},exports.House=exports.$Enums.House={REPRESENTATIVES:"REPRESENTATIVES",COUNCILLORS:"COUNCILLORS"},exports.BillCategory=exports.$Enums.BillCategory={KAKUHOU:"KAKUHOU",SHUHOU:"SHUHOU",SANHOU:"SANHOU"},exports.CommentType=exports.$Enums.CommentType={AGREEMENT:"AGREEMENT",NEUTRAL:"NEUTRAL",OPPOSITION:"OPPOSITION"},exports.Prisma.ModelName={Views:"Views",Group:"Group",Member:"Member",Timeline:"Timeline",Bill:"Bill",BillSupport:"BillSupport",Comment:"Comment",Vote:"Vote",Account:"Account",Session:"Session",User:"User",Prefecture:"Prefecture",VerificationToken:"VerificationToken",Video:"Video",Note:"Note",Utterance:"Utterance",Word:"Word",VideoComment:"VideoComment",Books:"Books",Question:"Question",Annotation:"Annotation"};exports.PrismaClient=class PrismaClient{constructor(){return new Proxy(this,{get(target,prop){const runtime=detectRuntime(),edgeRuntimeName={workerd:"Cloudflare Workers",deno:"Deno and Deno Deploy",netlify:"Netlify Edge Functions","edge-light":"Vercel Edge Functions"}[runtime];let message="PrismaClient is unable to run in ";throw message+=void 0!==edgeRuntimeName?edgeRuntimeName+". As an alternative, try Accelerate: https://pris.ly/d/accelerate.":"this browser environment, or has been bundled for the browser (running in `"+runtime+"`).",message+="\nIf this is unexpected, please open an issue: https://github.com/prisma/prisma/issues",new Error(message)}})}},Object.assign(exports,Prisma)},"./node_modules/@auth/core/providers/google.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";function Google(options){return{id:"google",name:"Google",type:"oidc",issuer:"https://accounts.google.com",style:{logo:"/google.svg",logoDark:"/google.svg",bgDark:"#fff",bg:"#fff",text:"#000",textDark:"#000"},options}}__webpack_require__.d(__webpack_exports__,{Z:()=>Google})},"./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}__webpack_require__.d(__webpack_exports__,{Z:()=>_asyncToGenerator})},"./node_modules/@babel/runtime/helpers/regeneratorRuntime.js":(module,__unused_webpack_exports,__webpack_require__)=>{var _typeof=__webpack_require__("./node_modules/@babel/runtime/helpers/typeof.js").default;function _regeneratorRuntime(){"use strict";module.exports=_regeneratorRuntime=function _regeneratorRuntime(){return e},module.exports.__esModule=!0,module.exports.default=module.exports;var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function define(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{define({},"")}catch(t){define=function define(t,e,r){return t[e]=r}}function wrap(t,e,r,n){var i=e&&e.prototype instanceof Generator?e:Generator,a=Object.create(i.prototype),c=new Context(n||[]);return o(a,"_invoke",{value:makeInvokeMethod(t,r,c)}),a}function tryCatch(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=wrap;var h="suspendedStart",l="suspendedYield",f="executing",s="completed",y={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};define(p,a,(function(){return this}));var d=Object.getPrototypeOf,v=d&&d(d(values([])));v&&v!==r&&n.call(v,a)&&(p=v);var g=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(t){["next","throw","return"].forEach((function(e){define(t,e,(function(t){return this._invoke(e,t)}))}))}function AsyncIterator(t,e){function invoke(r,o,i,a){var c=tryCatch(t[r],t,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==_typeof(h)&&n.call(h,"__await")?e.resolve(h.__await).then((function(t){invoke("next",t,i,a)}),(function(t){invoke("throw",t,i,a)})):e.resolve(h).then((function(t){u.value=t,i(u)}),(function(t){return invoke("throw",t,i,a)}))}a(c.arg)}var r;o(this,"_invoke",{value:function value(t,n){function callInvokeWithMethodAndArg(){return new e((function(e,r){invoke(t,n,e,r)}))}return r=r?r.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(e,r,n){var o=h;return function(i,a){if(o===f)throw new Error("Generator is already running");if(o===s){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=maybeInvokeDelegate(c,n);if(u){if(u===y)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=s,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=f;var p=tryCatch(e,r,n);if("normal"===p.type){if(o=n.done?s:l,p.arg===y)continue;return{value:p.arg,done:n.done}}"throw"===p.type&&(o=s,n.method="throw",n.arg=p.arg)}}}function maybeInvokeDelegate(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,maybeInvokeDelegate(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=tryCatch(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function pushTryEntry(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function resetTryEntry(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0)}function values(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function next(){for(;++o<e.length;)if(n.call(e,o))return next.value=e[o],next.done=!1,next;return next.value=t,next.done=!0,next};return i.next=i}}throw new TypeError(_typeof(e)+" is not iterable")}return GeneratorFunction.prototype=GeneratorFunctionPrototype,o(g,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),o(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===GeneratorFunction||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t},e.awrap=function(t){return{__await:t}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,(function(){return this})),e.AsyncIterator=AsyncIterator,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new AsyncIterator(wrap(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},defineIteratorMethods(g),define(g,u,"Generator"),define(g,a,(function(){return this})),define(g,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function next(){for(;r.length;){var t=r.pop();if(t in e)return next.value=t,next.done=!1,next}return next.done=!0,next}},e.values=values,Context.prototype={constructor:Context,reset:function reset(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(resetTryEntry),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function dispatchException(e){if(this.done)throw e;var r=this;function handle(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc)}}}},abrupt:function abrupt(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a)},complete:function complete(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function finish(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),resetTryEntry(r),y}},catch:function _catch(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;resetTryEntry(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(e,r,n){return this.delegate={iterator:values(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y}},e}module.exports=_regeneratorRuntime,module.exports.__esModule=!0,module.exports.default=module.exports},"./node_modules/@babel/runtime/helpers/typeof.js":module=>{function _typeof(o){return module.exports=_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},module.exports.__esModule=!0,module.exports.default=module.exports,_typeof(o)}module.exports=_typeof,module.exports.__esModule=!0,module.exports.default=module.exports},"./node_modules/@babel/runtime/regenerator/index.js":(module,__unused_webpack_exports,__webpack_require__)=>{var runtime=__webpack_require__("./node_modules/@babel/runtime/helpers/regeneratorRuntime.js")();module.exports=runtime;try{regeneratorRuntime=runtime}catch(accidentalStrictMode){"object"==typeof globalThis?globalThis.regeneratorRuntime=runtime:Function("r","regeneratorRuntime = r")(runtime)}},"./node_modules/@next-auth/prisma-adapter/dist/index.js":(__unused_webpack_module,exports)=>{"use strict";exports.N=void 0,exports.N=function PrismaAdapter(p){return{createUser:data=>p.user.create({data}),getUser:id=>p.user.findUnique({where:{id}}),getUserByEmail:email=>p.user.findUnique({where:{email}}),async getUserByAccount(provider_providerAccountId){var _a;const account=await p.account.findUnique({where:{provider_providerAccountId},select:{user:!0}});return null!==(_a=null==account?void 0:account.user)&&void 0!==_a?_a:null},updateUser:({id,...data})=>p.user.update({where:{id},data}),deleteUser:id=>p.user.delete({where:{id}}),linkAccount:data=>p.account.create({data}),unlinkAccount:provider_providerAccountId=>p.account.delete({where:{provider_providerAccountId}}),async getSessionAndUser(sessionToken){const userAndSession=await p.session.findUnique({where:{sessionToken},include:{user:!0}});if(!userAndSession)return null;const{user,...session}=userAndSession;return{user,session}},createSession:data=>p.session.create({data}),updateSession:data=>p.session.update({where:{sessionToken:data.sessionToken},data}),deleteSession:sessionToken=>p.session.delete({where:{sessionToken}}),async createVerificationToken(data){const verificationToken=await p.verificationToken.create({data});return verificationToken.id&&delete verificationToken.id,verificationToken},async useVerificationToken(identifier_token){try{const verificationToken=await p.verificationToken.delete({where:{identifier_token}});return verificationToken.id&&delete verificationToken.id,verificationToken}catch(error){if("P2025"===error.code)return null;throw error}}}}},"./node_modules/@prisma/client/index-browser.js":(module,__unused_webpack_exports,__webpack_require__)=>{const prisma=__webpack_require__("./node_modules/.prisma/client/index-browser.js");module.exports=prisma},"./node_modules/@prisma/client/runtime/index-browser.js":module=>{"use strict";var e,he=Object.defineProperty,Je=Object.getOwnPropertyDescriptor,We=Object.getOwnPropertyNames,je=Object.prototype.hasOwnProperty,Ce=(e,n)=>{for(var i in n)he(e,i,{get:n[i],enumerable:!0})},jn={};Ce(jn,{Decimal:()=>Ve,Public:()=>de,detectRuntime:()=>He,makeStrictEnum:()=>Pe,objectEnumValues:()=>Oe}),module.exports=(e=jn,((e,n,i,r)=>{if(n&&"object"==typeof n||"function"==typeof n)for(let t of We(n))!je.call(e,t)&&t!==i&&he(e,t,{get:()=>n[t],enumerable:!(r=Je(n,t))||r.enumerable});return e})(he({},"__esModule",{value:!0}),e));var de={};function Me(...e){return n=>n}Ce(de,{validator:()=>Me});var ne=Symbol(),pe=new WeakMap,ge=class{constructor(n){n===ne?pe.set(this,"Prisma.".concat(this._getName())):pe.set(this,"new Prisma.".concat(this._getNamespace(),".").concat(this._getName(),"()"))}_getName(){return this.constructor.name}toString(){return pe.get(this)}},j=class extends ge{_getNamespace(){return"NullTypes"}},G=class extends j{};me(G,"DbNull");var X=class extends j{};me(X,"JsonNull");var K=class extends j{};me(K,"AnyNull");var Oe={classes:{DbNull:G,JsonNull:X,AnyNull:K},instances:{DbNull:new G(ne),JsonNull:new X(ne),AnyNull:new K(ne)}};function me(e,n){Object.defineProperty(e,"name",{value:n,configurable:!0})}var Ke=new Set(["toJSON","$$typeof","asymmetricMatch",Symbol.iterator,Symbol.toStringTag,Symbol.isConcatSpreadable,Symbol.toPrimitive]);function Pe(e){return new Proxy(e,{get(n,i){if(i in n)return n[i];if(!Ke.has(i))throw new TypeError("Invalid enum value: ".concat(String(i)))}})}var qe,Z,H=9e15,V=1e9,we="0123456789abcdef",re="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",te="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",Ne={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-H,maxE:H,crypto:!1},w=!0,oe="[DecimalError] ",$=oe+"Invalid argument: ",Te=oe+"Precision limit exceeded",Le=oe+"crypto unavailable",Re="[object Decimal]",A=Math.floor,M=Math.pow,Qe=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,Ye=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,xe=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,Fe=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,F=1e7,m=7,ye=re.length-1,ve=te.length-1,d={toStringTag:Re};function O(e){var n,i,r,t=e.length-1,s="",o=e[0];if(t>0){for(s+=o,n=1;n<t;n++)r=e[n]+"",(i=m-r.length)&&(s+=U(i)),s+=r;o=e[n],(i=m-(r=o+"").length)&&(s+=U(i))}else if(0===o)return"0";for(;o%10==0;)o/=10;return s+o}function q(e,n,i){if(e!==~~e||e<n||e>i)throw Error($+e)}function Q(e,n,i,r){var t,s,o,u;for(s=e[0];s>=10;s/=10)--n;return--n<0?(n+=m,t=0):(t=Math.ceil((n+1)/m),n%=m),s=M(10,m-n),u=e[t]%s|0,null==r?n<3?(0==n?u=u/100|0:1==n&&(u=u/10|0),o=i<4&&99999==u||i>3&&49999==u||5e4==u||0==u):o=(i<4&&u+1==s||i>3&&u+1==s/2)&&(e[t+1]/s/100|0)==M(10,n-2)-1||(u==s/2||0==u)&&0==(e[t+1]/s/100|0):n<4?(0==n?u=u/1e3|0:1==n?u=u/100|0:2==n&&(u=u/10|0),o=(r||i<4)&&9999==u||!r&&i>3&&4999==u):o=((r||i<4)&&u+1==s||!r&&i>3&&u+1==s/2)&&(e[t+1]/s/1e3|0)==M(10,n-3)-1,o}function ie(e,n,i){for(var r,s,t=[0],o=0,u=e.length;o<u;){for(s=t.length;s--;)t[s]*=n;for(t[0]+=we.indexOf(e.charAt(o++)),r=0;r<t.length;r++)t[r]>i-1&&(void 0===t[r+1]&&(t[r+1]=0),t[r+1]+=t[r]/i|0,t[r]%=i)}return t.reverse()}d.absoluteValue=d.abs=function(){var e=new this.constructor(this);return e.s<0&&(e.s=1),p(e)},d.ceil=function(){return p(new this.constructor(this),this.e+1,2)},d.clampedTo=d.clamp=function(e,n){var r=this,t=r.constructor;if(e=new t(e),n=new t(n),!e.s||!n.s)return new t(NaN);if(e.gt(n))throw Error($+n);return r.cmp(e)<0?e:r.cmp(n)>0?n:new t(r)},d.comparedTo=d.cmp=function(e){var n,i,r,t,s=this,o=s.d,u=(e=new s.constructor(e)).d,l=s.s,f=e.s;if(!o||!u)return l&&f?l!==f?l:o===u?0:!o^l<0?1:-1:NaN;if(!o[0]||!u[0])return o[0]?l:u[0]?-f:0;if(l!==f)return l;if(s.e!==e.e)return s.e>e.e^l<0?1:-1;for(n=0,i=(r=o.length)<(t=u.length)?r:t;n<i;++n)if(o[n]!==u[n])return o[n]>u[n]^l<0?1:-1;return r===t?0:r>t^l<0?1:-1},d.cosine=d.cos=function(){var e,n,i=this,r=i.constructor;return i.d?i.d[0]?(e=r.precision,n=r.rounding,r.precision=e+Math.max(i.e,i.sd())+m,r.rounding=1,i=function en(e,n){var i,r,t;if(n.isZero())return n;r=n.d.length,r<32?(i=Math.ceil(r/3),t=(1/fe(4,i)).toString()):(i=16,t="2.3283064365386962890625e-10"),e.precision+=i,n=J(e,1,n.times(t),new e(1));for(var s=i;s--;){var o=n.times(n);n=o.times(o).minus(o).times(8).plus(1)}return e.precision-=i,n}(r,Be(r,i)),r.precision=e,r.rounding=n,p(2==Z||3==Z?i.neg():i,e,n,!0)):new r(1):new r(NaN)},d.cubeRoot=d.cbrt=function(){var e,n,i,r,t,s,o,u,l,f,c=this,a=c.constructor;if(!c.isFinite()||c.isZero())return new a(c);for(w=!1,(s=c.s*M(c.s*c,1/3))&&Math.abs(s)!=1/0?r=new a(s.toString()):(i=O(c.d),(s=((e=c.e)-i.length+1)%3)&&(i+=1==s||-2==s?"0":"00"),s=M(i,1/3),e=A((e+1)/3)-(e%3==(e<0?-1:2)),s==1/0?i="5e"+e:i=(i=s.toExponential()).slice(0,i.indexOf("e")+1)+e,(r=new a(i)).s=c.s),o=(e=a.precision)+3;;)if(f=(l=(u=r).times(u).times(u)).plus(c),r=S(f.plus(c).times(u),f.plus(l),o+2,1),O(u.d).slice(0,o)===(i=O(r.d)).slice(0,o)){if("9999"!=(i=i.slice(o-3,o+1))&&(t||"4999"!=i)){(!+i||!+i.slice(1)&&"5"==i.charAt(0))&&(p(r,e+1,1),n=!r.times(r).times(r).eq(c));break}if(!t&&(p(u,e+1,0),u.times(u).times(u).eq(c))){r=u;break}o+=4,t=1}return w=!0,p(r,e,a.rounding,n)},d.decimalPlaces=d.dp=function(){var e,n=this.d,i=NaN;if(n){if(i=((e=n.length-1)-A(this.e/m))*m,e=n[e])for(;e%10==0;e/=10)i--;i<0&&(i=0)}return i},d.dividedBy=d.div=function(e){return S(this,new this.constructor(e))},d.dividedToIntegerBy=d.divToInt=function(e){var i=this.constructor;return p(S(this,new i(e),0,1,1),i.precision,i.rounding)},d.equals=d.eq=function(e){return 0===this.cmp(e)},d.floor=function(){return p(new this.constructor(this),this.e+1,3)},d.greaterThan=d.gt=function(e){return this.cmp(e)>0},d.greaterThanOrEqualTo=d.gte=function(e){var n=this.cmp(e);return 1==n||0===n},d.hyperbolicCosine=d.cosh=function(){var e,n,i,r,t,s=this,o=s.constructor,u=new o(1);if(!s.isFinite())return new o(s.s?1/0:NaN);if(s.isZero())return u;i=o.precision,r=o.rounding,o.precision=i+Math.max(s.e,s.sd())+4,o.rounding=1,(t=s.d.length)<32?n=(1/fe(4,e=Math.ceil(t/3))).toString():(e=16,n="2.3283064365386962890625e-10"),s=J(o,1,s.times(n),new o(1),!0);for(var l,f=e,c=new o(8);f--;)l=s.times(s),s=u.minus(l.times(c.minus(l.times(c))));return p(s,o.precision=i,o.rounding=r,!0)},d.hyperbolicSine=d.sinh=function(){var e,n,i,r,t=this,s=t.constructor;if(!t.isFinite()||t.isZero())return new s(t);if(n=s.precision,i=s.rounding,s.precision=n+Math.max(t.e,t.sd())+4,s.rounding=1,(r=t.d.length)<3)t=J(s,2,t,t,!0);else{e=(e=1.4*Math.sqrt(r))>16?16:0|e,t=J(s,2,t=t.times(1/fe(5,e)),t,!0);for(var o,u=new s(5),l=new s(16),f=new s(20);e--;)o=t.times(t),t=t.times(u.plus(o.times(l.times(o).plus(f))))}return s.precision=n,s.rounding=i,p(t,n,i,!0)},d.hyperbolicTangent=d.tanh=function(){var e,n,i=this,r=i.constructor;return i.isFinite()?i.isZero()?new r(i):(e=r.precision,n=r.rounding,r.precision=e+7,r.rounding=1,S(i.sinh(),i.cosh(),r.precision=e,r.rounding=n)):new r(i.s)},d.inverseCosine=d.acos=function(){var e,n=this,i=n.constructor,r=n.abs().cmp(1),t=i.precision,s=i.rounding;return-1!==r?0===r?n.isNeg()?R(i,t,s):new i(0):new i(NaN):n.isZero()?R(i,t+4,s).times(.5):(i.precision=t+6,i.rounding=1,n=n.asin(),e=R(i,t+4,s).times(.5),i.precision=t,i.rounding=s,e.minus(n))},d.inverseHyperbolicCosine=d.acosh=function(){var e,n,i=this,r=i.constructor;return i.lte(1)?new r(i.eq(1)?0:NaN):i.isFinite()?(e=r.precision,n=r.rounding,r.precision=e+Math.max(Math.abs(i.e),i.sd())+4,r.rounding=1,w=!1,i=i.times(i).minus(1).sqrt().plus(i),w=!0,r.precision=e,r.rounding=n,i.ln()):new r(i)},d.inverseHyperbolicSine=d.asinh=function(){var e,n,i=this,r=i.constructor;return!i.isFinite()||i.isZero()?new r(i):(e=r.precision,n=r.rounding,r.precision=e+2*Math.max(Math.abs(i.e),i.sd())+6,r.rounding=1,w=!1,i=i.times(i).plus(1).sqrt().plus(i),w=!0,r.precision=e,r.rounding=n,i.ln())},d.inverseHyperbolicTangent=d.atanh=function(){var e,n,i,r,t=this,s=t.constructor;return t.isFinite()?t.e>=0?new s(t.abs().eq(1)?t.s/0:t.isZero()?t:NaN):(e=s.precision,n=s.rounding,r=t.sd(),Math.max(r,e)<2*-t.e-1?p(new s(t),e,n,!0):(s.precision=i=r-t.e,t=S(t.plus(1),new s(1).minus(t),i+e,1),s.precision=e+4,s.rounding=1,t=t.ln(),s.precision=e,s.rounding=n,t.times(.5))):new s(NaN)},d.inverseSine=d.asin=function(){var e,n,i,r,t=this,s=t.constructor;return t.isZero()?new s(t):(n=t.abs().cmp(1),i=s.precision,r=s.rounding,-1!==n?0===n?((e=R(s,i+4,r).times(.5)).s=t.s,e):new s(NaN):(s.precision=i+6,s.rounding=1,t=t.div(new s(1).minus(t.times(t)).sqrt().plus(1)).atan(),s.precision=i,s.rounding=r,t.times(2)))},d.inverseTangent=d.atan=function(){var e,n,i,r,t,s,o,u,l,f=this,c=f.constructor,a=c.precision,h=c.rounding;if(f.isFinite()){if(f.isZero())return new c(f);if(f.abs().eq(1)&&a+4<=ve)return(o=R(c,a+4,h).times(.25)).s=f.s,o}else{if(!f.s)return new c(NaN);if(a+4<=ve)return(o=R(c,a+4,h).times(.5)).s=f.s,o}for(c.precision=u=a+10,c.rounding=1,e=i=Math.min(28,u/m+2|0);e;--e)f=f.div(f.times(f).plus(1).sqrt().plus(1));for(w=!1,n=Math.ceil(u/m),r=1,l=f.times(f),o=new c(f),t=f;-1!==e;)if(t=t.times(l),s=o.minus(t.div(r+=2)),t=t.times(l),void 0!==(o=s.plus(t.div(r+=2))).d[n])for(e=n;o.d[e]===s.d[e]&&e--;);return i&&(o=o.times(2<<i-1)),w=!0,p(o,c.precision=a,c.rounding=h,!0)},d.isFinite=function(){return!!this.d},d.isInteger=d.isInt=function(){return!!this.d&&A(this.e/m)>this.d.length-2},d.isNaN=function(){return!this.s},d.isNegative=d.isNeg=function(){return this.s<0},d.isPositive=d.isPos=function(){return this.s>0},d.isZero=function(){return!!this.d&&0===this.d[0]},d.lessThan=d.lt=function(e){return this.cmp(e)<0},d.lessThanOrEqualTo=d.lte=function(e){return this.cmp(e)<1},d.logarithm=d.log=function(e){var n,i,r,t,s,o,u,l,f=this,c=f.constructor,a=c.precision,h=c.rounding;if(null==e)e=new c(10),n=!0;else{if(i=(e=new c(e)).d,e.s<0||!i||!i[0]||e.eq(1))return new c(NaN);n=e.eq(10)}if(i=f.d,f.s<0||!i||!i[0]||f.eq(1))return new c(i&&!i[0]?-1/0:1!=f.s?NaN:i?0:1/0);if(n)if(i.length>1)s=!0;else{for(t=i[0];t%10==0;)t/=10;s=1!==t}if(w=!1,o=B(f,u=a+5),r=n?se(c,u+10):B(e,u),Q((l=S(o,r,u,1)).d,t=a,h))do{if(o=B(f,u+=10),r=n?se(c,u+10):B(e,u),l=S(o,r,u,1),!s){+O(l.d).slice(t+1,t+15)+1==1e14&&(l=p(l,a+1,0));break}}while(Q(l.d,t+=10,h));return w=!0,p(l,a,h)},d.minus=d.sub=function(e){var n,i,r,t,s,o,u,l,f,c,a,h,g=this,v=g.constructor;if(e=new v(e),!g.d||!e.d)return g.s&&e.s?g.d?e.s=-e.s:e=new v(e.d||g.s!==e.s?g:NaN):e=new v(NaN),e;if(g.s!=e.s)return e.s=-e.s,g.plus(e);if(f=g.d,h=e.d,u=v.precision,l=v.rounding,!f[0]||!h[0]){if(h[0])e.s=-e.s;else{if(!f[0])return new v(3===l?-0:0);e=new v(g)}return w?p(e,u,l):e}if(i=A(e.e/m),c=A(g.e/m),f=f.slice(),s=c-i){for((a=s<0)?(n=f,s=-s,o=h.length):(n=h,i=c,o=f.length),s>(r=Math.max(Math.ceil(u/m),o)+2)&&(s=r,n.length=1),n.reverse(),r=s;r--;)n.push(0);n.reverse()}else{for((a=(r=f.length)<(o=h.length))&&(o=r),r=0;r<o;r++)if(f[r]!=h[r]){a=f[r]<h[r];break}s=0}for(a&&(n=f,f=h,h=n,e.s=-e.s),o=f.length,r=h.length-o;r>0;--r)f[o++]=0;for(r=h.length;r>s;){if(f[--r]<h[r]){for(t=r;t&&0===f[--t];)f[t]=F-1;--f[t],f[r]+=F}f[r]-=h[r]}for(;0===f[--o];)f.pop();for(;0===f[0];f.shift())--i;return f[0]?(e.d=f,e.e=ue(f,i),w?p(e,u,l):e):new v(3===l?-0:0)},d.modulo=d.mod=function(e){var n,i=this,r=i.constructor;return e=new r(e),!i.d||!e.s||e.d&&!e.d[0]?new r(NaN):!e.d||i.d&&!i.d[0]?p(new r(i),r.precision,r.rounding):(w=!1,9==r.modulo?(n=S(i,e.abs(),0,3,1)).s*=e.s:n=S(i,e,0,r.modulo,1),n=n.times(e),w=!0,i.minus(n))},d.naturalExponential=d.exp=function(){return Ee(this)},d.naturalLogarithm=d.ln=function(){return B(this)},d.negated=d.neg=function(){var e=new this.constructor(this);return e.s=-e.s,p(e)},d.plus=d.add=function(e){var n,i,r,t,s,o,u,l,f,c,a=this,h=a.constructor;if(e=new h(e),!a.d||!e.d)return a.s&&e.s?a.d||(e=new h(e.d||a.s===e.s?a:NaN)):e=new h(NaN),e;if(a.s!=e.s)return e.s=-e.s,a.minus(e);if(f=a.d,c=e.d,u=h.precision,l=h.rounding,!f[0]||!c[0])return c[0]||(e=new h(a)),w?p(e,u,l):e;if(s=A(a.e/m),r=A(e.e/m),f=f.slice(),t=s-r){for(t<0?(i=f,t=-t,o=c.length):(i=c,r=s,o=f.length),t>(o=(s=Math.ceil(u/m))>o?s+1:o+1)&&(t=o,i.length=1),i.reverse();t--;)i.push(0);i.reverse()}for((o=f.length)-(t=c.length)<0&&(t=o,i=c,c=f,f=i),n=0;t;)n=(f[--t]=f[t]+c[t]+n)/F|0,f[t]%=F;for(n&&(f.unshift(n),++r),o=f.length;0==f[--o];)f.pop();return e.d=f,e.e=ue(f,r),w?p(e,u,l):e},d.precision=d.sd=function(e){var n,i=this;if(void 0!==e&&e!==!!e&&1!==e&&0!==e)throw Error($+e);return i.d?(n=Ie(i.d),e&&i.e+1>n&&(n=i.e+1)):n=NaN,n},d.round=function(){var e=this,n=e.constructor;return p(new n(e),e.e+1,n.rounding)},d.sine=d.sin=function(){var e,n,i=this,r=i.constructor;return i.isFinite()?i.isZero()?new r(i):(e=r.precision,n=r.rounding,r.precision=e+Math.max(i.e,i.sd())+m,r.rounding=1,i=function rn(e,n){var i,r=n.d.length;if(r<3)return n.isZero()?n:J(e,2,n,n);i=1.4*Math.sqrt(r),i=i>16?16:0|i,n=n.times(1/fe(5,i)),n=J(e,2,n,n);for(var t,s=new e(5),o=new e(16),u=new e(20);i--;)t=n.times(n),n=n.times(s.plus(t.times(o.times(t).minus(u))));return n}(r,Be(r,i)),r.precision=e,r.rounding=n,p(Z>2?i.neg():i,e,n,!0)):new r(NaN)},d.squareRoot=d.sqrt=function(){var e,n,i,r,t,s,o=this,u=o.d,l=o.e,f=o.s,c=o.constructor;if(1!==f||!u||!u[0])return new c(!f||f<0&&(!u||u[0])?NaN:u?o:1/0);for(w=!1,0==(f=Math.sqrt(+o))||f==1/0?(((n=O(u)).length+l)%2==0&&(n+="0"),f=Math.sqrt(n),l=A((l+1)/2)-(l<0||l%2),f==1/0?n="5e"+l:n=(n=f.toExponential()).slice(0,n.indexOf("e")+1)+l,r=new c(n)):r=new c(f.toString()),i=(l=c.precision)+3;;)if(r=(s=r).plus(S(o,s,i+2,1)).times(.5),O(s.d).slice(0,i)===(n=O(r.d)).slice(0,i)){if("9999"!=(n=n.slice(i-3,i+1))&&(t||"4999"!=n)){(!+n||!+n.slice(1)&&"5"==n.charAt(0))&&(p(r,l+1,1),e=!r.times(r).eq(o));break}if(!t&&(p(s,l+1,0),s.times(s).eq(o))){r=s;break}i+=4,t=1}return w=!0,p(r,l,c.rounding,e)},d.tangent=d.tan=function(){var e,n,i=this,r=i.constructor;return i.isFinite()?i.isZero()?new r(i):(e=r.precision,n=r.rounding,r.precision=e+10,r.rounding=1,(i=i.sin()).s=1,i=S(i,new r(1).minus(i.times(i)).sqrt(),e+10,0),r.precision=e,r.rounding=n,p(2==Z||4==Z?i.neg():i,e,n,!0)):new r(NaN)},d.times=d.mul=function(e){var n,i,r,t,s,o,u,l,f,c=this,a=c.constructor,h=c.d,g=(e=new a(e)).d;if(e.s*=c.s,!(h&&h[0]&&g&&g[0]))return new a(!e.s||h&&!h[0]&&!g||g&&!g[0]&&!h?NaN:h&&g?0*e.s:e.s/0);for(i=A(c.e/m)+A(e.e/m),(l=h.length)<(f=g.length)&&(s=h,h=g,g=s,o=l,l=f,f=o),s=[],r=o=l+f;r--;)s.push(0);for(r=f;--r>=0;){for(n=0,t=l+r;t>r;)u=s[t]+g[r]*h[t-r-1]+n,s[t--]=u%F|0,n=u/F|0;s[t]=(s[t]+n)%F|0}for(;!s[--o];)s.pop();return n?++i:s.shift(),e.d=s,e.e=ue(s,i),w?p(e,a.precision,a.rounding):e},d.toBinary=function(e,n){return ke(this,2,e,n)},d.toDecimalPlaces=d.toDP=function(e,n){var i=this,r=i.constructor;return i=new r(i),void 0===e?i:(q(e,0,V),void 0===n?n=r.rounding:q(n,0,8),p(i,e+i.e+1,n))},d.toExponential=function(e,n){var i,r=this,t=r.constructor;return void 0===e?i=I(r,!0):(q(e,0,V),void 0===n?n=t.rounding:q(n,0,8),i=I(r=p(new t(r),e+1,n),!0,e+1)),r.isNeg()&&!r.isZero()?"-"+i:i},d.toFixed=function(e,n){var i,r,t=this,s=t.constructor;return void 0===e?i=I(t):(q(e,0,V),void 0===n?n=s.rounding:q(n,0,8),i=I(r=p(new s(t),e+t.e+1,n),!1,e+r.e+1)),t.isNeg()&&!t.isZero()?"-"+i:i},d.toFraction=function(e){var n,i,r,t,s,o,u,l,f,c,a,h,g=this,v=g.d,N=g.constructor;if(!v)return new N(g);if(f=i=new N(1),r=l=new N(0),o=(s=(n=new N(r)).e=Ie(v)-g.e-1)%m,n.d[0]=M(10,o<0?m+o:o),null==e)e=s>0?n:f;else{if(!(u=new N(e)).isInt()||u.lt(f))throw Error($+u);e=u.gt(n)?s>0?n:f:u}for(w=!1,u=new N(O(v)),c=N.precision,N.precision=s=v.length*m*2;a=S(u,n,0,1,1),1!=(t=i.plus(a.times(r))).cmp(e);)i=r,r=t,t=f,f=l.plus(a.times(t)),l=t,t=n,n=u.minus(a.times(t)),u=t;return t=S(e.minus(i),r,0,1,1),l=l.plus(t.times(f)),i=i.plus(t.times(r)),l.s=f.s=g.s,h=S(f,r,s,1).minus(g).abs().cmp(S(l,i,s,1).minus(g).abs())<1?[f,r]:[l,i],N.precision=c,w=!0,h},d.toHexadecimal=d.toHex=function(e,n){return ke(this,16,e,n)},d.toNearest=function(e,n){var i=this,r=i.constructor;if(i=new r(i),null==e){if(!i.d)return i;e=new r(1),n=r.rounding}else{if(e=new r(e),void 0===n?n=r.rounding:q(n,0,8),!i.d)return e.s?i:e;if(!e.d)return e.s&&(e.s=i.s),e}return e.d[0]?(w=!1,i=S(i,e,0,n,1).times(e),w=!0,p(i)):(e.s=i.s,i=e),i},d.toNumber=function(){return+this},d.toOctal=function(e,n){return ke(this,8,e,n)},d.toPower=d.pow=function(e){var n,i,r,t,s,o,u=this,l=u.constructor,f=+(e=new l(e));if(!(u.d&&e.d&&u.d[0]&&e.d[0]))return new l(M(+u,f));if((u=new l(u)).eq(1))return u;if(r=l.precision,s=l.rounding,e.eq(1))return p(u,r,s);if((n=A(e.e/m))>=e.d.length-1&&(i=f<0?-f:f)<=9007199254740991)return t=De(l,u,i,r),e.s<0?new l(1).div(t):p(t,r,s);if((o=u.s)<0){if(n<e.d.length-1)return new l(NaN);if(1&e.d[n]||(o=1),0==u.e&&1==u.d[0]&&1==u.d.length)return u.s=o,u}return(n=0!=(i=M(+u,f))&&isFinite(i)?new l(i+"").e:A(f*(Math.log("0."+O(u.d))/Math.LN10+u.e+1)))>l.maxE+1||n<l.minE-1?new l(n>0?o/0:0):(w=!1,l.rounding=u.s=1,i=Math.min(12,(n+"").length),(t=Ee(e.times(B(u,r+i)),r)).d&&(Q((t=p(t,r+5,1)).d,r,s)&&(n=r+10,+O((t=p(Ee(e.times(B(u,n+i)),n),n+5,1)).d).slice(r+1,r+15)+1==1e14&&(t=p(t,r+1,0)))),t.s=o,w=!0,l.rounding=s,p(t,r,s))},d.toPrecision=function(e,n){var i,r=this,t=r.constructor;return void 0===e?i=I(r,r.e<=t.toExpNeg||r.e>=t.toExpPos):(q(e,1,V),void 0===n?n=t.rounding:q(n,0,8),i=I(r=p(new t(r),e,n),e<=r.e||r.e<=t.toExpNeg,e)),r.isNeg()&&!r.isZero()?"-"+i:i},d.toSignificantDigits=d.toSD=function(e,n){var r=this.constructor;return void 0===e?(e=r.precision,n=r.rounding):(q(e,1,V),void 0===n?n=r.rounding:q(n,0,8)),p(new r(this),e,n)},d.toString=function(){var e=this,n=e.constructor,i=I(e,e.e<=n.toExpNeg||e.e>=n.toExpPos);return e.isNeg()&&!e.isZero()?"-"+i:i},d.truncated=d.trunc=function(){return p(new this.constructor(this),this.e+1,1)},d.valueOf=d.toJSON=function(){var e=this,n=e.constructor,i=I(e,e.e<=n.toExpNeg||e.e>=n.toExpPos);return e.isNeg()?"-"+i:i};var S=function(){function e(r,t,s){var o,u=0,l=r.length;for(r=r.slice();l--;)o=r[l]*t+u,r[l]=o%s|0,u=o/s|0;return u&&r.unshift(u),r}function n(r,t,s,o){var u,l;if(s!=o)l=s>o?1:-1;else for(u=l=0;u<s;u++)if(r[u]!=t[u]){l=r[u]>t[u]?1:-1;break}return l}function i(r,t,s,o){for(var u=0;s--;)r[s]-=u,u=r[s]<t[s]?1:0,r[s]=u*o+r[s]-t[s];for(;!r[0]&&r.length>1;)r.shift()}return function(r,t,s,o,u,l){var f,c,a,h,g,v,N,_,C,T,E,P,x,D,le,z,W,ce,L,y,ee=r.constructor,ae=r.s==t.s?1:-1,b=r.d,k=t.d;if(!(b&&b[0]&&k&&k[0]))return new ee(r.s&&t.s&&(b?!k||b[0]!=k[0]:k)?b&&0==b[0]||!k?0*ae:ae/0:NaN);for(l?(g=1,c=r.e-t.e):(l=F,g=m,c=A(r.e/g)-A(t.e/g)),L=k.length,W=b.length,T=(C=new ee(ae)).d=[],a=0;k[a]==(b[a]||0);a++);if(k[a]>(b[a]||0)&&c--,null==s?(D=s=ee.precision,o=ee.rounding):D=u?s+(r.e-t.e)+1:s,D<0)T.push(1),v=!0;else{if(D=D/g+2|0,a=0,1==L){for(h=0,k=k[0],D++;(a<W||h)&&D--;a++)le=h*l+(b[a]||0),T[a]=le/k|0,h=le%k|0;v=h||a<W}else{for((h=l/(k[0]+1)|0)>1&&(k=e(k,h,l),b=e(b,h,l),L=k.length,W=b.length),z=L,P=(E=b.slice(0,L)).length;P<L;)E[P++]=0;(y=k.slice()).unshift(0),ce=k[0],k[1]>=l/2&&++ce;do{h=0,(f=n(k,E,L,P))<0?(x=E[0],L!=P&&(x=x*l+(E[1]||0)),(h=x/ce|0)>1?(h>=l&&(h=l-1),1==(f=n(N=e(k,h,l),E,_=N.length,P=E.length))&&(h--,i(N,L<_?y:k,_,l))):(0==h&&(f=h=1),N=k.slice()),(_=N.length)<P&&N.unshift(0),i(E,N,P,l),-1==f&&((f=n(k,E,L,P=E.length))<1&&(h++,i(E,L<P?y:k,P,l))),P=E.length):0===f&&(h++,E=[0]),T[a++]=h,f&&E[0]?E[P++]=b[z]||0:(E=[b[z]],P=1)}while((z++<W||void 0!==E[0])&&D--);v=void 0!==E[0]}T[0]||T.shift()}if(1==g)C.e=c,qe=v;else{for(a=1,h=T[0];h>=10;h/=10)a++;C.e=a+c*g-1,p(C,u?s+C.e+1:s,o,v)}return C}}();function p(e,n,i,r){var t,s,o,u,l,f,c,a,h,g=e.constructor;e:if(null!=n){if(!(a=e.d))return e;for(t=1,u=a[0];u>=10;u/=10)t++;if((s=n-t)<0)s+=m,o=n,l=(c=a[h=0])/M(10,t-o-1)%10|0;else if((h=Math.ceil((s+1)/m))>=(u=a.length)){if(!r)break e;for(;u++<=h;)a.push(0);c=l=0,t=1,o=(s%=m)-m+1}else{for(c=u=a[h],t=1;u>=10;u/=10)t++;l=(o=(s%=m)-m+t)<0?0:c/M(10,t-o-1)%10|0}if(r=r||n<0||void 0!==a[h+1]||(o<0?c:c%M(10,t-o-1)),f=i<4?(l||r)&&(0==i||i==(e.s<0?3:2)):l>5||5==l&&(4==i||r||6==i&&(s>0?o>0?c/M(10,t-o):0:a[h-1])%10&1||i==(e.s<0?8:7)),n<1||!a[0])return a.length=0,f?(n-=e.e+1,a[0]=M(10,(m-n%m)%m),e.e=-n||0):a[0]=e.e=0,e;if(0==s?(a.length=h,u=1,h--):(a.length=h+1,u=M(10,m-s),a[h]=o>0?(c/M(10,t-o)%M(10,o)|0)*u:0),f)for(;;){if(0==h){for(s=1,o=a[0];o>=10;o/=10)s++;for(o=a[0]+=u,u=1;o>=10;o/=10)u++;s!=u&&(e.e++,a[0]==F&&(a[0]=1));break}if(a[h]+=u,a[h]!=F)break;a[h--]=0,u=1}for(s=a.length;0===a[--s];)a.pop()}return w&&(e.e>g.maxE?(e.d=null,e.e=NaN):e.e<g.minE&&(e.e=0,e.d=[0])),e}function I(e,n,i){if(!e.isFinite())return Ue(e);var r,t=e.e,s=O(e.d),o=s.length;return n?(i&&(r=i-o)>0?s=s.charAt(0)+"."+s.slice(1)+U(r):o>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(e.e<0?"e":"e+")+e.e):t<0?(s="0."+U(-t-1)+s,i&&(r=i-o)>0&&(s+=U(r))):t>=o?(s+=U(t+1-o),i&&(r=i-t-1)>0&&(s=s+"."+U(r))):((r=t+1)<o&&(s=s.slice(0,r)+"."+s.slice(r)),i&&(r=i-o)>0&&(t+1===o&&(s+="."),s+=U(r))),s}function ue(e,n){var i=e[0];for(n*=m;i>=10;i/=10)n++;return n}function se(e,n,i){if(n>ye)throw w=!0,i&&(e.precision=i),Error(Te);return p(new e(re),n,1,!0)}function R(e,n,i){if(n>ve)throw Error(Te);return p(new e(te),n,i,!0)}function Ie(e){var n=e.length-1,i=n*m+1;if(n=e[n]){for(;n%10==0;n/=10)i--;for(n=e[0];n>=10;n/=10)i++}return i}function U(e){for(var n="";e--;)n+="0";return n}function De(e,n,i,r){var t,s=new e(1),o=Math.ceil(r/m+4);for(w=!1;;){if(i%2&&(Ae((s=s.times(n)).d,o)&&(t=!0)),0===(i=A(i/2))){i=s.d.length-1,t&&0===s.d[i]&&++s.d[i];break}Ae((n=n.times(n)).d,o)}return w=!0,s}function be(e){return 1&e.d[e.d.length-1]}function Ze(e,n,i){for(var r,t=new e(n[0]),s=0;++s<n.length;){if(!(r=new e(n[s])).s){t=r;break}t[i](r)&&(t=r)}return t}function Ee(e,n){var i,r,t,s,o,u,l,f=0,c=0,a=0,h=e.constructor,g=h.rounding,v=h.precision;if(!e.d||!e.d[0]||e.e>17)return new h(e.d?e.d[0]?e.s<0?0:1/0:1:e.s?e.s<0?0:e:NaN);for(null==n?(w=!1,l=v):l=n,u=new h(.03125);e.e>-2;)e=e.times(u),a+=5;for(l+=r=Math.log(M(2,a))/Math.LN10*2+5|0,i=s=o=new h(1),h.precision=l;;){if(s=p(s.times(e),l,1),i=i.times(++c),O((u=o.plus(S(s,i,l,1))).d).slice(0,l)===O(o.d).slice(0,l)){for(t=a;t--;)o=p(o.times(o),l,1);if(null!=n)return h.precision=v,o;if(!(f<3&&Q(o.d,l-r,g,f)))return p(o,h.precision=v,g,w=!0);h.precision=l+=10,i=s=u=new h(1),c=0,f++}o=u}}function B(e,n){var i,r,t,s,o,u,l,f,c,a,h,g=1,N=e,_=N.d,C=N.constructor,T=C.rounding,E=C.precision;if(N.s<0||!_||!_[0]||!N.e&&1==_[0]&&1==_.length)return new C(_&&!_[0]?-1/0:1!=N.s?NaN:_?0:N);if(null==n?(w=!1,c=E):c=n,C.precision=c+=10,r=(i=O(_)).charAt(0),!(Math.abs(s=N.e)<15e14))return f=se(C,c+2,E).times(s+""),N=B(new C(r+"."+i.slice(1)),c-10).plus(f),C.precision=E,null==n?p(N,E,T,w=!0):N;for(;r<7&&1!=r||1==r&&i.charAt(1)>3;)r=(i=O((N=N.times(e)).d)).charAt(0),g++;for(s=N.e,r>1?(N=new C("0."+i),s++):N=new C(r+"."+i.slice(1)),a=N,l=o=N=S(N.minus(1),N.plus(1),c,1),h=p(N.times(N),c,1),t=3;;){if(o=p(o.times(h),c,1),O((f=l.plus(S(o,new C(t),c,1))).d).slice(0,c)===O(l.d).slice(0,c)){if(l=l.times(2),0!==s&&(l=l.plus(se(C,c+2,E).times(s+""))),l=S(l,new C(g),c,1),null!=n)return C.precision=E,l;if(!Q(l.d,c-10,T,u))return p(l,C.precision=E,T,w=!0);C.precision=c+=10,f=o=N=S(a.minus(1),a.plus(1),c,1),h=p(N.times(N),c,1),t=u=1}l=f,t+=2}}function Ue(e){return String(e.s*e.s/0)}function Se(e,n){var i,r,t;for((i=n.indexOf("."))>-1&&(n=n.replace(".","")),(r=n.search(/e/i))>0?(i<0&&(i=r),i+=+n.slice(r+1),n=n.substring(0,r)):i<0&&(i=n.length),r=0;48===n.charCodeAt(r);r++);for(t=n.length;48===n.charCodeAt(t-1);--t);if(n=n.slice(r,t)){if(t-=r,e.e=i=i-r-1,e.d=[],r=(i+1)%m,i<0&&(r+=m),r<t){for(r&&e.d.push(+n.slice(0,r)),t-=m;r<t;)e.d.push(+n.slice(r,r+=m));n=n.slice(r),r=m-n.length}else r-=t;for(;r--;)n+="0";e.d.push(+n),w&&(e.e>e.constructor.maxE?(e.d=null,e.e=NaN):e.e<e.constructor.minE&&(e.e=0,e.d=[0]))}else e.e=0,e.d=[0];return e}function J(e,n,i,r,t){var s,o,u,l,c=e.precision,a=Math.ceil(c/m);for(w=!1,l=i.times(i),u=new e(r);;){if(o=S(u.times(l),new e(n++*n++),c,1),u=t?r.plus(o):r.minus(o),r=S(o.times(l),new e(n++*n++),c,1),void 0!==(o=u.plus(r)).d[a]){for(s=a;o.d[s]===u.d[s]&&s--;);if(-1==s)break}s=u,u=r,r=o,o=s}return w=!0,o.d.length=a+1,o}function fe(e,n){for(var i=e;--n;)i*=e;return i}function Be(e,n){var i,r=n.s<0,t=R(e,e.precision,1),s=t.times(.5);if((n=n.abs()).lte(s))return Z=r?4:1,n;if((i=n.divToInt(t)).isZero())Z=r?3:2;else{if((n=n.minus(i.times(t))).lte(s))return Z=be(i)?r?2:3:r?4:1,n;Z=be(i)?r?1:4:r?3:2}return n.minus(t).abs()}function ke(e,n,i,r){var t,s,o,u,l,f,c,a,h,g=e.constructor,v=void 0!==i;if(v?(q(i,1,V),void 0===r?r=g.rounding:q(r,0,8)):(i=g.precision,r=g.rounding),e.isFinite()){for(v?(t=2,16==n?i=4*i-3:8==n&&(i=3*i-2)):t=n,(o=(c=I(e)).indexOf("."))>=0&&(c=c.replace(".",""),(h=new g(1)).e=c.length-o,h.d=ie(I(h),10,t),h.e=h.d.length),s=l=(a=ie(c,10,t)).length;0==a[--l];)a.pop();if(a[0]){if(o<0?s--:((e=new g(e)).d=a,e.e=s,a=(e=S(e,h,i,r,0,t)).d,s=e.e,f=qe),o=a[i],u=t/2,f=f||void 0!==a[i+1],f=r<4?(void 0!==o||f)&&(0===r||r===(e.s<0?3:2)):o>u||o===u&&(4===r||f||6===r&&1&a[i-1]||r===(e.s<0?8:7)),a.length=i,f)for(;++a[--i]>t-1;)a[i]=0,i||(++s,a.unshift(1));for(l=a.length;!a[l-1];--l);for(o=0,c="";o<l;o++)c+=we.charAt(a[o]);if(v){if(l>1)if(16==n||8==n){for(o=16==n?4:3,--l;l%o;l++)c+="0";for(l=(a=ie(c,t,n)).length;!a[l-1];--l);for(o=1,c="1.";o<l;o++)c+=we.charAt(a[o])}else c=c.charAt(0)+"."+c.slice(1);c=c+(s<0?"p":"p+")+s}else if(s<0){for(;++s;)c="0"+c;c="0."+c}else if(++s>l)for(s-=l;s--;)c+="0";else s<l&&(c=c.slice(0,s)+"."+c.slice(s))}else c=v?"0p+0":"0";c=(16==n?"0x":2==n?"0b":8==n?"0o":"")+c}else c=Ue(e);return e.s<0?"-"+c:c}function Ae(e,n){if(e.length>n)return e.length=n,!0}function tn(e){return new this(e).abs()}function sn(e){return new this(e).acos()}function on(e){return new this(e).acosh()}function un(e,n){return new this(e).plus(n)}function fn(e){return new this(e).asin()}function ln(e){return new this(e).asinh()}function cn(e){return new this(e).atan()}function an(e){return new this(e).atanh()}function hn(e,n){e=new this(e),n=new this(n);var i,r=this.precision,t=this.rounding,s=r+4;return e.s&&n.s?e.d||n.d?!n.d||e.isZero()?(i=n.s<0?R(this,r,t):new this(0)).s=e.s:!e.d||n.isZero()?(i=R(this,s,1).times(.5)).s=e.s:n.s<0?(this.precision=s,this.rounding=1,i=this.atan(S(e,n,s,1)),n=R(this,s,1),this.precision=r,this.rounding=t,i=e.s<0?i.minus(n):i.plus(n)):i=this.atan(S(e,n,s,1)):(i=R(this,s,1).times(n.s>0?.25:.75)).s=e.s:i=new this(NaN),i}function dn(e){return new this(e).cbrt()}function pn(e){return p(e=new this(e),e.e+1,2)}function gn(e,n,i){return new this(e).clamp(n,i)}function mn(e){if(!e||"object"!=typeof e)throw Error(oe+"Object expected");var n,i,r,t=!0===e.defaults,s=["precision",1,V,"rounding",0,8,"toExpNeg",-H,0,"toExpPos",0,H,"maxE",0,H,"minE",-H,0,"modulo",0,9];for(n=0;n<s.length;n+=3)if(i=s[n],t&&(this[i]=Ne[i]),void 0!==(r=e[i])){if(!(A(r)===r&&r>=s[n+1]&&r<=s[n+2]))throw Error($+i+": "+r);this[i]=r}if(i="crypto",t&&(this[i]=Ne[i]),void 0!==(r=e[i])){if(!0!==r&&!1!==r&&0!==r&&1!==r)throw Error($+i+": "+r);if(r){if(!(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes)))throw Error(Le);this[i]=!0}else this[i]=!1}return this}function wn(e){return new this(e).cos()}function Nn(e){return new this(e).cosh()}function vn(e,n){return new this(e).div(n)}function En(e){return new this(e).exp()}function Sn(e){return p(e=new this(e),e.e+1,3)}function kn(){var e,n,i=new this(0);for(w=!1,e=0;e<arguments.length;)if((n=new this(arguments[e++])).d)i.d&&(i=i.plus(n.times(n)));else{if(n.s)return w=!0,new this(1/0);i=n}return w=!0,i.sqrt()}function _e(e){return e instanceof Y||e&&e.toStringTag===Re||!1}function Cn(e){return new this(e).ln()}function Mn(e,n){return new this(e).log(n)}function On(e){return new this(e).log(2)}function Pn(e){return new this(e).log(10)}function bn(){return Ze(this,arguments,"lt")}function An(){return Ze(this,arguments,"gt")}function _n(e,n){return new this(e).mod(n)}function qn(e,n){return new this(e).mul(n)}function Tn(e,n){return new this(e).pow(n)}function Ln(e){var n,i,r,t,s=0,o=new this(1),u=[];if(void 0===e?e=this.precision:q(e,1,V),r=Math.ceil(e/m),this.crypto)if(crypto.getRandomValues)for(n=crypto.getRandomValues(new Uint32Array(r));s<r;)(t=n[s])>=429e7?n[s]=crypto.getRandomValues(new Uint32Array(1))[0]:u[s++]=t%1e7;else{if(!crypto.randomBytes)throw Error(Le);for(n=crypto.randomBytes(r*=4);s<r;)(t=n[s]+(n[s+1]<<8)+(n[s+2]<<16)+((127&n[s+3])<<24))>=214e7?crypto.randomBytes(4).copy(n,s):(u.push(t%1e7),s+=4);s=r/4}else for(;s<r;)u[s++]=1e7*Math.random()|0;for(r=u[--s],e%=m,r&&e&&(t=M(10,m-e),u[s]=(r/t|0)*t);0===u[s];s--)u.pop();if(s<0)i=0,u=[0];else{for(i=-1;0===u[0];i-=m)u.shift();for(r=1,t=u[0];t>=10;t/=10)r++;r<m&&(i-=m-r)}return o.e=i,o.d=u,o}function Rn(e){return p(e=new this(e),e.e+1,this.rounding)}function Fn(e){return(e=new this(e)).d?e.d[0]?e.s:0*e.s:e.s||NaN}function In(e){return new this(e).sin()}function Dn(e){return new this(e).sinh()}function Zn(e){return new this(e).sqrt()}function Un(e,n){return new this(e).sub(n)}function Bn(){var e=0,n=arguments,i=new this(n[e]);for(w=!1;i.s&&++e<n.length;)i=i.plus(n[e]);return w=!0,p(i,this.precision,this.rounding)}function $n(e){return new this(e).tan()}function Vn(e){return new this(e).tanh()}function Hn(e){return p(e=new this(e),e.e+1,1)}d[Symbol.for("nodejs.util.inspect.custom")]=d.toString,d[Symbol.toStringTag]="Decimal";var Y=d.constructor=function $e(e){var n,i,r;function t(s){var o,u,l,f=this;if(!(f instanceof t))return new t(s);if(f.constructor=t,_e(s))return f.s=s.s,void(w?!s.d||s.e>t.maxE?(f.e=NaN,f.d=null):s.e<t.minE?(f.e=0,f.d=[0]):(f.e=s.e,f.d=s.d.slice()):(f.e=s.e,f.d=s.d?s.d.slice():s.d));if("number"===(l=typeof s)){if(0===s)return f.s=1/s<0?-1:1,f.e=0,void(f.d=[0]);if(s<0?(s=-s,f.s=-1):f.s=1,s===~~s&&s<1e7){for(o=0,u=s;u>=10;u/=10)o++;return void(w?o>t.maxE?(f.e=NaN,f.d=null):o<t.minE?(f.e=0,f.d=[0]):(f.e=o,f.d=[s]):(f.e=o,f.d=[s]))}return 0*s!=0?(s||(f.s=NaN),f.e=NaN,void(f.d=null)):Se(f,s.toString())}if("string"!==l)throw Error($+s);return 45===(u=s.charCodeAt(0))?(s=s.slice(1),f.s=-1):(43===u&&(s=s.slice(1)),f.s=1),Fe.test(s)?Se(f,s):function nn(e,n){var i,r,t,s,o,u,l,f,c;if(n.indexOf("_")>-1){if(n=n.replace(/(\d)_(?=\d)/g,"$1"),Fe.test(n))return Se(e,n)}else if("Infinity"===n||"NaN"===n)return+n||(e.s=NaN),e.e=NaN,e.d=null,e;if(Ye.test(n))i=16,n=n.toLowerCase();else if(Qe.test(n))i=2;else{if(!xe.test(n))throw Error($+n);i=8}for((s=n.search(/p/i))>0?(l=+n.slice(s+1),n=n.substring(2,s)):n=n.slice(2),o=(s=n.indexOf("."))>=0,r=e.constructor,o&&(s=(u=(n=n.replace(".","")).length)-s,t=De(r,new r(i),s,2*s)),s=c=(f=ie(n,i,F)).length-1;0===f[s];--s)f.pop();return s<0?new r(0*e.s):(e.e=ue(f,c),e.d=f,w=!1,o&&(e=S(e,t,4*u)),l&&(e=e.times(Math.abs(l)<54?M(2,l):Y.pow(2,l))),w=!0,e)}(f,s)}if(t.prototype=d,t.ROUND_UP=0,t.ROUND_DOWN=1,t.ROUND_CEIL=2,t.ROUND_FLOOR=3,t.ROUND_HALF_UP=4,t.ROUND_HALF_DOWN=5,t.ROUND_HALF_EVEN=6,t.ROUND_HALF_CEIL=7,t.ROUND_HALF_FLOOR=8,t.EUCLID=9,t.config=t.set=mn,t.clone=$e,t.isDecimal=_e,t.abs=tn,t.acos=sn,t.acosh=on,t.add=un,t.asin=fn,t.asinh=ln,t.atan=cn,t.atanh=an,t.atan2=hn,t.cbrt=dn,t.ceil=pn,t.clamp=gn,t.cos=wn,t.cosh=Nn,t.div=vn,t.exp=En,t.floor=Sn,t.hypot=kn,t.ln=Cn,t.log=Mn,t.log10=Pn,t.log2=On,t.max=bn,t.min=An,t.mod=_n,t.mul=qn,t.pow=Tn,t.random=Ln,t.round=Rn,t.sign=Fn,t.sin=In,t.sinh=Dn,t.sqrt=Zn,t.sub=Un,t.sum=Bn,t.tan=$n,t.tanh=Vn,t.trunc=Hn,void 0===e&&(e={}),e&&!0!==e.defaults)for(r=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],n=0;n<r.length;)e.hasOwnProperty(i=r[n++])||(e[i]=this[i]);return t.config(e),t}(Ne);re=new Y(re),te=new Y(te);var Ve=Y,Jn="Cloudflare-Workers",Wn="node";function He(){var e,n,i;return"object"==typeof Netlify?"netlify":"string"==typeof EdgeRuntime?"edge-light":(null==(e=globalThis.navigator)?void 0:e.userAgent)===Jn?"workerd":globalThis.Deno?"deno":globalThis.__lagon__?"lagon":(null==(i=null==(n=globalThis.process)?void 0:n.release)?void 0:i.name)===Wn?"node":globalThis.Bun?"bun":globalThis.fastly?"fastly":"unknown"}},"./node_modules/cookie/index.js":(__unused_webpack_module,exports)=>{"use strict";exports.Q=function parse(str,options){if("string"!=typeof str)throw new TypeError("argument str must be a string");var obj={},dec=(options||{}).decode||decode,index=0;for(;index<str.length;){var eqIdx=str.indexOf("=",index);if(-1===eqIdx)break;var endIdx=str.indexOf(";",index);if(-1===endIdx)endIdx=str.length;else if(endIdx<eqIdx){index=str.lastIndexOf(";",eqIdx-1)+1;continue}var key=str.slice(index,eqIdx).trim();if(void 0===obj[key]){var val=str.slice(eqIdx+1,endIdx).trim();34===val.charCodeAt(0)&&(val=val.slice(1,-1)),obj[key]=tryDecode(val,dec)}index=endIdx+1}return obj},exports.q=function serialize(name,val,options){var opt=options||{},enc=opt.encode||encode;if("function"!=typeof enc)throw new TypeError("option encode is invalid");if(!fieldContentRegExp.test(name))throw new TypeError("argument name is invalid");var value=enc(val);if(value&&!fieldContentRegExp.test(value))throw new TypeError("argument val is invalid");var str=name+"="+value;if(null!=opt.maxAge){var maxAge=opt.maxAge-0;if(isNaN(maxAge)||!isFinite(maxAge))throw new TypeError("option maxAge is invalid");str+="; Max-Age="+Math.floor(maxAge)}if(opt.domain){if(!fieldContentRegExp.test(opt.domain))throw new TypeError("option domain is invalid");str+="; Domain="+opt.domain}if(opt.path){if(!fieldContentRegExp.test(opt.path))throw new TypeError("option path is invalid");str+="; Path="+opt.path}if(opt.expires){var expires=opt.expires;if(!function isDate(val){return"[object Date]"===__toString.call(val)||val instanceof Date}(expires)||isNaN(expires.valueOf()))throw new TypeError("option expires is invalid");str+="; Expires="+expires.toUTCString()}opt.httpOnly&&(str+="; HttpOnly");opt.secure&&(str+="; Secure");if(opt.priority){switch("string"==typeof opt.priority?opt.priority.toLowerCase():opt.priority){case"low":str+="; Priority=Low";break;case"medium":str+="; Priority=Medium";break;case"high":str+="; Priority=High";break;default:throw new TypeError("option priority is invalid")}}if(opt.sameSite){switch("string"==typeof opt.sameSite?opt.sameSite.toLowerCase():opt.sameSite){case!0:str+="; SameSite=Strict";break;case"lax":str+="; SameSite=Lax";break;case"strict":str+="; SameSite=Strict";break;case"none":str+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}}return str};var __toString=Object.prototype.toString,fieldContentRegExp=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function decode(str){return-1!==str.indexOf("%")?decodeURIComponent(str):str}function encode(val){return encodeURIComponent(val)}function tryDecode(str,decode){try{return decode(str)}catch(e){return str}}},"./node_modules/next-auth/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>NextAuth});var _SessionStore_instances,_SessionStore_chunks,_SessionStore_option,_SessionStore_logger,_SessionStore_chunk,_SessionStore_clean,jsx_runtime=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),__classPrivateFieldSet=function(receiver,state,value,kind,f){if("m"===kind)throw new TypeError("Private method is not writable");if("a"===kind&&!f)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof state?receiver!==state||!f:!state.has(receiver))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===kind?f.call(receiver,value):f?f.value=value:state.set(receiver,value),value},__classPrivateFieldGet=function(receiver,state,kind,f){if("a"===kind&&!f)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof state?receiver!==state||!f:!state.has(receiver))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===kind?f:"a"===kind?f.call(receiver):f?f.value:state.get(receiver)};function defaultCookies(useSecureCookies){const cookiePrefix=useSecureCookies?"__Secure-":"";return{sessionToken:{name:`${cookiePrefix}next-auth.session-token`,options:{httpOnly:!0,sameSite:"lax",path:"/",secure:useSecureCookies}},callbackUrl:{name:`${cookiePrefix}next-auth.callback-url`,options:{httpOnly:!0,sameSite:"lax",path:"/",secure:useSecureCookies}},csrfToken:{name:(useSecureCookies?"__Host-":"")+"next-auth.csrf-token",options:{httpOnly:!0,sameSite:"lax",path:"/",secure:useSecureCookies}},pkceCodeVerifier:{name:`${cookiePrefix}next-auth.pkce.code_verifier`,options:{httpOnly:!0,sameSite:"lax",path:"/",secure:useSecureCookies,maxAge:900}},state:{name:`${cookiePrefix}next-auth.state`,options:{httpOnly:!0,sameSite:"lax",path:"/",secure:useSecureCookies,maxAge:900}},nonce:{name:`${cookiePrefix}next-auth.nonce`,options:{httpOnly:!0,sameSite:"lax",path:"/",secure:useSecureCookies}}}}class cookie_SessionStore{constructor(option,req,logger){_SessionStore_instances.add(this),_SessionStore_chunks.set(this,{}),_SessionStore_option.set(this,void 0),_SessionStore_logger.set(this,void 0),__classPrivateFieldSet(this,_SessionStore_logger,logger,"f"),__classPrivateFieldSet(this,_SessionStore_option,option,"f");const{cookies}=req,{name:cookieName}=option;if("function"==typeof cookies?.getAll)for(const{name,value}of cookies.getAll())name.startsWith(cookieName)&&(__classPrivateFieldGet(this,_SessionStore_chunks,"f")[name]=value);else if(cookies instanceof Map)for(const name of cookies.keys())name.startsWith(cookieName)&&(__classPrivateFieldGet(this,_SessionStore_chunks,"f")[name]=cookies.get(name));else for(const name in cookies)name.startsWith(cookieName)&&(__classPrivateFieldGet(this,_SessionStore_chunks,"f")[name]=cookies[name])}get value(){const sortedKeys=Object.keys(__classPrivateFieldGet(this,_SessionStore_chunks,"f")).sort(((a,b)=>parseInt(a.split(".").pop()||"0")-parseInt(b.split(".").pop()||"0")));return sortedKeys.map((key=>__classPrivateFieldGet(this,_SessionStore_chunks,"f")[key])).join("")}chunk(value,options){const cookies=__classPrivateFieldGet(this,_SessionStore_instances,"m",_SessionStore_clean).call(this),chunked=__classPrivateFieldGet(this,_SessionStore_instances,"m",_SessionStore_chunk).call(this,{name:__classPrivateFieldGet(this,_SessionStore_option,"f").name,value,options:{...__classPrivateFieldGet(this,_SessionStore_option,"f").options,...options}});for(const chunk of chunked)cookies[chunk.name]=chunk;return Object.values(cookies)}clean(){return Object.values(__classPrivateFieldGet(this,_SessionStore_instances,"m",_SessionStore_clean).call(this))}}_SessionStore_chunks=new WeakMap,_SessionStore_option=new WeakMap,_SessionStore_logger=new WeakMap,_SessionStore_instances=new WeakSet,_SessionStore_chunk=function _SessionStore_chunk(cookie){const chunkCount=Math.ceil(cookie.value.length/3933);if(1===chunkCount)return __classPrivateFieldGet(this,_SessionStore_chunks,"f")[cookie.name]=cookie.value,[cookie];const cookies=[];for(let i=0;i<chunkCount;i++){const name=`${cookie.name}.${i}`,value=cookie.value.substr(3933*i,3933);cookies.push({...cookie,name,value}),__classPrivateFieldGet(this,_SessionStore_chunks,"f")[name]=value}return __classPrivateFieldGet(this,_SessionStore_logger,"f").debug("CHUNKING_SESSION_COOKIE",{message:"Session cookie exceeds allowed 4096 bytes.",emptyCookieSize:163,valueSize:cookie.value.length,chunks:cookies.map((c=>c.value.length+163))}),cookies},_SessionStore_clean=function _SessionStore_clean(){const cleanedChunks={};for(const name in __classPrivateFieldGet(this,_SessionStore_chunks,"f"))delete __classPrivateFieldGet(this,_SessionStore_chunks,"f")?.[name],cleanedChunks[name]={name,value:"",options:{...__classPrivateFieldGet(this,_SessionStore_option,"f").options,maxAge:0}};return cleanedChunks};var errors=__webpack_require__("./node_modules/@auth/core/errors.js");let warned=!1;function isValidHttpUrl(url,baseUrl){try{return/^https?:/.test(new URL(url,url.startsWith("/")?baseUrl:void 0).protocol)}catch{return!1}}let hasCredentials=!1,hasEmail=!1;const emailMethods=["createVerificationToken","useVerificationToken","getUserByEmail"],sessionMethods=["createUser","getUser","getUserByEmail","getUserByAccount","updateUser","linkAccount","createSession","getSessionAndUser","updateSession","deleteSession"];const hkdf=async(digest,ikm,salt,info,keylen)=>{const{crypto:{subtle}}=(()=>{if("undefined"!=typeof globalThis)return globalThis;if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;throw new Error("unable to locate global object")})();return new Uint8Array(await subtle.deriveBits({name:"HKDF",hash:`SHA-${digest.substr(3)}`,salt,info},await subtle.importKey("raw",ikm,"HKDF",!1,["deriveBits"]),keylen<<3))};function normalizeUint8Array(input,label){if("string"==typeof input)return(new TextEncoder).encode(input);if(!(input instanceof Uint8Array))throw new TypeError(`"${label}"" must be an instance of Uint8Array or a string`);return input}async function web_hkdf(digest,ikm,salt,info,keylen){return hkdf(function normalizeDigest(digest){switch(digest){case"sha256":case"sha384":case"sha512":case"sha1":return digest;default:throw new TypeError('unsupported "digest" value')}}(digest),function normalizeIkm(input){const ikm=normalizeUint8Array(input,"ikm");if(!ikm.byteLength)throw new TypeError('"ikm" must be at least one byte in length');return ikm}(ikm),normalizeUint8Array(salt,"salt"),function normalizeInfo(input){const info=normalizeUint8Array(input,"info");if(info.byteLength>1024)throw TypeError('"info" must not contain more than 1024 bytes');return info}(info),function normalizeKeylen(input,digest){if("number"!=typeof input||!Number.isInteger(input)||input<1)throw new TypeError('"keylen" must be a positive integer');if(input>255*(parseInt(digest.substr(3),10)>>3||20))throw new TypeError('"keylen" too large');return input}(keylen,digest))}const webcrypto=crypto,webcrypto_isCryptoKey=key=>key instanceof CryptoKey,runtime_digest=async(algorithm,data)=>{const subtleDigest=`SHA-${algorithm.slice(-3)}`;return new Uint8Array(await webcrypto.subtle.digest(subtleDigest,data))},buffer_utils_encoder=new TextEncoder,buffer_utils_decoder=new TextDecoder,MAX_INT32=2**32;function buffer_utils_concat(...buffers){const size=buffers.reduce(((acc,{length})=>acc+length),0),buf=new Uint8Array(size);let i=0;return buffers.forEach((buffer=>{buf.set(buffer,i),i+=buffer.length})),buf}function writeUInt32BE(buf,value,offset){if(value<0||value>=MAX_INT32)throw new RangeError(`value must be >= 0 and <= ${MAX_INT32-1}. Received ${value}`);buf.set([value>>>24,value>>>16,value>>>8,255&value],offset)}function uint64be(value){const high=Math.floor(value/MAX_INT32),low=value%MAX_INT32,buf=new Uint8Array(8);return writeUInt32BE(buf,high,0),writeUInt32BE(buf,low,4),buf}function uint32be(value){const buf=new Uint8Array(4);return writeUInt32BE(buf,value),buf}function lengthAndInput(input){return buffer_utils_concat(uint32be(input.length),input)}const encode=input=>(input=>{let unencoded=input;"string"==typeof unencoded&&(unencoded=buffer_utils_encoder.encode(unencoded));const arr=[];for(let i=0;i<unencoded.length;i+=32768)arr.push(String.fromCharCode.apply(null,unencoded.subarray(i,i+32768)));return btoa(arr.join(""))})(input).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_"),decode=input=>{let encoded=input;encoded instanceof Uint8Array&&(encoded=buffer_utils_decoder.decode(encoded)),encoded=encoded.replace(/-/g,"+").replace(/_/g,"/").replace(/\s/g,"");try{return(encoded=>{const binary=atob(encoded),bytes=new Uint8Array(binary.length);for(let i=0;i<binary.length;i++)bytes[i]=binary.charCodeAt(i);return bytes})(encoded)}catch(_a){throw new TypeError("The input to be decoded is not correctly encoded.")}};class errors_JOSEError extends Error{static get code(){return"ERR_JOSE_GENERIC"}constructor(message){var _a;super(message),this.code="ERR_JOSE_GENERIC",this.name=this.constructor.name,null===(_a=Error.captureStackTrace)||void 0===_a||_a.call(Error,this,this.constructor)}}class JWTClaimValidationFailed extends errors_JOSEError{static get code(){return"ERR_JWT_CLAIM_VALIDATION_FAILED"}constructor(message,claim="unspecified",reason="unspecified"){super(message),this.code="ERR_JWT_CLAIM_VALIDATION_FAILED",this.claim=claim,this.reason=reason}}class JWTExpired extends errors_JOSEError{static get code(){return"ERR_JWT_EXPIRED"}constructor(message,claim="unspecified",reason="unspecified"){super(message),this.code="ERR_JWT_EXPIRED",this.claim=claim,this.reason=reason}}class errors_JOSEAlgNotAllowed extends errors_JOSEError{constructor(){super(...arguments),this.code="ERR_JOSE_ALG_NOT_ALLOWED"}static get code(){return"ERR_JOSE_ALG_NOT_ALLOWED"}}class errors_JOSENotSupported extends errors_JOSEError{constructor(){super(...arguments),this.code="ERR_JOSE_NOT_SUPPORTED"}static get code(){return"ERR_JOSE_NOT_SUPPORTED"}}class errors_JWEDecryptionFailed extends errors_JOSEError{constructor(){super(...arguments),this.code="ERR_JWE_DECRYPTION_FAILED",this.message="decryption operation failed"}static get code(){return"ERR_JWE_DECRYPTION_FAILED"}}class errors_JWEInvalid extends errors_JOSEError{constructor(){super(...arguments),this.code="ERR_JWE_INVALID"}static get code(){return"ERR_JWE_INVALID"}}class errors_JWTInvalid extends errors_JOSEError{constructor(){super(...arguments),this.code="ERR_JWT_INVALID"}static get code(){return"ERR_JWT_INVALID"}}Symbol.asyncIterator;const runtime_random=webcrypto.getRandomValues.bind(webcrypto);function bitLength(alg){switch(alg){case"A128GCM":case"A128GCMKW":case"A192GCM":case"A192GCMKW":case"A256GCM":case"A256GCMKW":return 96;case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return 128;default:throw new errors_JOSENotSupported(`Unsupported JWE Algorithm: ${alg}`)}}const lib_iv=alg=>runtime_random(new Uint8Array(bitLength(alg)>>3)),check_iv_length=(enc,iv)=>{if(iv.length<<3!==bitLength(enc))throw new errors_JWEInvalid("Invalid Initialization Vector length")},check_cek_length=(cek,expected)=>{const actual=cek.byteLength<<3;if(actual!==expected)throw new errors_JWEInvalid(`Invalid Content Encryption Key length. Expected ${expected} bits, got ${actual} bits`)},timing_safe_equal=(a,b)=>{if(!(a instanceof Uint8Array))throw new TypeError("First argument must be a buffer");if(!(b instanceof Uint8Array))throw new TypeError("Second argument must be a buffer");if(a.length!==b.length)throw new TypeError("Input buffers must have the same length");const len=a.length;let out=0,i=-1;for(;++i<len;)out|=a[i]^b[i];return 0===out};function unusable(name,prop="algorithm.name"){return new TypeError(`CryptoKey does not support this operation, its ${prop} must be ${name}`)}function isAlgorithm(algorithm,name){return algorithm.name===name}function getHashLength(hash){return parseInt(hash.name.slice(4),10)}function checkUsage(key,usages){if(usages.length&&!usages.some((expected=>key.usages.includes(expected)))){let msg="CryptoKey does not support this operation, its usages must include ";if(usages.length>2){const last=usages.pop();msg+=`one of ${usages.join(", ")}, or ${last}.`}else 2===usages.length?msg+=`one of ${usages[0]} or ${usages[1]}.`:msg+=`${usages[0]}.`;throw new TypeError(msg)}}function checkEncCryptoKey(key,alg,...usages){switch(alg){case"A128GCM":case"A192GCM":case"A256GCM":{if(!isAlgorithm(key.algorithm,"AES-GCM"))throw unusable("AES-GCM");const expected=parseInt(alg.slice(1,4),10);if(key.algorithm.length!==expected)throw unusable(expected,"algorithm.length");break}case"A128KW":case"A192KW":case"A256KW":{if(!isAlgorithm(key.algorithm,"AES-KW"))throw unusable("AES-KW");const expected=parseInt(alg.slice(1,4),10);if(key.algorithm.length!==expected)throw unusable(expected,"algorithm.length");break}case"ECDH":switch(key.algorithm.name){case"ECDH":case"X25519":case"X448":break;default:throw unusable("ECDH, X25519, or X448")}break;case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":if(!isAlgorithm(key.algorithm,"PBKDF2"))throw unusable("PBKDF2");break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":{if(!isAlgorithm(key.algorithm,"RSA-OAEP"))throw unusable("RSA-OAEP");const expected=parseInt(alg.slice(9),10)||1;if(getHashLength(key.algorithm.hash)!==expected)throw unusable(`SHA-${expected}`,"algorithm.hash");break}default:throw new TypeError("CryptoKey does not support this operation")}checkUsage(key,usages)}function message(msg,actual,...types){if(types.length>2){const last=types.pop();msg+=`one of type ${types.join(", ")}, or ${last}.`}else 2===types.length?msg+=`one of type ${types[0]} or ${types[1]}.`:msg+=`of type ${types[0]}.`;return null==actual?msg+=` Received ${actual}`:"function"==typeof actual&&actual.name?msg+=` Received function ${actual.name}`:"object"==typeof actual&&null!=actual&&actual.constructor&&actual.constructor.name&&(msg+=` Received an instance of ${actual.constructor.name}`),msg}const invalid_key_input=(actual,...types)=>message("Key must be ",actual,...types);function withAlg(alg,actual,...types){return message(`Key for the ${alg} algorithm must be `,actual,...types)}const is_key_like=key=>webcrypto_isCryptoKey(key),is_key_like_types=["CryptoKey"];const runtime_decrypt=async(enc,cek,ciphertext,iv,tag,aad)=>{if(!(webcrypto_isCryptoKey(cek)||cek instanceof Uint8Array))throw new TypeError(invalid_key_input(cek,...is_key_like_types,"Uint8Array"));switch(check_iv_length(enc,iv),enc){case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return cek instanceof Uint8Array&&check_cek_length(cek,parseInt(enc.slice(-3),10)),async function cbcDecrypt(enc,cek,ciphertext,iv,tag,aad){if(!(cek instanceof Uint8Array))throw new TypeError(invalid_key_input(cek,"Uint8Array"));const keySize=parseInt(enc.slice(1,4),10),encKey=await webcrypto.subtle.importKey("raw",cek.subarray(keySize>>3),"AES-CBC",!1,["decrypt"]),macKey=await webcrypto.subtle.importKey("raw",cek.subarray(0,keySize>>3),{hash:"SHA-"+(keySize<<1),name:"HMAC"},!1,["sign"]),macData=buffer_utils_concat(aad,iv,ciphertext,uint64be(aad.length<<3)),expectedTag=new Uint8Array((await webcrypto.subtle.sign("HMAC",macKey,macData)).slice(0,keySize>>3));let macCheckPassed,plaintext;try{macCheckPassed=timing_safe_equal(tag,expectedTag)}catch(_a){}if(!macCheckPassed)throw new errors_JWEDecryptionFailed;try{plaintext=new Uint8Array(await webcrypto.subtle.decrypt({iv,name:"AES-CBC"},encKey,ciphertext))}catch(_b){}if(!plaintext)throw new errors_JWEDecryptionFailed;return plaintext}(enc,cek,ciphertext,iv,tag,aad);case"A128GCM":case"A192GCM":case"A256GCM":return cek instanceof Uint8Array&&check_cek_length(cek,parseInt(enc.slice(1,4),10)),async function gcmDecrypt(enc,cek,ciphertext,iv,tag,aad){let encKey;cek instanceof Uint8Array?encKey=await webcrypto.subtle.importKey("raw",cek,"AES-GCM",!1,["decrypt"]):(checkEncCryptoKey(cek,enc,"decrypt"),encKey=cek);try{return new Uint8Array(await webcrypto.subtle.decrypt({additionalData:aad,iv,name:"AES-GCM",tagLength:128},encKey,buffer_utils_concat(ciphertext,tag)))}catch(_a){throw new errors_JWEDecryptionFailed}}(enc,cek,ciphertext,iv,tag,aad);default:throw new errors_JOSENotSupported("Unsupported JWE Content Encryption Algorithm")}},inflate=async()=>{throw new errors_JOSENotSupported('JWE "zip" (Compression Algorithm) Header Parameter is not supported by your javascript runtime. You need to use the `inflateRaw` decrypt option to provide Inflate Raw implementation.')},deflate=async()=>{throw new errors_JOSENotSupported('JWE "zip" (Compression Algorithm) Header Parameter is not supported by your javascript runtime. You need to use the `deflateRaw` encrypt option to provide Deflate Raw implementation.')},is_disjoint=(...headers)=>{const sources=headers.filter(Boolean);if(0===sources.length||1===sources.length)return!0;let acc;for(const header of sources){const parameters=Object.keys(header);if(acc&&0!==acc.size)for(const parameter of parameters){if(acc.has(parameter))return!1;acc.add(parameter)}else acc=new Set(parameters)}return!0};function is_object_isObject(input){if(!function isObjectLike(value){return"object"==typeof value&&null!==value}(input)||"[object Object]"!==Object.prototype.toString.call(input))return!1;if(null===Object.getPrototypeOf(input))return!0;let proto=input;for(;null!==Object.getPrototypeOf(proto);)proto=Object.getPrototypeOf(proto);return Object.getPrototypeOf(input)===proto}const bogus=[{hash:"SHA-256",name:"HMAC"},!0,["sign"]];function checkKeySize(key,alg){if(key.algorithm.length!==parseInt(alg.slice(1,4),10))throw new TypeError(`Invalid key size for alg: ${alg}`)}function getCryptoKey(key,alg,usage){if(webcrypto_isCryptoKey(key))return checkEncCryptoKey(key,alg,usage),key;if(key instanceof Uint8Array)return webcrypto.subtle.importKey("raw",key,"AES-KW",!0,[usage]);throw new TypeError(invalid_key_input(key,...is_key_like_types,"Uint8Array"))}const wrap=async(alg,key,cek)=>{const cryptoKey=await getCryptoKey(key,alg,"wrapKey");checkKeySize(cryptoKey,alg);const cryptoKeyCek=await webcrypto.subtle.importKey("raw",cek,...bogus);return new Uint8Array(await webcrypto.subtle.wrapKey("raw",cryptoKeyCek,cryptoKey,"AES-KW"))},unwrap=async(alg,key,encryptedKey)=>{const cryptoKey=await getCryptoKey(key,alg,"unwrapKey");checkKeySize(cryptoKey,alg);const cryptoKeyCek=await webcrypto.subtle.unwrapKey("raw",encryptedKey,cryptoKey,"AES-KW",...bogus);return new Uint8Array(await webcrypto.subtle.exportKey("raw",cryptoKeyCek))};async function deriveKey(publicKey,privateKey,algorithm,keyLength,apu=new Uint8Array(0),apv=new Uint8Array(0)){if(!webcrypto_isCryptoKey(publicKey))throw new TypeError(invalid_key_input(publicKey,...is_key_like_types));if(checkEncCryptoKey(publicKey,"ECDH"),!webcrypto_isCryptoKey(privateKey))throw new TypeError(invalid_key_input(privateKey,...is_key_like_types));checkEncCryptoKey(privateKey,"ECDH","deriveBits");const value=buffer_utils_concat(lengthAndInput(buffer_utils_encoder.encode(algorithm)),lengthAndInput(apu),lengthAndInput(apv),uint32be(keyLength));let length;length="X25519"===publicKey.algorithm.name?256:"X448"===publicKey.algorithm.name?448:Math.ceil(parseInt(publicKey.algorithm.namedCurve.substr(-3),10)/8)<<3;return async function concatKdf(secret,bits,value){const iterations=Math.ceil((bits>>3)/32),res=new Uint8Array(32*iterations);for(let iter=0;iter<iterations;iter++){const buf=new Uint8Array(4+secret.length+value.length);buf.set(uint32be(iter+1)),buf.set(secret,4),buf.set(value,4+secret.length),res.set(await runtime_digest("sha256",buf),32*iter)}return res.slice(0,bits>>3)}(new Uint8Array(await webcrypto.subtle.deriveBits({name:publicKey.algorithm.name,public:publicKey},privateKey,length)),keyLength,value)}function ecdhAllowed(key){if(!webcrypto_isCryptoKey(key))throw new TypeError(invalid_key_input(key,...is_key_like_types));return["P-256","P-384","P-521"].includes(key.algorithm.namedCurve)||"X25519"===key.algorithm.name||"X448"===key.algorithm.name}async function pbes2kw_deriveKey(p2s,alg,p2c,key){!function checkP2s(p2s){if(!(p2s instanceof Uint8Array)||p2s.length<8)throw new errors_JWEInvalid("PBES2 Salt Input must be 8 or more octets")}(p2s);const salt=function buffer_utils_p2s(alg,p2sInput){return buffer_utils_concat(buffer_utils_encoder.encode(alg),new Uint8Array([0]),p2sInput)}(alg,p2s),keylen=parseInt(alg.slice(13,16),10),subtleAlg={hash:`SHA-${alg.slice(8,11)}`,iterations:p2c,name:"PBKDF2",salt},wrapAlg={length:keylen,name:"AES-KW"},cryptoKey=await function pbes2kw_getCryptoKey(key,alg){if(key instanceof Uint8Array)return webcrypto.subtle.importKey("raw",key,"PBKDF2",!1,["deriveBits"]);if(webcrypto_isCryptoKey(key))return checkEncCryptoKey(key,alg,"deriveBits","deriveKey"),key;throw new TypeError(invalid_key_input(key,...is_key_like_types,"Uint8Array"))}(key,alg);if(cryptoKey.usages.includes("deriveBits"))return new Uint8Array(await webcrypto.subtle.deriveBits(subtleAlg,cryptoKey,keylen));if(cryptoKey.usages.includes("deriveKey"))return webcrypto.subtle.deriveKey(subtleAlg,cryptoKey,wrapAlg,!1,["wrapKey","unwrapKey"]);throw new TypeError('PBKDF2 key "usages" must include "deriveBits" or "deriveKey"')}function subtleRsaEs(alg){switch(alg){case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":return"RSA-OAEP";default:throw new errors_JOSENotSupported(`alg ${alg} is not supported either by JOSE or your javascript runtime`)}}const check_key_length=(alg,key)=>{if(alg.startsWith("RS")||alg.startsWith("PS")){const{modulusLength}=key.algorithm;if("number"!=typeof modulusLength||modulusLength<2048)throw new TypeError(`${alg} requires key modulusLength to be 2048 bits or larger`)}};function cek_bitLength(alg){switch(alg){case"A128GCM":return 128;case"A192GCM":return 192;case"A256GCM":case"A128CBC-HS256":return 256;case"A192CBC-HS384":return 384;case"A256CBC-HS512":return 512;default:throw new errors_JOSENotSupported(`Unsupported JWE Algorithm: ${alg}`)}}const lib_cek=alg=>runtime_random(new Uint8Array(cek_bitLength(alg)>>3));const jwk_to_key=async jwk=>{var _a,_b;if(!jwk.alg)throw new TypeError('"alg" argument is required when "jwk.alg" is not present');const{algorithm,keyUsages}=function subtleMapping(jwk){let algorithm,keyUsages;switch(jwk.kty){case"oct":switch(jwk.alg){case"HS256":case"HS384":case"HS512":algorithm={name:"HMAC",hash:`SHA-${jwk.alg.slice(-3)}`},keyUsages=["sign","verify"];break;case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":throw new errors_JOSENotSupported(`${jwk.alg} keys cannot be imported as CryptoKey instances`);case"A128GCM":case"A192GCM":case"A256GCM":case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":algorithm={name:"AES-GCM"},keyUsages=["encrypt","decrypt"];break;case"A128KW":case"A192KW":case"A256KW":algorithm={name:"AES-KW"},keyUsages=["wrapKey","unwrapKey"];break;case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":algorithm={name:"PBKDF2"},keyUsages=["deriveBits"];break;default:throw new errors_JOSENotSupported('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;case"RSA":switch(jwk.alg){case"PS256":case"PS384":case"PS512":algorithm={name:"RSA-PSS",hash:`SHA-${jwk.alg.slice(-3)}`},keyUsages=jwk.d?["sign"]:["verify"];break;case"RS256":case"RS384":case"RS512":algorithm={name:"RSASSA-PKCS1-v1_5",hash:`SHA-${jwk.alg.slice(-3)}`},keyUsages=jwk.d?["sign"]:["verify"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":algorithm={name:"RSA-OAEP",hash:`SHA-${parseInt(jwk.alg.slice(-3),10)||1}`},keyUsages=jwk.d?["decrypt","unwrapKey"]:["encrypt","wrapKey"];break;default:throw new errors_JOSENotSupported('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;case"EC":switch(jwk.alg){case"ES256":algorithm={name:"ECDSA",namedCurve:"P-256"},keyUsages=jwk.d?["sign"]:["verify"];break;case"ES384":algorithm={name:"ECDSA",namedCurve:"P-384"},keyUsages=jwk.d?["sign"]:["verify"];break;case"ES512":algorithm={name:"ECDSA",namedCurve:"P-521"},keyUsages=jwk.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":algorithm={name:"ECDH",namedCurve:jwk.crv},keyUsages=jwk.d?["deriveBits"]:[];break;default:throw new errors_JOSENotSupported('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;case"OKP":switch(jwk.alg){case"EdDSA":algorithm={name:jwk.crv},keyUsages=jwk.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":algorithm={name:jwk.crv},keyUsages=jwk.d?["deriveBits"]:[];break;default:throw new errors_JOSENotSupported('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;default:throw new errors_JOSENotSupported('Invalid or unsupported JWK "kty" (Key Type) Parameter value')}return{algorithm,keyUsages}}(jwk),rest=[algorithm,null!==(_a=jwk.ext)&&void 0!==_a&&_a,null!==(_b=jwk.key_ops)&&void 0!==_b?_b:keyUsages];if("PBKDF2"===algorithm.name)return webcrypto.subtle.importKey("raw",decode(jwk.k),...rest);const keyData={...jwk};return delete keyData.alg,delete keyData.use,webcrypto.subtle.importKey("jwk",keyData,...rest)};const check_key_type=(alg,key,usage)=>{alg.startsWith("HS")||"dir"===alg||alg.startsWith("PBES2")||/^A\d{3}(?:GCM)?KW$/.test(alg)?((alg,key)=>{if(!(key instanceof Uint8Array)){if(!is_key_like(key))throw new TypeError(withAlg(alg,key,...is_key_like_types,"Uint8Array"));if("secret"!==key.type)throw new TypeError(`${is_key_like_types.join(" or ")} instances for symmetric algorithms must be of type "secret"`)}})(alg,key):((alg,key,usage)=>{if(!is_key_like(key))throw new TypeError(withAlg(alg,key,...is_key_like_types));if("secret"===key.type)throw new TypeError(`${is_key_like_types.join(" or ")} instances for asymmetric algorithms must not be of type "secret"`);if("sign"===usage&&"public"===key.type)throw new TypeError(`${is_key_like_types.join(" or ")} instances for asymmetric algorithm signing must be of type "private"`);if("decrypt"===usage&&"public"===key.type)throw new TypeError(`${is_key_like_types.join(" or ")} instances for asymmetric algorithm decryption must be of type "private"`);if(key.algorithm&&"verify"===usage&&"private"===key.type)throw new TypeError(`${is_key_like_types.join(" or ")} instances for asymmetric algorithm verifying must be of type "public"`);if(key.algorithm&&"encrypt"===usage&&"private"===key.type)throw new TypeError(`${is_key_like_types.join(" or ")} instances for asymmetric algorithm encryption must be of type "public"`)})(alg,key,usage)};const runtime_encrypt=async(enc,plaintext,cek,iv,aad)=>{if(!(webcrypto_isCryptoKey(cek)||cek instanceof Uint8Array))throw new TypeError(invalid_key_input(cek,...is_key_like_types,"Uint8Array"));switch(check_iv_length(enc,iv),enc){case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return cek instanceof Uint8Array&&check_cek_length(cek,parseInt(enc.slice(-3),10)),async function cbcEncrypt(enc,plaintext,cek,iv,aad){if(!(cek instanceof Uint8Array))throw new TypeError(invalid_key_input(cek,"Uint8Array"));const keySize=parseInt(enc.slice(1,4),10),encKey=await webcrypto.subtle.importKey("raw",cek.subarray(keySize>>3),"AES-CBC",!1,["encrypt"]),macKey=await webcrypto.subtle.importKey("raw",cek.subarray(0,keySize>>3),{hash:"SHA-"+(keySize<<1),name:"HMAC"},!1,["sign"]),ciphertext=new Uint8Array(await webcrypto.subtle.encrypt({iv,name:"AES-CBC"},encKey,plaintext)),macData=buffer_utils_concat(aad,iv,ciphertext,uint64be(aad.length<<3));return{ciphertext,tag:new Uint8Array((await webcrypto.subtle.sign("HMAC",macKey,macData)).slice(0,keySize>>3))}}(enc,plaintext,cek,iv,aad);case"A128GCM":case"A192GCM":case"A256GCM":return cek instanceof Uint8Array&&check_cek_length(cek,parseInt(enc.slice(1,4),10)),async function gcmEncrypt(enc,plaintext,cek,iv,aad){let encKey;cek instanceof Uint8Array?encKey=await webcrypto.subtle.importKey("raw",cek,"AES-GCM",!1,["encrypt"]):(checkEncCryptoKey(cek,enc,"encrypt"),encKey=cek);const encrypted=new Uint8Array(await webcrypto.subtle.encrypt({additionalData:aad,iv,name:"AES-GCM",tagLength:128},encKey,plaintext)),tag=encrypted.slice(-16);return{ciphertext:encrypted.slice(0,-16),tag}}(enc,plaintext,cek,iv,aad);default:throw new errors_JOSENotSupported("Unsupported JWE Content Encryption Algorithm")}};const decrypt_key_management=async function decryptKeyManagement(alg,key,encryptedKey,joseHeader,options){switch(check_key_type(alg,key,"decrypt"),alg){case"dir":if(void 0!==encryptedKey)throw new errors_JWEInvalid("Encountered unexpected JWE Encrypted Key");return key;case"ECDH-ES":if(void 0!==encryptedKey)throw new errors_JWEInvalid("Encountered unexpected JWE Encrypted Key");case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{if(!is_object_isObject(joseHeader.epk))throw new errors_JWEInvalid('JOSE Header "epk" (Ephemeral Public Key) missing or invalid');if(!ecdhAllowed(key))throw new errors_JOSENotSupported("ECDH with the provided key is not allowed or not supported by your javascript runtime");const epk=await async function import_importJWK(jwk,alg,octAsKeyObject){var _a;if(!is_object_isObject(jwk))throw new TypeError("JWK must be an object");switch(alg||(alg=jwk.alg),jwk.kty){case"oct":if("string"!=typeof jwk.k||!jwk.k)throw new TypeError('missing "k" (Key Value) Parameter value');return null!=octAsKeyObject||(octAsKeyObject=!0!==jwk.ext),octAsKeyObject?jwk_to_key({...jwk,alg,ext:null!==(_a=jwk.ext)&&void 0!==_a&&_a}):decode(jwk.k);case"RSA":if(void 0!==jwk.oth)throw new errors_JOSENotSupported('RSA JWK "oth" (Other Primes Info) Parameter value is not supported');case"EC":case"OKP":return jwk_to_key({...jwk,alg});default:throw new errors_JOSENotSupported('Unsupported "kty" (Key Type) Parameter value')}}(joseHeader.epk,alg);let partyUInfo,partyVInfo;if(void 0!==joseHeader.apu){if("string"!=typeof joseHeader.apu)throw new errors_JWEInvalid('JOSE Header "apu" (Agreement PartyUInfo) invalid');try{partyUInfo=decode(joseHeader.apu)}catch(_a){throw new errors_JWEInvalid("Failed to base64url decode the apu")}}if(void 0!==joseHeader.apv){if("string"!=typeof joseHeader.apv)throw new errors_JWEInvalid('JOSE Header "apv" (Agreement PartyVInfo) invalid');try{partyVInfo=decode(joseHeader.apv)}catch(_b){throw new errors_JWEInvalid("Failed to base64url decode the apv")}}const sharedSecret=await deriveKey(epk,key,"ECDH-ES"===alg?joseHeader.enc:alg,"ECDH-ES"===alg?cek_bitLength(joseHeader.enc):parseInt(alg.slice(-5,-2),10),partyUInfo,partyVInfo);if("ECDH-ES"===alg)return sharedSecret;if(void 0===encryptedKey)throw new errors_JWEInvalid("JWE Encrypted Key missing");return unwrap(alg.slice(-6),sharedSecret,encryptedKey)}case"RSA1_5":case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":if(void 0===encryptedKey)throw new errors_JWEInvalid("JWE Encrypted Key missing");return(async(alg,key,encryptedKey)=>{if(!webcrypto_isCryptoKey(key))throw new TypeError(invalid_key_input(key,...is_key_like_types));if(checkEncCryptoKey(key,alg,"decrypt","unwrapKey"),check_key_length(alg,key),key.usages.includes("decrypt"))return new Uint8Array(await webcrypto.subtle.decrypt(subtleRsaEs(alg),key,encryptedKey));if(key.usages.includes("unwrapKey")){const cryptoKeyCek=await webcrypto.subtle.unwrapKey("raw",encryptedKey,key,subtleRsaEs(alg),...bogus);return new Uint8Array(await webcrypto.subtle.exportKey("raw",cryptoKeyCek))}throw new TypeError('RSA-OAEP key "usages" must include "decrypt" or "unwrapKey" for this operation')})(alg,key,encryptedKey);case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":{if(void 0===encryptedKey)throw new errors_JWEInvalid("JWE Encrypted Key missing");if("number"!=typeof joseHeader.p2c)throw new errors_JWEInvalid('JOSE Header "p2c" (PBES2 Count) missing or invalid');const p2cLimit=(null==options?void 0:options.maxPBES2Count)||1e4;if(joseHeader.p2c>p2cLimit)throw new errors_JWEInvalid('JOSE Header "p2c" (PBES2 Count) out is of acceptable bounds');if("string"!=typeof joseHeader.p2s)throw new errors_JWEInvalid('JOSE Header "p2s" (PBES2 Salt) missing or invalid');let p2s;try{p2s=decode(joseHeader.p2s)}catch(_c){throw new errors_JWEInvalid("Failed to base64url decode the p2s")}return(async(alg,key,encryptedKey,p2c,p2s)=>{const derived=await pbes2kw_deriveKey(p2s,alg,p2c,key);return unwrap(alg.slice(-6),derived,encryptedKey)})(alg,key,encryptedKey,joseHeader.p2c,p2s)}case"A128KW":case"A192KW":case"A256KW":if(void 0===encryptedKey)throw new errors_JWEInvalid("JWE Encrypted Key missing");return unwrap(alg,key,encryptedKey);case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":{if(void 0===encryptedKey)throw new errors_JWEInvalid("JWE Encrypted Key missing");if("string"!=typeof joseHeader.iv)throw new errors_JWEInvalid('JOSE Header "iv" (Initialization Vector) missing or invalid');if("string"!=typeof joseHeader.tag)throw new errors_JWEInvalid('JOSE Header "tag" (Authentication Tag) missing or invalid');let iv,tag;try{iv=decode(joseHeader.iv)}catch(_d){throw new errors_JWEInvalid("Failed to base64url decode the iv")}try{tag=decode(joseHeader.tag)}catch(_e){throw new errors_JWEInvalid("Failed to base64url decode the tag")}return async function aesgcmkw_unwrap(alg,key,encryptedKey,iv,tag){const jweAlgorithm=alg.slice(0,7);return runtime_decrypt(jweAlgorithm,key,encryptedKey,iv,tag,new Uint8Array(0))}(alg,key,encryptedKey,iv,tag)}default:throw new errors_JOSENotSupported('Invalid or unsupported "alg" (JWE Algorithm) header value')}};const validate_crit=function validate_crit_validateCrit(Err,recognizedDefault,recognizedOption,protectedHeader,joseHeader){if(void 0!==joseHeader.crit&&void 0===protectedHeader.crit)throw new Err('"crit" (Critical) Header Parameter MUST be integrity protected');if(!protectedHeader||void 0===protectedHeader.crit)return new Set;if(!Array.isArray(protectedHeader.crit)||0===protectedHeader.crit.length||protectedHeader.crit.some((input=>"string"!=typeof input||0===input.length)))throw new Err('"crit" (Critical) Header Parameter MUST be an array of non-empty strings when present');let recognized;recognized=void 0!==recognizedOption?new Map([...Object.entries(recognizedOption),...recognizedDefault.entries()]):recognizedDefault;for(const parameter of protectedHeader.crit){if(!recognized.has(parameter))throw new errors_JOSENotSupported(`Extension Header Parameter "${parameter}" is not recognized`);if(void 0===joseHeader[parameter])throw new Err(`Extension Header Parameter "${parameter}" is missing`);if(recognized.get(parameter)&&void 0===protectedHeader[parameter])throw new Err(`Extension Header Parameter "${parameter}" MUST be integrity protected`)}return new Set(protectedHeader.crit)},validate_algorithms=(option,algorithms)=>{if(void 0!==algorithms&&(!Array.isArray(algorithms)||algorithms.some((s=>"string"!=typeof s))))throw new TypeError(`"${option}" option must be an array of strings`);if(algorithms)return new Set(algorithms)};async function compactDecrypt(jwe,key,options){if(jwe instanceof Uint8Array&&(jwe=buffer_utils_decoder.decode(jwe)),"string"!=typeof jwe)throw new errors_JWEInvalid("Compact JWE must be a string or Uint8Array");const{0:protectedHeader,1:encryptedKey,2:iv,3:ciphertext,4:tag,length}=jwe.split(".");if(5!==length)throw new errors_JWEInvalid("Invalid Compact JWE");const decrypted=await async function decrypt_flattenedDecrypt(jwe,key,options){var _a;if(!is_object_isObject(jwe))throw new errors_JWEInvalid("Flattened JWE must be an object");if(void 0===jwe.protected&&void 0===jwe.header&&void 0===jwe.unprotected)throw new errors_JWEInvalid("JOSE Header missing");if("string"!=typeof jwe.iv)throw new errors_JWEInvalid("JWE Initialization Vector missing or incorrect type");if("string"!=typeof jwe.ciphertext)throw new errors_JWEInvalid("JWE Ciphertext missing or incorrect type");if("string"!=typeof jwe.tag)throw new errors_JWEInvalid("JWE Authentication Tag missing or incorrect type");if(void 0!==jwe.protected&&"string"!=typeof jwe.protected)throw new errors_JWEInvalid("JWE Protected Header incorrect type");if(void 0!==jwe.encrypted_key&&"string"!=typeof jwe.encrypted_key)throw new errors_JWEInvalid("JWE Encrypted Key incorrect type");if(void 0!==jwe.aad&&"string"!=typeof jwe.aad)throw new errors_JWEInvalid("JWE AAD incorrect type");if(void 0!==jwe.header&&!is_object_isObject(jwe.header))throw new errors_JWEInvalid("JWE Shared Unprotected Header incorrect type");if(void 0!==jwe.unprotected&&!is_object_isObject(jwe.unprotected))throw new errors_JWEInvalid("JWE Per-Recipient Unprotected Header incorrect type");let parsedProt;if(jwe.protected)try{const protectedHeader=decode(jwe.protected);parsedProt=JSON.parse(buffer_utils_decoder.decode(protectedHeader))}catch(_b){throw new errors_JWEInvalid("JWE Protected Header is invalid")}if(!is_disjoint(parsedProt,jwe.header,jwe.unprotected))throw new errors_JWEInvalid("JWE Protected, JWE Unprotected Header, and JWE Per-Recipient Unprotected Header Parameter names must be disjoint");const joseHeader={...parsedProt,...jwe.header,...jwe.unprotected};if(validate_crit(errors_JWEInvalid,new Map,null==options?void 0:options.crit,parsedProt,joseHeader),void 0!==joseHeader.zip){if(!parsedProt||!parsedProt.zip)throw new errors_JWEInvalid('JWE "zip" (Compression Algorithm) Header MUST be integrity protected');if("DEF"!==joseHeader.zip)throw new errors_JOSENotSupported('Unsupported JWE "zip" (Compression Algorithm) Header Parameter value')}const{alg,enc}=joseHeader;if("string"!=typeof alg||!alg)throw new errors_JWEInvalid("missing JWE Algorithm (alg) in JWE Header");if("string"!=typeof enc||!enc)throw new errors_JWEInvalid("missing JWE Encryption Algorithm (enc) in JWE Header");const keyManagementAlgorithms=options&&validate_algorithms("keyManagementAlgorithms",options.keyManagementAlgorithms),contentEncryptionAlgorithms=options&&validate_algorithms("contentEncryptionAlgorithms",options.contentEncryptionAlgorithms);if(keyManagementAlgorithms&&!keyManagementAlgorithms.has(alg))throw new errors_JOSEAlgNotAllowed('"alg" (Algorithm) Header Parameter not allowed');if(contentEncryptionAlgorithms&&!contentEncryptionAlgorithms.has(enc))throw new errors_JOSEAlgNotAllowed('"enc" (Encryption Algorithm) Header Parameter not allowed');let encryptedKey;if(void 0!==jwe.encrypted_key)try{encryptedKey=decode(jwe.encrypted_key)}catch(_c){throw new errors_JWEInvalid("Failed to base64url decode the encrypted_key")}let cek,iv,tag,resolvedKey=!1;"function"==typeof key&&(key=await key(parsedProt,jwe),resolvedKey=!0);try{cek=await decrypt_key_management(alg,key,encryptedKey,joseHeader,options)}catch(err){if(err instanceof TypeError||err instanceof errors_JWEInvalid||err instanceof errors_JOSENotSupported)throw err;cek=lib_cek(enc)}try{iv=decode(jwe.iv)}catch(_d){throw new errors_JWEInvalid("Failed to base64url decode the iv")}try{tag=decode(jwe.tag)}catch(_e){throw new errors_JWEInvalid("Failed to base64url decode the tag")}const protectedHeader=buffer_utils_encoder.encode(null!==(_a=jwe.protected)&&void 0!==_a?_a:"");let additionalData,ciphertext;additionalData=void 0!==jwe.aad?buffer_utils_concat(protectedHeader,buffer_utils_encoder.encode("."),buffer_utils_encoder.encode(jwe.aad)):protectedHeader;try{ciphertext=decode(jwe.ciphertext)}catch(_f){throw new errors_JWEInvalid("Failed to base64url decode the ciphertext")}let plaintext=await runtime_decrypt(enc,cek,ciphertext,iv,tag,additionalData);"DEF"===joseHeader.zip&&(plaintext=await((null==options?void 0:options.inflateRaw)||inflate)(plaintext));const result={plaintext};if(void 0!==jwe.protected&&(result.protectedHeader=parsedProt),void 0!==jwe.aad)try{result.additionalAuthenticatedData=decode(jwe.aad)}catch(_g){throw new errors_JWEInvalid("Failed to base64url decode the aad")}return void 0!==jwe.unprotected&&(result.sharedUnprotectedHeader=jwe.unprotected),void 0!==jwe.header&&(result.unprotectedHeader=jwe.header),resolvedKey?{...result,key}:result}({ciphertext,iv:iv||void 0,protected:protectedHeader||void 0,tag:tag||void 0,encrypted_key:encryptedKey||void 0},key,options),result={plaintext:decrypted.plaintext,protectedHeader:decrypted.protectedHeader};return"function"==typeof key?{...result,key:decrypted.key}:result}const key_to_jwk=async key=>{if(key instanceof Uint8Array)return{kty:"oct",k:encode(key)};if(!webcrypto_isCryptoKey(key))throw new TypeError(invalid_key_input(key,...is_key_like_types,"Uint8Array"));if(!key.extractable)throw new TypeError("non-extractable CryptoKey cannot be exported as a JWK");const{ext,key_ops,alg,use,...jwk}=await webcrypto.subtle.exportKey("jwk",key);return jwk};const encrypt_key_management=async function encrypt_key_management_encryptKeyManagement(alg,enc,key,providedCek,providedParameters={}){let encryptedKey,parameters,cek;switch(check_key_type(alg,key,"encrypt"),alg){case"dir":cek=key;break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{if(!ecdhAllowed(key))throw new errors_JOSENotSupported("ECDH with the provided key is not allowed or not supported by your javascript runtime");const{apu,apv}=providedParameters;let{epk:ephemeralKey}=providedParameters;ephemeralKey||(ephemeralKey=(await async function generateEpk(key){if(!webcrypto_isCryptoKey(key))throw new TypeError(invalid_key_input(key,...is_key_like_types));return webcrypto.subtle.generateKey(key.algorithm,!0,["deriveBits"])}(key)).privateKey);const{x,y,crv,kty}=await async function exportJWK(key){return key_to_jwk(key)}(ephemeralKey),sharedSecret=await deriveKey(key,ephemeralKey,"ECDH-ES"===alg?enc:alg,"ECDH-ES"===alg?cek_bitLength(enc):parseInt(alg.slice(-5,-2),10),apu,apv);if(parameters={epk:{x,crv,kty}},"EC"===kty&&(parameters.epk.y=y),apu&&(parameters.apu=encode(apu)),apv&&(parameters.apv=encode(apv)),"ECDH-ES"===alg){cek=sharedSecret;break}cek=providedCek||lib_cek(enc);const kwAlg=alg.slice(-6);encryptedKey=await wrap(kwAlg,sharedSecret,cek);break}case"RSA1_5":case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":cek=providedCek||lib_cek(enc),encryptedKey=await(async(alg,key,cek)=>{if(!webcrypto_isCryptoKey(key))throw new TypeError(invalid_key_input(key,...is_key_like_types));if(checkEncCryptoKey(key,alg,"encrypt","wrapKey"),check_key_length(alg,key),key.usages.includes("encrypt"))return new Uint8Array(await webcrypto.subtle.encrypt(subtleRsaEs(alg),key,cek));if(key.usages.includes("wrapKey")){const cryptoKeyCek=await webcrypto.subtle.importKey("raw",cek,...bogus);return new Uint8Array(await webcrypto.subtle.wrapKey("raw",cryptoKeyCek,key,subtleRsaEs(alg)))}throw new TypeError('RSA-OAEP key "usages" must include "encrypt" or "wrapKey" for this operation')})(alg,key,cek);break;case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":{cek=providedCek||lib_cek(enc);const{p2c,p2s}=providedParameters;({encryptedKey,...parameters}=await(async(alg,key,cek,p2c=2048,p2s=runtime_random(new Uint8Array(16)))=>{const derived=await pbes2kw_deriveKey(p2s,alg,p2c,key);return{encryptedKey:await wrap(alg.slice(-6),derived,cek),p2c,p2s:encode(p2s)}})(alg,key,cek,p2c,p2s));break}case"A128KW":case"A192KW":case"A256KW":cek=providedCek||lib_cek(enc),encryptedKey=await wrap(alg,key,cek);break;case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":{cek=providedCek||lib_cek(enc);const{iv}=providedParameters;({encryptedKey,...parameters}=await async function aesgcmkw_wrap(alg,key,cek,iv){const jweAlgorithm=alg.slice(0,7);iv||(iv=lib_iv(jweAlgorithm));const{ciphertext:encryptedKey,tag}=await runtime_encrypt(jweAlgorithm,cek,key,iv,new Uint8Array(0));return{encryptedKey,iv:encode(iv),tag:encode(tag)}}(alg,key,cek,iv));break}default:throw new errors_JOSENotSupported('Invalid or unsupported "alg" (JWE Algorithm) header value')}return{cek,encryptedKey,parameters}},encrypt_unprotected=Symbol();class encrypt_FlattenedEncrypt{constructor(plaintext){if(!(plaintext instanceof Uint8Array))throw new TypeError("plaintext must be an instance of Uint8Array");this._plaintext=plaintext}setKeyManagementParameters(parameters){if(this._keyManagementParameters)throw new TypeError("setKeyManagementParameters can only be called once");return this._keyManagementParameters=parameters,this}setProtectedHeader(protectedHeader){if(this._protectedHeader)throw new TypeError("setProtectedHeader can only be called once");return this._protectedHeader=protectedHeader,this}setSharedUnprotectedHeader(sharedUnprotectedHeader){if(this._sharedUnprotectedHeader)throw new TypeError("setSharedUnprotectedHeader can only be called once");return this._sharedUnprotectedHeader=sharedUnprotectedHeader,this}setUnprotectedHeader(unprotectedHeader){if(this._unprotectedHeader)throw new TypeError("setUnprotectedHeader can only be called once");return this._unprotectedHeader=unprotectedHeader,this}setAdditionalAuthenticatedData(aad){return this._aad=aad,this}setContentEncryptionKey(cek){if(this._cek)throw new TypeError("setContentEncryptionKey can only be called once");return this._cek=cek,this}setInitializationVector(iv){if(this._iv)throw new TypeError("setInitializationVector can only be called once");return this._iv=iv,this}async encrypt(key,options){if(!this._protectedHeader&&!this._unprotectedHeader&&!this._sharedUnprotectedHeader)throw new errors_JWEInvalid("either setProtectedHeader, setUnprotectedHeader, or sharedUnprotectedHeader must be called before #encrypt()");if(!is_disjoint(this._protectedHeader,this._unprotectedHeader,this._sharedUnprotectedHeader))throw new errors_JWEInvalid("JWE Protected, JWE Shared Unprotected and JWE Per-Recipient Header Parameter names must be disjoint");const joseHeader={...this._protectedHeader,...this._unprotectedHeader,...this._sharedUnprotectedHeader};if(validate_crit(errors_JWEInvalid,new Map,null==options?void 0:options.crit,this._protectedHeader,joseHeader),void 0!==joseHeader.zip){if(!this._protectedHeader||!this._protectedHeader.zip)throw new errors_JWEInvalid('JWE "zip" (Compression Algorithm) Header MUST be integrity protected');if("DEF"!==joseHeader.zip)throw new errors_JOSENotSupported('Unsupported JWE "zip" (Compression Algorithm) Header Parameter value')}const{alg,enc}=joseHeader;if("string"!=typeof alg||!alg)throw new errors_JWEInvalid('JWE "alg" (Algorithm) Header Parameter missing or invalid');if("string"!=typeof enc||!enc)throw new errors_JWEInvalid('JWE "enc" (Encryption Algorithm) Header Parameter missing or invalid');let encryptedKey,cek,additionalData,protectedHeader,aadMember,ciphertext,tag;if("dir"===alg){if(this._cek)throw new TypeError("setContentEncryptionKey cannot be called when using Direct Encryption")}else if("ECDH-ES"===alg&&this._cek)throw new TypeError("setContentEncryptionKey cannot be called when using Direct Key Agreement");{let parameters;({cek,encryptedKey,parameters}=await encrypt_key_management(alg,enc,key,this._cek,this._keyManagementParameters)),parameters&&(options&&encrypt_unprotected in options?this._unprotectedHeader?this._unprotectedHeader={...this._unprotectedHeader,...parameters}:this.setUnprotectedHeader(parameters):this._protectedHeader?this._protectedHeader={...this._protectedHeader,...parameters}:this.setProtectedHeader(parameters))}if(this._iv||(this._iv=lib_iv(enc)),protectedHeader=this._protectedHeader?buffer_utils_encoder.encode(encode(JSON.stringify(this._protectedHeader))):buffer_utils_encoder.encode(""),this._aad?(aadMember=encode(this._aad),additionalData=buffer_utils_concat(protectedHeader,buffer_utils_encoder.encode("."),buffer_utils_encoder.encode(aadMember))):additionalData=protectedHeader,"DEF"===joseHeader.zip){const deflated=await((null==options?void 0:options.deflateRaw)||deflate)(this._plaintext);({ciphertext,tag}=await runtime_encrypt(enc,deflated,cek,this._iv,additionalData))}else({ciphertext,tag}=await runtime_encrypt(enc,this._plaintext,cek,this._iv,additionalData));const jwe={ciphertext:encode(ciphertext),iv:encode(this._iv),tag:encode(tag)};return encryptedKey&&(jwe.encrypted_key=encode(encryptedKey)),aadMember&&(jwe.aad=aadMember),this._protectedHeader&&(jwe.protected=buffer_utils_decoder.decode(protectedHeader)),this._sharedUnprotectedHeader&&(jwe.unprotected=this._sharedUnprotectedHeader),this._unprotectedHeader&&(jwe.header=this._unprotectedHeader),jwe}}const epoch=date=>Math.floor(date.getTime()/1e3),REGEX=/^(\d+|\d+\.\d+) ?(seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)$/i,secs=str=>{const matched=REGEX.exec(str);if(!matched)throw new TypeError("Invalid time period format");const value=parseFloat(matched[1]);switch(matched[2].toLowerCase()){case"sec":case"secs":case"second":case"seconds":case"s":return Math.round(value);case"minute":case"minutes":case"min":case"mins":case"m":return Math.round(60*value);case"hour":case"hours":case"hr":case"hrs":case"h":return Math.round(3600*value);case"day":case"days":case"d":return Math.round(86400*value);case"week":case"weeks":case"w":return Math.round(604800*value);default:return Math.round(31557600*value)}},normalizeTyp=value=>value.toLowerCase().replace(/^application\//,""),jwt_claims_set=(protectedHeader,encodedPayload,options={})=>{const{typ}=options;if(typ&&("string"!=typeof protectedHeader.typ||normalizeTyp(protectedHeader.typ)!==normalizeTyp(typ)))throw new JWTClaimValidationFailed('unexpected "typ" JWT header value',"typ","check_failed");let payload;try{payload=JSON.parse(buffer_utils_decoder.decode(encodedPayload))}catch(_a){}if(!is_object_isObject(payload))throw new errors_JWTInvalid("JWT Claims Set must be a top-level JSON object");const{requiredClaims=[],issuer,subject,audience,maxTokenAge}=options;void 0!==maxTokenAge&&requiredClaims.push("iat"),void 0!==audience&&requiredClaims.push("aud"),void 0!==subject&&requiredClaims.push("sub"),void 0!==issuer&&requiredClaims.push("iss");for(const claim of new Set(requiredClaims.reverse()))if(!(claim in payload))throw new JWTClaimValidationFailed(`missing required "${claim}" claim`,claim,"missing");if(issuer&&!(Array.isArray(issuer)?issuer:[issuer]).includes(payload.iss))throw new JWTClaimValidationFailed('unexpected "iss" claim value',"iss","check_failed");if(subject&&payload.sub!==subject)throw new JWTClaimValidationFailed('unexpected "sub" claim value',"sub","check_failed");if(audience&&(audPayload=payload.aud,audOption="string"==typeof audience?[audience]:audience,!("string"==typeof audPayload?audOption.includes(audPayload):Array.isArray(audPayload)&&audOption.some(Set.prototype.has.bind(new Set(audPayload))))))throw new JWTClaimValidationFailed('unexpected "aud" claim value',"aud","check_failed");var audPayload,audOption;let tolerance;switch(typeof options.clockTolerance){case"string":tolerance=secs(options.clockTolerance);break;case"number":tolerance=options.clockTolerance;break;case"undefined":tolerance=0;break;default:throw new TypeError("Invalid clockTolerance option type")}const{currentDate}=options,now=epoch(currentDate||new Date);if((void 0!==payload.iat||maxTokenAge)&&"number"!=typeof payload.iat)throw new JWTClaimValidationFailed('"iat" claim must be a number',"iat","invalid");if(void 0!==payload.nbf){if("number"!=typeof payload.nbf)throw new JWTClaimValidationFailed('"nbf" claim must be a number',"nbf","invalid");if(payload.nbf>now+tolerance)throw new JWTClaimValidationFailed('"nbf" claim timestamp check failed',"nbf","check_failed")}if(void 0!==payload.exp){if("number"!=typeof payload.exp)throw new JWTClaimValidationFailed('"exp" claim must be a number',"exp","invalid");if(payload.exp<=now-tolerance)throw new JWTExpired('"exp" claim timestamp check failed',"exp","check_failed")}if(maxTokenAge){const age=now-payload.iat;if(age-tolerance>("number"==typeof maxTokenAge?maxTokenAge:secs(maxTokenAge)))throw new JWTExpired('"iat" claim timestamp check failed (too far in the past)',"iat","check_failed");if(age<0-tolerance)throw new JWTClaimValidationFailed('"iat" claim timestamp check failed (it should be in the past)',"iat","check_failed")}return payload};class CompactEncrypt{constructor(plaintext){this._flattened=new encrypt_FlattenedEncrypt(plaintext)}setContentEncryptionKey(cek){return this._flattened.setContentEncryptionKey(cek),this}setInitializationVector(iv){return this._flattened.setInitializationVector(iv),this}setProtectedHeader(protectedHeader){return this._flattened.setProtectedHeader(protectedHeader),this}setKeyManagementParameters(parameters){return this._flattened.setKeyManagementParameters(parameters),this}async encrypt(key,options){const jwe=await this._flattened.encrypt(key,options);return[jwe.protected,jwe.encrypted_key,jwe.iv,jwe.ciphertext,jwe.tag].join(".")}}class produce_ProduceJWT{constructor(payload){if(!is_object_isObject(payload))throw new TypeError("JWT Claims Set MUST be an object");this._payload=payload}setIssuer(issuer){return this._payload={...this._payload,iss:issuer},this}setSubject(subject){return this._payload={...this._payload,sub:subject},this}setAudience(audience){return this._payload={...this._payload,aud:audience},this}setJti(jwtId){return this._payload={...this._payload,jti:jwtId},this}setNotBefore(input){return this._payload="number"==typeof input?{...this._payload,nbf:input}:{...this._payload,nbf:epoch(new Date)+secs(input)},this}setExpirationTime(input){return this._payload="number"==typeof input?{...this._payload,exp:input}:{...this._payload,exp:epoch(new Date)+secs(input)},this}setIssuedAt(input){return this._payload=void 0===input?{...this._payload,iat:epoch(new Date)}:{...this._payload,iat:input},this}}class EncryptJWT extends produce_ProduceJWT{setProtectedHeader(protectedHeader){if(this._protectedHeader)throw new TypeError("setProtectedHeader can only be called once");return this._protectedHeader=protectedHeader,this}setKeyManagementParameters(parameters){if(this._keyManagementParameters)throw new TypeError("setKeyManagementParameters can only be called once");return this._keyManagementParameters=parameters,this}setContentEncryptionKey(cek){if(this._cek)throw new TypeError("setContentEncryptionKey can only be called once");return this._cek=cek,this}setInitializationVector(iv){if(this._iv)throw new TypeError("setInitializationVector can only be called once");return this._iv=iv,this}replicateIssuerAsHeader(){return this._replicateIssuerAsHeader=!0,this}replicateSubjectAsHeader(){return this._replicateSubjectAsHeader=!0,this}replicateAudienceAsHeader(){return this._replicateAudienceAsHeader=!0,this}async encrypt(key,options){const enc=new CompactEncrypt(buffer_utils_encoder.encode(JSON.stringify(this._payload)));return this._replicateIssuerAsHeader&&(this._protectedHeader={...this._protectedHeader,iss:this._payload.iss}),this._replicateSubjectAsHeader&&(this._protectedHeader={...this._protectedHeader,sub:this._payload.sub}),this._replicateAudienceAsHeader&&(this._protectedHeader={...this._protectedHeader,aud:this._payload.aud}),enc.setProtectedHeader(this._protectedHeader),this._iv&&enc.setInitializationVector(this._iv),this._cek&&enc.setContentEncryptionKey(this._cek),this._keyManagementParameters&&enc.setKeyManagementParameters(this._keyManagementParameters),enc.encrypt(key,options)}}const base64url_encode=encode,base64url_decode=decode;__webpack_require__("./node_modules/process/browser.js"),__webpack_require__("./node_modules/console-browserify/index.js");const DEFAULT_MAX_AGE=2592e3,now=()=>Date.now()/1e3|0;async function jwt_encode(params){const{token={},secret,maxAge=DEFAULT_MAX_AGE}=params,encryptionSecret=await getDerivedEncryptionKey(secret);return await new EncryptJWT(token).setProtectedHeader({alg:"dir",enc:"A256GCM"}).setIssuedAt().setExpirationTime(now()+maxAge).setJti(crypto.randomUUID()).encrypt(encryptionSecret)}async function jwt_decode(params){const{token,secret}=params;if(!token)return null;const encryptionSecret=await getDerivedEncryptionKey(secret),{payload}=await async function jwtDecrypt(jwt,key,options){const decrypted=await compactDecrypt(jwt,key,options),payload=jwt_claims_set(decrypted.protectedHeader,decrypted.plaintext,options),{protectedHeader}=decrypted;if(void 0!==protectedHeader.iss&&protectedHeader.iss!==payload.iss)throw new JWTClaimValidationFailed('replicated "iss" claim header parameter mismatch',"iss","mismatch");if(void 0!==protectedHeader.sub&&protectedHeader.sub!==payload.sub)throw new JWTClaimValidationFailed('replicated "sub" claim header parameter mismatch',"sub","mismatch");if(void 0!==protectedHeader.aud&&JSON.stringify(protectedHeader.aud)!==JSON.stringify(payload.aud))throw new JWTClaimValidationFailed('replicated "aud" claim header parameter mismatch',"aud","mismatch");const result={payload,protectedHeader};return"function"==typeof key?{...result,key:decrypted.key}:result}(token,encryptionSecret,{clockTolerance:15});return payload}async function getDerivedEncryptionKey(secret){return await web_hkdf("sha256",secret,"","Auth.js Generated Encryption Key",32)}var node_modules_cookie=__webpack_require__("./node_modules/cookie/index.js");async function getBody(req){if(!("body"in req)||!req.body||"POST"!==req.method)return;const contentType=req.headers.get("content-type");if(contentType?.includes("application/json"))return await req.json();if(contentType?.includes("application/x-www-form-urlencoded")){const params=new URLSearchParams(await req.text());return Object.fromEntries(params)}}const actions=["providers","session","csrf","signin","signout","callback","verify-request","error"];function toRequest(request){return new Request(request.url,{headers:request.headers,method:request.method,body:"POST"===request.method?JSON.stringify(request.body??{}):void 0})}function toResponse(res){const headers=new Headers(res.headers);res.cookies?.forEach((cookie=>{const{name,value,options}=cookie,cookieHeader=(0,node_modules_cookie.q)(name,value,options);headers.has("Set-Cookie")?headers.append("Set-Cookie",cookieHeader):headers.set("Set-Cookie",cookieHeader)}));let body=res.body;"application/json"===headers.get("content-type")?body=JSON.stringify(res.body):"application/x-www-form-urlencoded"===headers.get("content-type")&&(body=new URLSearchParams(res.body).toString());const status=res.redirect?302:res.status??200,response=new Response(body,{headers,status});return res.redirect&&response.headers.set("Location",res.redirect),response}async function createHash(message){const data=(new TextEncoder).encode(message),hash=await crypto.subtle.digest("SHA-256",data);return Array.from(new Uint8Array(hash)).map((b=>b.toString(16).padStart(2,"0"))).join("").toString()}function randomString(size){const bytes=crypto.getRandomValues(new Uint8Array(size));return Array.from(bytes).reduce(((a,i)=>a+(i=>("0"+i.toString(16)).slice(-2))(i)),"")}const defaultCallbacks={signIn:()=>!0,redirect:({url,baseUrl})=>url.startsWith("/")?`${baseUrl}${url}`:new URL(url).origin===baseUrl?url:baseUrl,session:({session})=>session,jwt:({token})=>token};function merge_isObject(item){return item&&"object"==typeof item&&!Array.isArray(item)}function merge(target,...sources){if(!sources.length)return target;const source=sources.shift();if(merge_isObject(target)&&merge_isObject(source))for(const key in source)merge_isObject(source[key])?(target[key]||Object.assign(target,{[key]:{}}),merge(target[key],source[key])):Object.assign(target,{[key]:source[key]});return merge(target,...sources)}function parseProviders(params){const{url,providerId,options}=params,providers=params.providers.map((p=>{const provider="function"==typeof p?p():p,{options:userOptions,...defaults}=provider,id=userOptions?.id??defaults.id,merged=merge(defaults,userOptions,{signinUrl:`${url}/signin/${id}`,callbackUrl:`${url}/callback/${id}`});return"oauth"===provider.type||"oidc"===provider.type?(merged.redirectProxyUrl??(merged.redirectProxyUrl=options.redirectProxyUrl),function normalizeOAuth(c){c.issuer&&(c.wellKnown??(c.wellKnown=`${c.issuer}/.well-known/openid-configuration`));const authorization=normalizeEndpoint(c.authorization,c.issuer);authorization&&!authorization.url?.searchParams.has("scope")&&authorization.url.searchParams.set("scope","openid profile email");const token=normalizeEndpoint(c.token,c.issuer),userinfo=normalizeEndpoint(c.userinfo,c.issuer),checks=c.checks??["pkce"];c.redirectProxyUrl&&(checks.includes("state")||checks.push("state"),c.redirectProxyUrl=`${c.redirectProxyUrl}/callback/${c.id}`);return{...c,authorization,token,checks,userinfo,profile:c.profile??defaultProfile,account:c.account??defaultAccount}}(merged)):merged}));return{providers,provider:providers.find((({id})=>id===providerId))}}const defaultProfile=profile=>{const id=profile.sub??profile.id;if(!id)throw new errors.X0("Missing user id");return stripUndefined({id:id.toString(),name:profile.name??profile.nickname??profile.preferred_username,email:profile.email,image:profile.picture})},defaultAccount=account=>stripUndefined({access_token:account.access_token,id_token:account.id_token,refresh_token:account.refresh_token,expires_at:account.expires_at,scope:account.scope,token_type:account.token_type,session_state:account.session_state});function stripUndefined(o){const result={};for(let[k,v]of Object.entries(o))void 0!==v&&(result[k]=v);return result}function normalizeEndpoint(e,issuer){if(!e&&issuer)return;if("string"==typeof e)return{url:new URL(e)};const url=new URL(e?.url??"https://authjs.dev");if(null!=e?.params)for(let[key,value]of Object.entries(e.params))"claims"===key&&(value=JSON.stringify(value)),url.searchParams.set(key,String(value));return{url,request:e?.request,conform:e?.conform}}var logger_console=__webpack_require__("./node_modules/console-browserify/index.js");const logger={error(error){const url=`https://errors.authjs.dev#${error.name.toLowerCase()}`;if(logger_console.error(`[31m[auth][error][${error.name}][0m:${error.message?` ${error.message}.`:""} Read more at ${url}`),error.cause){const{err,...data}=error.cause;logger_console.error("[31m[auth][cause][0m:",err.stack),logger_console.error("[31m[auth][details][0m:",JSON.stringify(data,null,2))}else error.stack&&logger_console.error(error.stack.replace(/.*/,"").substring(1))},warn(code){const url=`https://warnings.authjs.dev#${code}`;logger_console.warn(`[33m[auth][warn][${code}][0m`,`Read more: ${url}`)},debug(message,metadata){logger_console.log(`[90m[auth][debug]:[0m ${message}`,JSON.stringify(metadata,null,2))}};async function init({authOptions,providerId,action,url:reqUrl,cookies:reqCookies,callbackUrl:reqCallbackUrl,csrfToken:reqCsrfToken,csrfDisabled,isPost}){const parsed=function parseUrl(url){const defaultUrl=new URL("http://localhost:3000/api/auth");url&&!url.toString().startsWith("http")&&(url=`https://${url}`);const _url=new URL(url??defaultUrl),path=("/"===_url.pathname?defaultUrl.pathname:_url.pathname).replace(/\/$/,""),base=`${_url.origin}${path}`;return{origin:_url.origin,host:_url.host,path,base,toString:()=>base}}(reqUrl.origin+reqUrl.pathname.replace(`/${action}`,"").replace(`/${providerId}`,"")),url=new URL(parsed.toString()),{providers,provider}=parseProviders({providers:authOptions.providers,url,providerId,options:authOptions});let isOnRedirectProxy=!1;if(("oauth"===provider?.type||"oidc"===provider?.type)&&provider.redirectProxyUrl)try{isOnRedirectProxy=new URL(provider.redirectProxyUrl).origin===url.origin}catch{throw new TypeError(`redirectProxyUrl must be a valid URL. Received: ${provider.redirectProxyUrl}`)}const options={debug:!1,pages:{},theme:{colorScheme:"auto",logo:"",brandColor:"",buttonText:""},...authOptions,url,action,provider,cookies:{...defaultCookies(authOptions.useSecureCookies??"https:"===url.protocol),...authOptions.cookies},providers,session:{strategy:authOptions.adapter?"database":"jwt",maxAge:2592e3,updateAge:86400,generateSessionToken:()=>crypto.randomUUID(),...authOptions.session},jwt:{secret:authOptions.secret,maxAge:authOptions.session?.maxAge??2592e3,encode:jwt_encode,decode:jwt_decode,...authOptions.jwt},events:eventsErrorHandler(authOptions.events??{},logger),adapter:adapterErrorHandler(authOptions.adapter,logger),callbacks:{...defaultCallbacks,...authOptions.callbacks},logger,callbackUrl:url.origin,isOnRedirectProxy},cookies=[];if(!csrfDisabled){const{csrfToken,cookie:csrfCookie,csrfTokenVerified}=await async function createCSRFToken({options,cookieValue,isPost,bodyValue}){if(cookieValue){const[csrfToken,csrfTokenHash]=cookieValue.split("|");if(csrfTokenHash===await createHash(`${csrfToken}${options.secret}`))return{csrfTokenVerified:isPost&&csrfToken===bodyValue,csrfToken}}const csrfToken=randomString(32);return{cookie:`${csrfToken}|${await createHash(`${csrfToken}${options.secret}`)}`,csrfToken}}({options,cookieValue:reqCookies?.[options.cookies.csrfToken.name],isPost,bodyValue:reqCsrfToken});options.csrfToken=csrfToken,options.csrfTokenVerified=csrfTokenVerified,csrfCookie&&cookies.push({name:options.cookies.csrfToken.name,value:csrfCookie,options:options.cookies.csrfToken.options})}const{callbackUrl,callbackUrlCookie}=await async function createCallbackUrl({options,paramValue,cookieValue}){const{url,callbacks}=options;let callbackUrl=url.origin;return paramValue?callbackUrl=await callbacks.redirect({url:paramValue,baseUrl:url.origin}):cookieValue&&(callbackUrl=await callbacks.redirect({url:cookieValue,baseUrl:url.origin})),{callbackUrl,callbackUrlCookie:callbackUrl!==cookieValue?callbackUrl:void 0}}({options,cookieValue:reqCookies?.[options.cookies.callbackUrl.name],paramValue:reqCallbackUrl});return options.callbackUrl=callbackUrl,callbackUrlCookie&&cookies.push({name:options.cookies.callbackUrl.name,value:callbackUrlCookie,options:options.cookies.callbackUrl.options}),{options,cookies}}function eventsErrorHandler(methods,logger){return Object.keys(methods).reduce(((acc,name)=>(acc[name]=async(...args)=>{try{const method=methods[name];return await method(...args)}catch(e){logger.error(new errors.xQ(e))}},acc)),{})}function adapterErrorHandler(adapter,logger){if(adapter)return Object.keys(adapter).reduce(((acc,name)=>(acc[name]=async(...args)=>{try{logger.debug(`adapter_${name}`,{args});const method=adapter[name];return await method(...args)}catch(e){const error=new errors.dq(e);throw logger.error(error),error}},acc)),{})}var n,preact_module_l,u,t,o,f={},e=[],c=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function s(n,l){for(var u in l)n[u]=l[u];return n}function a(n){var l=n.parentNode;l&&l.removeChild(n)}function v(n,i,t,o,r){var f={type:n,props:i,key:t,ref:o,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:null==r?++u:r};return null==r&&null!=preact_module_l.vnode&&preact_module_l.vnode(f),f}function preact_module_p(n){return n.children}function d(n,l){this.props=n,this.context=l}function _(n,l){if(null==l)return n.__?_(n.__,n.__.__k.indexOf(n)+1):null;for(var u;l<n.__k.length;l++)if(null!=(u=n.__k[l])&&null!=u.__e)return u.__e;return"function"==typeof n.type?_(n):null}function k(n){var l,u;if(null!=(n=n.__)&&null!=n.__c){for(n.__e=n.__c.base=null,l=0;l<n.__k.length;l++)if(null!=(u=n.__k[l])&&null!=u.__e){n.__e=n.__c.base=u.__e;break}return k(n)}}function b(n){(!n.__d&&(n.__d=!0)&&t.push(n)&&!g.__r++||o!==preact_module_l.debounceRendering)&&((o=preact_module_l.debounceRendering)||setTimeout)(g)}function g(){for(var n;g.__r=t.length;)n=t.sort((function(n,l){return n.__v.__b-l.__v.__b})),t=[],n.some((function(n){var l,u,i,t,o,r;n.__d&&(o=(t=(l=n).__v).__e,(r=l.__P)&&(u=[],(i=s({},t)).__v=t.__v+1,j(r,t,i,l.__n,void 0!==r.ownerSVGElement,null!=t.__h?[o]:null,u,null==o?_(t):o,t.__h),z(u,t),t.__e!=o&&k(t)))}))}function w(n,l,u,i,t,o,r,c,s,a){var h,y,d,k,b,g,w,x=i&&i.__k||e,C=x.length;for(u.__k=[],h=0;h<l.length;h++)if(null!=(k=u.__k[h]=null==(k=l[h])||"boolean"==typeof k?null:"string"==typeof k||"number"==typeof k||"bigint"==typeof k?v(null,k,null,null,k):Array.isArray(k)?v(preact_module_p,{children:k},null,null,null):k.__b>0?v(k.type,k.props,k.key,k.ref?k.ref:null,k.__v):k)){if(k.__=u,k.__b=u.__b+1,null===(d=x[h])||d&&k.key==d.key&&k.type===d.type)x[h]=void 0;else for(y=0;y<C;y++){if((d=x[y])&&k.key==d.key&&k.type===d.type){x[y]=void 0;break}d=null}j(n,k,d=d||f,t,o,r,c,s,a),b=k.__e,(y=k.ref)&&d.ref!=y&&(w||(w=[]),d.ref&&w.push(d.ref,null,k),w.push(y,k.__c||b,k)),null!=b?(null==g&&(g=b),"function"==typeof k.type&&k.__k===d.__k?k.__d=s=m(k,s,n):s=A(n,k,d,x,b,s),"function"==typeof u.type&&(u.__d=s)):s&&d.__e==s&&s.parentNode!=n&&(s=_(d))}for(u.__e=g,h=C;h--;)null!=x[h]&&N(x[h],x[h]);if(w)for(h=0;h<w.length;h++)M(w[h],w[++h],w[++h])}function m(n,l,u){for(var i,t=n.__k,o=0;t&&o<t.length;o++)(i=t[o])&&(i.__=n,l="function"==typeof i.type?m(i,l,u):A(u,i,i,t,i.__e,l));return l}function A(n,l,u,i,t,o){var r,f,e;if(void 0!==l.__d)r=l.__d,l.__d=void 0;else if(null==u||t!=o||null==t.parentNode)n:if(null==o||o.parentNode!==n)n.appendChild(t),r=null;else{for(f=o,e=0;(f=f.nextSibling)&&e<i.length;e+=1)if(f==t)break n;n.insertBefore(t,o),r=o}return void 0!==r?r:t.nextSibling}function $(n,l,u){"-"===l[0]?n.setProperty(l,u):n[l]=null==u?"":"number"!=typeof u||c.test(l)?u:u+"px"}function H(n,l,u,i,t){var o;n:if("style"===l)if("string"==typeof u)n.style.cssText=u;else{if("string"==typeof i&&(n.style.cssText=i=""),i)for(l in i)u&&l in u||$(n.style,l,"");if(u)for(l in u)i&&u[l]===i[l]||$(n.style,l,u[l])}else if("o"===l[0]&&"n"===l[1])o=l!==(l=l.replace(/Capture$/,"")),l=l.toLowerCase()in n?l.toLowerCase().slice(2):l.slice(2),n.l||(n.l={}),n.l[l+o]=u,u?i||n.addEventListener(l,o?T:I,o):n.removeEventListener(l,o?T:I,o);else if("dangerouslySetInnerHTML"!==l){if(t)l=l.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if("href"!==l&&"list"!==l&&"form"!==l&&"tabIndex"!==l&&"download"!==l&&l in n)try{n[l]=null==u?"":u;break n}catch(n){}"function"==typeof u||(null==u||!1===u&&-1==l.indexOf("-")?n.removeAttribute(l):n.setAttribute(l,u))}}function I(n){this.l[n.type+!1](preact_module_l.event?preact_module_l.event(n):n)}function T(n){this.l[n.type+!0](preact_module_l.event?preact_module_l.event(n):n)}function j(n,u,i,t,o,r,f,e,c){var a,h,v,y,_,k,b,g,m,x,A,C,$,H,I,T=u.type;if(void 0!==u.constructor)return null;null!=i.__h&&(c=i.__h,e=u.__e=i.__e,u.__h=null,r=[e]),(a=preact_module_l.__b)&&a(u);try{n:if("function"==typeof T){if(g=u.props,m=(a=T.contextType)&&t[a.__c],x=a?m?m.props.value:a.__:t,i.__c?b=(h=u.__c=i.__c).__=h.__E:("prototype"in T&&T.prototype.render?u.__c=h=new T(g,x):(u.__c=h=new d(g,x),h.constructor=T,h.render=O),m&&m.sub(h),h.props=g,h.state||(h.state={}),h.context=x,h.__n=t,v=h.__d=!0,h.__h=[],h._sb=[]),null==h.__s&&(h.__s=h.state),null!=T.getDerivedStateFromProps&&(h.__s==h.state&&(h.__s=s({},h.__s)),s(h.__s,T.getDerivedStateFromProps(g,h.__s))),y=h.props,_=h.state,v)null==T.getDerivedStateFromProps&&null!=h.componentWillMount&&h.componentWillMount(),null!=h.componentDidMount&&h.__h.push(h.componentDidMount);else{if(null==T.getDerivedStateFromProps&&g!==y&&null!=h.componentWillReceiveProps&&h.componentWillReceiveProps(g,x),!h.__e&&null!=h.shouldComponentUpdate&&!1===h.shouldComponentUpdate(g,h.__s,x)||u.__v===i.__v){for(h.props=g,h.state=h.__s,u.__v!==i.__v&&(h.__d=!1),h.__v=u,u.__e=i.__e,u.__k=i.__k,u.__k.forEach((function(n){n&&(n.__=u)})),A=0;A<h._sb.length;A++)h.__h.push(h._sb[A]);h._sb=[],h.__h.length&&f.push(h);break n}null!=h.componentWillUpdate&&h.componentWillUpdate(g,h.__s,x),null!=h.componentDidUpdate&&h.__h.push((function(){h.componentDidUpdate(y,_,k)}))}if(h.context=x,h.props=g,h.__v=u,h.__P=n,C=preact_module_l.__r,$=0,"prototype"in T&&T.prototype.render){for(h.state=h.__s,h.__d=!1,C&&C(u),a=h.render(h.props,h.state,h.context),H=0;H<h._sb.length;H++)h.__h.push(h._sb[H]);h._sb=[]}else do{h.__d=!1,C&&C(u),a=h.render(h.props,h.state,h.context),h.state=h.__s}while(h.__d&&++$<25);h.state=h.__s,null!=h.getChildContext&&(t=s(s({},t),h.getChildContext())),v||null==h.getSnapshotBeforeUpdate||(k=h.getSnapshotBeforeUpdate(y,_)),I=null!=a&&a.type===preact_module_p&&null==a.key?a.props.children:a,w(n,Array.isArray(I)?I:[I],u,i,t,o,r,f,e,c),h.base=u.__e,u.__h=null,h.__h.length&&f.push(h),b&&(h.__E=h.__=null),h.__e=!1}else null==r&&u.__v===i.__v?(u.__k=i.__k,u.__e=i.__e):u.__e=L(i.__e,u,i,t,o,r,f,c);(a=preact_module_l.diffed)&&a(u)}catch(n){u.__v=null,(c||null!=r)&&(u.__e=e,u.__h=!!c,r[r.indexOf(e)]=null),preact_module_l.__e(n,u,i)}}function z(n,u){preact_module_l.__c&&preact_module_l.__c(u,n),n.some((function(u){try{n=u.__h,u.__h=[],n.some((function(n){n.call(u)}))}catch(n){preact_module_l.__e(n,u.__v)}}))}function L(l,u,i,t,o,r,e,c){var s,h,v,y=i.props,p=u.props,d=u.type,k=0;if("svg"===d&&(o=!0),null!=r)for(;k<r.length;k++)if((s=r[k])&&"setAttribute"in s==!!d&&(d?s.localName===d:3===s.nodeType)){l=s,r[k]=null;break}if(null==l){if(null===d)return document.createTextNode(p);l=o?document.createElementNS("http://www.w3.org/2000/svg",d):document.createElement(d,p.is&&p),r=null,c=!1}if(null===d)y===p||c&&l.data===p||(l.data=p);else{if(r=r&&n.call(l.childNodes),h=(y=i.props||f).dangerouslySetInnerHTML,v=p.dangerouslySetInnerHTML,!c){if(null!=r)for(y={},k=0;k<l.attributes.length;k++)y[l.attributes[k].name]=l.attributes[k].value;(v||h)&&(v&&(h&&v.__html==h.__html||v.__html===l.innerHTML)||(l.innerHTML=v&&v.__html||""))}if(function C(n,l,u,i,t){var o;for(o in u)"children"===o||"key"===o||o in l||H(n,o,null,u[o],i);for(o in l)t&&"function"!=typeof l[o]||"children"===o||"key"===o||"value"===o||"checked"===o||u[o]===l[o]||H(n,o,l[o],u[o],i)}(l,p,y,o,c),v)u.__k=[];else if(k=u.props.children,w(l,Array.isArray(k)?k:[k],u,i,t,o&&"foreignObject"!==d,r,e,r?r[0]:i.__k&&_(i,0),c),null!=r)for(k=r.length;k--;)null!=r[k]&&a(r[k]);c||("value"in p&&void 0!==(k=p.value)&&(k!==l.value||"progress"===d&&!k||"option"===d&&k!==y.value)&&H(l,"value",k,y.value,!1),"checked"in p&&void 0!==(k=p.checked)&&k!==l.checked&&H(l,"checked",k,y.checked,!1))}return l}function M(n,u,i){try{"function"==typeof n?n(u):n.current=u}catch(n){preact_module_l.__e(n,i)}}function N(n,u,i){var t,o;if(preact_module_l.unmount&&preact_module_l.unmount(n),(t=n.ref)&&(t.current&&t.current!==n.__e||M(t,null,u)),null!=(t=n.__c)){if(t.componentWillUnmount)try{t.componentWillUnmount()}catch(n){preact_module_l.__e(n,u)}t.base=t.__P=null,n.__c=void 0}if(t=n.__k)for(o=0;o<t.length;o++)t[o]&&N(t[o],u,i||"function"!=typeof n.type);i||null==n.__e||a(n.__e),n.__=n.__e=n.__d=void 0}function O(n,l,u){return this.constructor(n,u)}n=e.slice,preact_module_l={__e:function(n,l,u,i){for(var t,o,r;l=l.__;)if((t=l.__c)&&!t.__)try{if((o=t.constructor)&&null!=o.getDerivedStateFromError&&(t.setState(o.getDerivedStateFromError(n)),r=t.__d),null!=t.componentDidCatch&&(t.componentDidCatch(n,i||{}),r=t.__d),r)return t.__E=t}catch(l){n=l}throw n}},u=0,d.prototype.setState=function(n,l){var u;u=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=s({},this.state),"function"==typeof n&&(n=n(s({},u),this.props)),n&&s(u,n),null!=n&&this.__v&&(l&&this._sb.push(l),b(this))},d.prototype.forceUpdate=function(n){this.__v&&(this.__e=!0,n&&this.__h.push(n),b(this))},d.prototype.render=preact_module_p,t=[],g.__r=0;var dist_r=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|^--/i,dist_n=/^(area|base|br|col|embed|hr|img|input|link|meta|param|source|track|wbr)$/,dist_o=/[\s\n\\/='"\0<>]/,dist_i=/^xlink:?./,dist_a=/["&<]/;function l(e){if(!1===dist_a.test(e+=""))return e;for(var t=0,r=0,n="",o="";r<e.length;r++){switch(e.charCodeAt(r)){case 34:o="&quot;";break;case 38:o="&amp;";break;case 60:o="&lt;";break;default:continue}r!==t&&(n+=e.slice(t,r)),n+=o,t=r+1}return r!==t&&(n+=e.slice(t,r)),n}var dist_s=function(e,t){return String(e).replace(/(\n+)/g,"$1"+(t||"\t"))},dist_f=function(e,t,r){return String(e).length>(t||40)||!r&&-1!==String(e).indexOf("\n")||-1!==String(e).indexOf("<")},dist_c={},dist_u=/([A-Z])/g;function p(e){var t="";for(var n in e){var o=e[n];null!=o&&""!==o&&(t&&(t+=" "),t+="-"==n[0]?n:dist_c[n]||(dist_c[n]=n.replace(dist_u,"-$1").toLowerCase()),t="number"==typeof o&&!1===dist_r.test(n)?t+": "+o+"px;":t+": "+o+";")}return t||void 0}function dist_(e,t){return Array.isArray(t)?t.reduce(dist_,e):null!=t&&!1!==t&&e.push(t),e}function dist_d(){this.__d=!0}function dist_v(e,t){return{__v:e,context:t,props:e.props,setState:dist_d,forceUpdate:dist_d,__d:!0,__h:[]}}function dist_h(e,t){var r=e.contextType,n=r&&t[r.__c];return null!=r?n?n.props.value:r.__:t}var dist_g=[];function dist_y(r,a,c,u,d,m){if(null==r||"boolean"==typeof r)return"";if("object"!=typeof r)return l(r);var b=c.pretty,x=b&&"string"==typeof b?b:"\t";if(Array.isArray(r)){for(var k="",S=0;S<r.length;S++)b&&S>0&&(k+="\n"),k+=dist_y(r[S],a,c,u,d,m);return k}var w,C=r.type,O=r.props,j=!1;if("function"==typeof C){if(j=!0,!c.shallow||!u&&!1!==c.renderRootComponent){if(C===preact_module_p){var A=[];return dist_(A,r.props.children),dist_y(A,a,c,!1!==c.shallowHighOrder,d,m)}var F,H=r.__c=dist_v(r,a);preact_module_l.__b&&preact_module_l.__b(r);var M=preact_module_l.__r;if(C.prototype&&"function"==typeof C.prototype.render){var L=dist_h(C,a);(H=r.__c=new C(O,L)).__v=r,H._dirty=H.__d=!0,H.props=O,null==H.state&&(H.state={}),null==H._nextState&&null==H.__s&&(H._nextState=H.__s=H.state),H.context=L,C.getDerivedStateFromProps?H.state=Object.assign({},H.state,C.getDerivedStateFromProps(H.props,H.state)):H.componentWillMount&&(H.componentWillMount(),H.state=H._nextState!==H.state?H._nextState:H.__s!==H.state?H.__s:H.state),M&&M(r),F=H.render(H.props,H.state,H.context)}else for(var T=dist_h(C,a),E=0;H.__d&&E++<25;)H.__d=!1,M&&M(r),F=C.call(r.__c,O,T);return H.getChildContext&&(a=Object.assign({},a,H.getChildContext())),preact_module_l.diffed&&preact_module_l.diffed(r),dist_y(F,a,c,!1!==c.shallowHighOrder,d,m)}C=(w=C).displayName||w!==Function&&w.name||function(e){var t=(Function.prototype.toString.call(e).match(/^\s*function\s+([^( ]+)/)||"")[1];if(!t){for(var r=-1,n=dist_g.length;n--;)if(dist_g[n]===e){r=n;break}r<0&&(r=dist_g.push(e)-1),t="UnnamedComponent"+r}return t}(w)}var $,D,N="<"+C;if(O){var P=Object.keys(O);c&&!0===c.sortAttributes&&P.sort();for(var W=0;W<P.length;W++){var I=P[W],R=O[I];if("children"!==I){if(!dist_o.test(I)&&(c&&c.allAttributes||"key"!==I&&"ref"!==I&&"__self"!==I&&"__source"!==I)){if("defaultValue"===I)I="value";else if("defaultChecked"===I)I="checked";else if("defaultSelected"===I)I="selected";else if("className"===I){if(void 0!==O.class)continue;I="class"}else d&&dist_i.test(I)&&(I=I.toLowerCase().replace(/^xlink:?/,"xlink:"));if("htmlFor"===I){if(O.for)continue;I="for"}"style"===I&&R&&"object"==typeof R&&(R=p(R)),"a"===I[0]&&"r"===I[1]&&"boolean"==typeof R&&(R=String(R));var U=c.attributeHook&&c.attributeHook(I,R,a,c,j);if(U||""===U)N+=U;else if("dangerouslySetInnerHTML"===I)D=R&&R.__html;else if("textarea"===C&&"value"===I)$=R;else if((R||0===R||""===R)&&"function"!=typeof R){if(!(!0!==R&&""!==R||(R=I,c&&c.xml))){N=N+" "+I;continue}if("value"===I){if("select"===C){m=R;continue}"option"===C&&m==R&&void 0===O.selected&&(N+=" selected")}N=N+" "+I+'="'+l(R)+'"'}}}else $=R}}if(b){var V=N.replace(/\n\s*/," ");V===N||~V.indexOf("\n")?b&&~N.indexOf("\n")&&(N+="\n"):N=V}if(N+=">",dist_o.test(C))throw new Error(C+" is not a valid HTML tag name in "+N);var q,z=dist_n.test(C)||c.voidElements&&c.voidElements.test(C),Z=[];if(D)b&&dist_f(D)&&(D="\n"+x+dist_s(D,x)),N+=D;else if(null!=$&&dist_(q=[],$).length){for(var B=b&&~N.indexOf("\n"),G=!1,J=0;J<q.length;J++){var K=q[J];if(null!=K&&!1!==K){var Q=dist_y(K,a,c,!0,"svg"===C||"foreignObject"!==C&&d,m);if(b&&!B&&dist_f(Q)&&(B=!0),Q)if(b){var X=Q.length>0&&"<"!=Q[0];G&&X?Z[Z.length-1]+=Q:Z.push(Q),G=X}else Z.push(Q)}}if(b&&B)for(var Y=Z.length;Y--;)Z[Y]="\n"+x+dist_s(Z[Y],x)}if(Z.length||D)N+=Z.join("");else if(c&&c.xml)return N.substring(0,N.length-1)+" />";return!z||q||D?(b&&~N.indexOf("\n")&&(N+="\n"),N=N+"</"+C+">"):N=N.replace(/>$/," />"),N}var dist_m={shallow:!0};dist_k.render=dist_k;var dist_x=[];function dist_k(e,r,n){r=r||{};var o,i=preact_module_l.__s;return preact_module_l.__s=!0,o=n&&(n.pretty||n.voidElements||n.sortAttributes||n.shallow||n.allAttributes||n.xml||n.attributeHook)?dist_y(e,r,n):dist_j(e,r,!1,void 0),preact_module_l.__c&&preact_module_l.__c(e,dist_x),preact_module_l.__s=i,dist_x.length=0,o}function dist_S(e,t){return"className"===e?"class":"htmlFor"===e?"for":"defaultValue"===e?"value":"defaultChecked"===e?"checked":"defaultSelected"===e?"selected":t&&dist_i.test(e)?e.toLowerCase().replace(/^xlink:?/,"xlink:"):e}function dist_w(e,t){return"style"===e&&null!=t&&"object"==typeof t?p(t):"a"===e[0]&&"r"===e[1]&&"boolean"==typeof t?String(t):t}var dist_C=Array.isArray,dist_O=Object.assign;function dist_j(r,i,a,s){if(null==r||!0===r||!1===r||""===r)return"";if("object"!=typeof r)return l(r);if(dist_C(r)){for(var f="",c=0;c<r.length;c++)f+=dist_j(r[c],i,a,s);return f}preact_module_l.__b&&preact_module_l.__b(r);var u=r.type,p=r.props;if("function"==typeof u){if(u===preact_module_p)return dist_j(r.props.children,i,a,s);var _;_=u.prototype&&"function"==typeof u.prototype.render?function(e,r){var n=e.type,o=dist_h(n,r),i=new n(e.props,o);e.__c=i,i.__v=e,i.__d=!0,i.props=e.props,null==i.state&&(i.state={}),null==i.__s&&(i.__s=i.state),i.context=o,n.getDerivedStateFromProps?i.state=dist_O({},i.state,n.getDerivedStateFromProps(i.props,i.state)):i.componentWillMount&&(i.componentWillMount(),i.state=i.__s!==i.state?i.__s:i.state);var a=preact_module_l.__r;return a&&a(e),i.render(i.props,i.state,i.context)}(r,i):function(e,r){var n,o=dist_v(e,r),i=dist_h(e.type,r);e.__c=o;for(var a=preact_module_l.__r,l=0;o.__d&&l++<25;)o.__d=!1,a&&a(e),n=e.type.call(o,e.props,i);return n}(r,i);var d=r.__c;d.getChildContext&&(i=dist_O({},i,d.getChildContext()));var g=dist_j(_,i,a,s);return preact_module_l.diffed&&preact_module_l.diffed(r),g}var y,m,b="<";if(b+=u,p)for(var x in y=p.children,p){var k=p[x];if(!("key"===x||"ref"===x||"__self"===x||"__source"===x||"children"===x||"className"===x&&"class"in p||"htmlFor"===x&&"for"in p||dist_o.test(x)))if(k=dist_w(x=dist_S(x,a),k),"dangerouslySetInnerHTML"===x)m=k&&k.__html;else if("textarea"===u&&"value"===x)y=k;else if((k||0===k||""===k)&&"function"!=typeof k){if(!0===k||""===k){k=x,b=b+" "+x;continue}if("value"===x){if("select"===u){s=k;continue}"option"!==u||s!=k||"selected"in p||(b+=" selected")}b=b+" "+x+'="'+l(k)+'"'}}var A=b;if(b+=">",dist_o.test(u))throw new Error(u+" is not a valid HTML tag name in "+b);var F="",H=!1;if(m)F+=m,H=!0;else if("string"==typeof y)F+=l(y),H=!0;else if(dist_C(y))for(var M=0;M<y.length;M++){var L=y[M];if(null!=L&&!1!==L){var T=dist_j(L,i,"svg"===u||"foreignObject"!==u&&a,s);T&&(F+=T,H=!0)}}else if(null!=y&&!1!==y&&!0!==y){var E=dist_j(y,i,"svg"===u||"foreignObject"!==u&&a,s);E&&(F+=E,H=!0)}if(preact_module_l.diffed&&preact_module_l.diffed(r),H)b+=F;else if(dist_n.test(u))return A+" />";return b+"</"+u+">"}dist_k.shallowRender=function(e,t){return dist_k(e,t,dist_m)};var jsxRuntime_module_=0;function jsxRuntime_module_o(o,e,n,t,f){var l,s,u={};for(s in e)"ref"==s?l=e[s]:u[s]=e[s];var a={type:o,props:u,key:n,ref:l,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:--jsxRuntime_module_,__source:f,__self:t};if("function"==typeof o&&(l=o.defaultProps))for(s in l)void 0===u[s]&&(u[s]=l[s]);return preact_module_l.vnode&&preact_module_l.vnode(a),a}function ErrorPage(props){const{url,error="default",theme}=props,signinPageUrl=`${url}/signin`,errors={default:{status:200,heading:"Error",message:jsxRuntime_module_o("p",{children:jsxRuntime_module_o("a",{className:"site",href:url?.origin,children:url?.host})})},configuration:{status:500,heading:"Server error",message:jsxRuntime_module_o("div",{children:[jsxRuntime_module_o("p",{children:"There is a problem with the server configuration."}),jsxRuntime_module_o("p",{children:"Check the server logs for more information."})]})},accessdenied:{status:403,heading:"Access Denied",message:jsxRuntime_module_o("div",{children:[jsxRuntime_module_o("p",{children:"You do not have permission to sign in."}),jsxRuntime_module_o("p",{children:jsxRuntime_module_o("a",{className:"button",href:signinPageUrl,children:"Sign in"})})]})},verification:{status:403,heading:"Unable to sign in",message:jsxRuntime_module_o("div",{children:[jsxRuntime_module_o("p",{children:"The sign in link is no longer valid."}),jsxRuntime_module_o("p",{children:"It may have been used already or it may have expired."})]}),signin:jsxRuntime_module_o("p",{children:jsxRuntime_module_o("a",{className:"button",href:signinPageUrl,children:"Sign in"})})}},{status,heading,message,signin}=errors[error.toLowerCase()]??errors.default;return{status,html:jsxRuntime_module_o("div",{className:"error",children:[theme?.brandColor&&jsxRuntime_module_o("style",{dangerouslySetInnerHTML:{__html:`\n        :root {\n          --brand-color: ${theme?.brandColor}\n        }\n      `}}),jsxRuntime_module_o("div",{className:"card",children:[theme?.logo&&jsxRuntime_module_o("img",{src:theme?.logo,alt:"Logo",className:"logo"}),jsxRuntime_module_o("h1",{children:heading}),jsxRuntime_module_o("div",{className:"message",children:message}),signin]})]})}}const signinErrors={default:"Unable to sign in.",signin:"Try signing in with a different account.",oauthsignin:"Try signing in with a different account.",oauthcallbackerror:"Try signing in with a different account.",oauthcreateaccount:"Try signing in with a different account.",emailcreateaccount:"Try signing in with a different account.",callback:"Try signing in with a different account.",oauthaccountnotlinked:"To confirm your identity, sign in with the same account you used originally.",emailsignin:"The e-mail could not be sent.",credentialssignin:"Sign in failed. Check the details you provided are correct.",sessionrequired:"Please sign in to access this page."};function SigninPage(props){const{csrfToken,providers=[],callbackUrl,theme,email,error:errorType}=props;"undefined"!=typeof document&&theme.brandColor&&document.documentElement.style.setProperty("--brand-color",theme.brandColor),"undefined"!=typeof document&&theme.buttonText&&document.documentElement.style.setProperty("--button-text-color",theme.buttonText);const error=errorType&&(signinErrors[errorType.toLowerCase()]??signinErrors.default),logos="https://authjs.dev/img/providers";return jsxRuntime_module_o("div",{className:"signin",children:[theme.brandColor&&jsxRuntime_module_o("style",{dangerouslySetInnerHTML:{__html:`:root {--brand-color: ${theme.brandColor}}`}}),theme.buttonText&&jsxRuntime_module_o("style",{dangerouslySetInnerHTML:{__html:`\n        :root {\n          --button-text-color: ${theme.buttonText}\n        }\n      `}}),jsxRuntime_module_o("div",{className:"card",children:[error&&jsxRuntime_module_o("div",{className:"error",children:jsxRuntime_module_o("p",{children:error})}),providers.map(((provider,i)=>jsxRuntime_module_o("div",{className:"provider",children:["oauth"===provider.type||"oidc"===provider.type?jsxRuntime_module_o("form",{action:provider.signinUrl,method:"POST",children:[jsxRuntime_module_o("input",{type:"hidden",name:"csrfToken",value:csrfToken}),callbackUrl&&jsxRuntime_module_o("input",{type:"hidden",name:"callbackUrl",value:callbackUrl}),jsxRuntime_module_o("button",{type:"submit",className:"button",style:{"--provider-bg":provider.style?.bg??"","--provider-dark-bg":provider.style?.bgDark??"","--provider-color":provider.style?.text??"","--provider-dark-color":provider.style?.textDark??"",gap:8},children:[provider.style?.logo&&jsxRuntime_module_o("img",{loading:"lazy",height:24,width:24,id:"provider-logo",src:`${provider.style.logo.startsWith("/")?logos:""}${provider.style.logo}`}),provider.style?.logoDark&&jsxRuntime_module_o("img",{loading:"lazy",height:24,width:24,id:"provider-logo-dark",src:`${provider.style.logo.startsWith("/")?logos:""}${provider.style.logoDark}`}),jsxRuntime_module_o("span",{children:["Sign in with ",provider.name]})]})]}):null,("email"===provider.type||"credentials"===provider.type)&&i>0&&"email"!==providers[i-1].type&&"credentials"!==providers[i-1].type&&jsxRuntime_module_o("hr",{}),"email"===provider.type&&jsxRuntime_module_o("form",{action:provider.signinUrl,method:"POST",children:[jsxRuntime_module_o("input",{type:"hidden",name:"csrfToken",value:csrfToken}),jsxRuntime_module_o("label",{className:"section-header",htmlFor:`input-email-for-${provider.id}-provider`,children:"Email"}),jsxRuntime_module_o("input",{id:`input-email-for-${provider.id}-provider`,autoFocus:!0,type:"email",name:"email",value:email,placeholder:"email@example.com",required:!0}),jsxRuntime_module_o("button",{type:"submit",children:["Sign in with ",provider.name]})]}),"credentials"===provider.type&&jsxRuntime_module_o("form",{action:provider.callbackUrl,method:"POST",children:[jsxRuntime_module_o("input",{type:"hidden",name:"csrfToken",value:csrfToken}),Object.keys(provider.credentials).map((credential=>jsxRuntime_module_o("div",{children:[jsxRuntime_module_o("label",{className:"section-header",htmlFor:`input-${credential}-for-${provider.id}-provider`,children:provider.credentials[credential].label??credential}),jsxRuntime_module_o("input",{name:credential,id:`input-${credential}-for-${provider.id}-provider`,type:provider.credentials[credential].type??"text",placeholder:provider.credentials[credential].placeholder??"",...provider.credentials[credential]})]},`input-group-${provider.id}`))),jsxRuntime_module_o("button",{id:"submitButton",type:"submit",children:["Sign in with ",provider.name]})]}),("email"===provider.type||"credentials"===provider.type)&&i+1<providers.length&&jsxRuntime_module_o("hr",{})]},provider.id)))]})]})}function SignoutPage(props){const{url,csrfToken,theme}=props;return jsxRuntime_module_o("div",{className:"signout",children:[theme.brandColor&&jsxRuntime_module_o("style",{dangerouslySetInnerHTML:{__html:`\n        :root {\n          --brand-color: ${theme.brandColor}\n        }\n      `}}),theme.buttonText&&jsxRuntime_module_o("style",{dangerouslySetInnerHTML:{__html:`\n        :root {\n          --button-text-color: ${theme.buttonText}\n        }\n      `}}),jsxRuntime_module_o("div",{className:"card",children:[theme.logo&&jsxRuntime_module_o("img",{src:theme.logo,alt:"Logo",className:"logo"}),jsxRuntime_module_o("h1",{children:"Signout"}),jsxRuntime_module_o("p",{children:"Are you sure you want to sign out?"}),jsxRuntime_module_o("form",{action:`${url}/signout`,method:"POST",children:[jsxRuntime_module_o("input",{type:"hidden",name:"csrfToken",value:csrfToken}),jsxRuntime_module_o("button",{id:"submitButton",type:"submit",children:"Sign out"})]})]})]})}const styles=':root {\n  --border-width: 1px;\n  --border-radius: 0.5rem;\n  --color-error: #c94b4b;\n  --color-info: #157efb;\n  --color-info-text: #fff;\n}\n\n.__next-auth-theme-auto,\n.__next-auth-theme-light {\n  --color-background: #ececec;\n  --color-background-card: #fff;\n  --color-text: #000;\n  --color-primary: #444;\n  --color-control-border: #bbb;\n  --color-button-active-background: #f9f9f9;\n  --color-button-active-border: #aaa;\n  --color-separator: #ccc;\n}\n\n.__next-auth-theme-dark {\n  --color-background: #161b22;\n  --color-background-card: #0d1117;\n  --color-text: #fff;\n  --color-primary: #ccc;\n  --color-control-border: #555;\n  --color-button-active-background: #060606;\n  --color-button-active-border: #666;\n  --color-separator: #444;\n}\n\n@media (prefers-color-scheme: dark) {\n  .__next-auth-theme-auto {\n    --color-background: #161b22;\n    --color-background-card: #0d1117;\n    --color-text: #fff;\n    --color-primary: #ccc;\n    --color-control-border: #555;\n    --color-button-active-background: #060606;\n    --color-button-active-border: #666;\n    --color-separator: #444;\n  }\n}\n\nbody {\n  background-color: var(--color-background);\n  margin: 0;\n  padding: 0;\n  font-family: ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont,\n    "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif,\n    "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";\n}\n\nh1 {\n  font-weight: 400;\n  margin-bottom: 1.5rem;\n  padding: 0 1rem;\n  color: var(--color-text);\n}\n\np {\n  color: var(--color-text);\n}\n\nform {\n  margin: 0;\n  padding: 0;\n}\n\nlabel {\n  font-weight: 500;\n  text-align: left;\n  margin-bottom: 0.25rem;\n  display: block;\n  color: var(--color-text);\n}\n\ninput[type] {\n  box-sizing: border-box;\n  display: block;\n  width: 100%;\n  padding: 0.5rem 1rem;\n  border: var(--border-width) solid var(--color-control-border);\n  background: var(--color-background-card);\n  font-size: 1rem;\n  border-radius: var(--border-radius);\n  color: var(--color-text);\n}\n\ninput[type]:focus {\n    box-shadow: none;\n  }\n\np {\n  margin: 0 0 1.5rem 0;\n  padding: 0 1rem;\n  font-size: 1.1rem;\n  line-height: 2rem;\n}\n\na.button {\n  text-decoration: none;\n  line-height: 1rem;\n}\n\na.button:link,\n  a.button:visited {\n    background-color: var(--color-background);\n    color: var(--color-primary);\n  }\n\nbutton span {\n  flex-grow: 1;\n}\n\nbutton,\na.button {\n  margin: 0 0 0.75rem 0;\n  padding: 0.75rem 1rem;\n  color: var(--provider-color, var(--color-primary));\n  background-color: var(--provider-bg, var(--color-background-card));\n  font-size: 1.1rem;\n  min-height: 62px;\n  border-color: rgba(0, 0, 0, 0.1);\n  border-radius: var(--border-radius);\n  transition: all 0.1s ease-in-out;\n  font-weight: 500;\n  position: relative;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n@media (max-width: 450px) {\n\nbutton,\na.button {\n    font-size: 0.9rem\n}\n  }\n\nbutton:hover, a.button:hover {\n    cursor: pointer;\n  }\n\nbutton:active, a.button:active {\n    cursor: pointer;\n  }\n\nbutton #provider-logo, a.button #provider-logo {\n    width: 25px;\n    display: block;\n  }\n\nbutton #provider-logo-dark, a.button #provider-logo-dark {\n    display: none;\n  }\n\n#submitButton {\n  color: var(--button-text-color, var(--color-info-text));\n  background-color: var(--brand-color, var(--color-info));\n  width: 100%;\n}\n\n@media (prefers-color-scheme: dark) {\n  button,\n  a.button {\n    color: var(--provider-dark-color, var(--color-primary));\n    background-color: var(--provider-dark-bg, var(--color-background));\n  }\n  #provider-logo {\n    display: none !important;\n  }\n  #provider-logo-dark {\n    width: 25px;\n    display: block !important;\n  }\n}\n\na.site {\n  color: var(--color-primary);\n  text-decoration: none;\n  font-size: 1rem;\n  line-height: 2rem;\n}\n\na.site:hover {\n    text-decoration: underline;\n  }\n\n.page {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  display: grid;\n  place-items: center;\n  margin: 0;\n  padding: 0;\n}\n\n.page > div {\n    text-align: center;\n  }\n\n.error a.button {\n    display: inline-block;\n    padding-left: 2rem;\n    padding-right: 2rem;\n    margin-top: 0.5rem;\n  }\n\n.error .message {\n    margin-bottom: 1.5rem;\n  }\n\n.signin input[type="text"] {\n    margin-left: auto;\n    margin-right: auto;\n    display: block;\n  }\n\n.signin hr {\n    display: block;\n    border: 0;\n    border-top: 1px solid var(--color-separator);\n    margin: 2rem auto 1rem auto;\n    overflow: visible;\n  }\n\n.signin hr::before {\n      content: "or";\n      background: var(--color-background-card);\n      color: #888;\n      padding: 0 0.4rem;\n      position: relative;\n      top: -0.7rem;\n    }\n\n.signin .error {\n    background: #f5f5f5;\n    font-weight: 500;\n    border-radius: 0.3rem;\n    background: var(--color-error);\n  }\n\n.signin .error p {\n      text-align: left;\n      padding: 0.5rem 1rem;\n      font-size: 0.9rem;\n      line-height: 1.2rem;\n      color: var(--color-info-text);\n    }\n\n.signin > div,\n  .signin form {\n    display: block;\n  }\n\n.signin > div input[type], .signin form input[type] {\n      margin-bottom: 0.5rem;\n    }\n\n.signin > div button, .signin form button {\n      width: 100%;\n    }\n\n.signin > div,\n  .signin form {\n\n    max-width: 300px;\n}\n\n.logo {\n  display: inline-block;\n  max-width: 150px;\n  margin-top: 20px;\n  margin-bottom: 25px;\n  max-height: 70px;\n}\n\n@media screen and (min-width: 450px) {\n\n.card {\n    width: 350px\n}\n  }\n\n@media screen and (max-width: 450px) {\n\n.card {\n    width: 200px\n}\n  }\n\n.card {\n  margin: 20px 0 20px 0;\n  background-color: var(--color-background-card);\n  border-radius: 30px;\n  padding: 20px 50px;\n}\n\n.card .header {\n    color: var(--color-primary);\n  }\n\n.section-header {\n  color: var(--color-text);\n}\n';function VerifyRequestPage(props){const{url,theme}=props;return jsxRuntime_module_o("div",{className:"verify-request",children:[theme.brandColor&&jsxRuntime_module_o("style",{dangerouslySetInnerHTML:{__html:`\n        :root {\n          --brand-color: ${theme.brandColor}\n        }\n      `}}),jsxRuntime_module_o("div",{className:"card",children:[theme.logo&&jsxRuntime_module_o("img",{src:theme.logo,alt:"Logo",className:"logo"}),jsxRuntime_module_o("h1",{children:"Check your email"}),jsxRuntime_module_o("p",{children:"A sign in link has been sent to your email address."}),jsxRuntime_module_o("p",{children:jsxRuntime_module_o("a",{className:"site",href:url.origin,children:url.host})})]})]})}function send({html,title,status,cookies,theme}){return{cookies,status,headers:{"Content-Type":"text/html"},body:`<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><style>${styles}</style><title>${title}</title></head><body class="__next-auth-theme-${theme?.colorScheme??"auto"}"><div class="page">${dist_k(html)}</div></body></html>`}}function renderPage(params){const{url,theme,query,cookies}=params;return{signin:props=>send({cookies,theme,html:SigninPage({csrfToken:params.csrfToken,providers:params.providers?.filter((provider=>["email","oauth","oidc"].includes(provider.type)||"credentials"===provider.type&&provider.credentials||!1)),callbackUrl:params.callbackUrl,theme,...query,...props}),title:"Sign In"}),signout:props=>send({cookies,theme,html:SignoutPage({csrfToken:params.csrfToken,url,theme,...props}),title:"Sign Out"}),verifyRequest:props=>send({cookies,theme,html:VerifyRequestPage({url,theme,...props}),title:"Verify Request"}),error:props=>send({cookies,theme,...ErrorPage({url,theme,...props}),title:"Error"})}}function fromDate(time,date=Date.now()){return new Date(date+1e3*time)}async function handleLogin(sessionToken,_profile,_account,options){if(!_account?.providerAccountId||!_account.type)throw new Error("Missing or invalid provider account");if(!["email","oauth","oidc"].includes(_account.type))throw new Error("Provider not supported");const{adapter,jwt,events,session:{strategy:sessionStrategy,generateSessionToken}}=options;if(!adapter)return{user:_profile,account:_account};const profile=_profile;let account=_account;const{createUser,updateUser,getUser,getUserByAccount,getUserByEmail,linkAccount,createSession,getSessionAndUser,deleteSession}=adapter;let session=null,user=null,isNewUser=!1;const useJwtSession="jwt"===sessionStrategy;if(sessionToken)if(useJwtSession)try{session=await jwt.decode({...jwt,token:sessionToken}),session&&"sub"in session&&session.sub&&(user=await getUser(session.sub))}catch{}else{const userAndSession=await getSessionAndUser(sessionToken);userAndSession&&(session=userAndSession.session,user=userAndSession.user)}if("email"===account.type){const userByEmail=await getUserByEmail(profile.email);if(userByEmail)user?.id!==userByEmail.id&&!useJwtSession&&sessionToken&&await deleteSession(sessionToken),user=await updateUser({id:userByEmail.id,emailVerified:new Date}),await(events.updateUser?.({user}));else{const{id:_,...newUser}={...profile,emailVerified:new Date};user=await createUser(newUser),await(events.createUser?.({user})),isNewUser=!0}return session=useJwtSession?{}:await createSession({sessionToken:generateSessionToken(),userId:user.id,expires:fromDate(options.session.maxAge)}),{session,user,isNewUser}}const userByAccount=await getUserByAccount({providerAccountId:account.providerAccountId,provider:account.provider});if(userByAccount){if(user){if(userByAccount.id===user.id)return{session,user,isNewUser};throw new errors.Xw("The account is already associated with another user",{provider:account.provider})}return session=useJwtSession?{}:await createSession({sessionToken:generateSessionToken(),userId:userByAccount.id,expires:fromDate(options.session.maxAge)}),{session,user:userByAccount,isNewUser}}{const{provider:p}=options,{type,provider,providerAccountId,userId,...tokenSet}=account,defaults={providerAccountId,provider,type,userId};if(account=Object.assign(p.account(tokenSet)??{},defaults),user)return await linkAccount({...account,userId:user.id}),await(events.linkAccount?.({user,account,profile})),{session,user,isNewUser};const userByEmail=profile.email?await getUserByEmail(profile.email):null;if(userByEmail){const provider=options.provider;if(!provider?.allowDangerousEmailAccountLinking)throw new errors.Xw("Another account already exists with the same e-mail address",{provider:account.provider});user=userByEmail}else{const{id:_,...newUser}={...profile,emailVerified:null};user=await createUser(newUser)}return await(events.createUser?.({user})),await linkAccount({...account,userId:user.id}),await(events.linkAccount?.({user,account,profile})),session=useJwtSession?{}:await createSession({sessionToken:generateSessionToken(),userId:user.id,expires:fromDate(options.session.maxAge)}),{session,user,isNewUser:!0}}}let USER_AGENT;if("undefined"==typeof navigator||!navigator.userAgent?.startsWith?.("Mozilla/5.0 ")){USER_AGENT=`${"oauth4webapi"}/${"v2.3.0"}`}const clockSkew=Symbol(),clockTolerance=Symbol(),build_encoder=new TextEncoder,build_decoder=new TextDecoder;function buf(input){return"string"==typeof input?build_encoder.encode(input):build_decoder.decode(input)}const build_CHUNK_SIZE=32768;function b64u(input){return"string"==typeof input?function decodeBase64Url(input){try{const binary=atob(input.replace(/-/g,"+").replace(/_/g,"/").replace(/\s/g,"")),bytes=new Uint8Array(binary.length);for(let i=0;i<binary.length;i++)bytes[i]=binary.charCodeAt(i);return bytes}catch{throw new TypeError("The input to be decoded is not correctly encoded.")}}(input):function encodeBase64Url(input){input instanceof ArrayBuffer&&(input=new Uint8Array(input));const arr=[];for(let i=0;i<input.byteLength;i+=build_CHUNK_SIZE)arr.push(String.fromCharCode.apply(null,input.subarray(i,i+build_CHUNK_SIZE)));return btoa(arr.join("")).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}(input)}class UnsupportedOperationError extends Error{constructor(message){super(message??"operation not supported"),this.name=this.constructor.name,Error.captureStackTrace?.(this,this.constructor)}}class OperationProcessingError extends Error{constructor(message){super(message),this.name=this.constructor.name,Error.captureStackTrace?.(this,this.constructor)}}const OPE=OperationProcessingError,dpopNonces=new class LRU{constructor(maxSize){this.cache=new Map,this._cache=new Map,this.maxSize=maxSize}get(key){let v=this.cache.get(key);return v||((v=this._cache.get(key))?(this.update(key,v),v):void 0)}has(key){return this.cache.has(key)||this._cache.has(key)}set(key,value){return this.cache.has(key)?this.cache.set(key,value):this.update(key,value),this}delete(key){return this.cache.has(key)?this.cache.delete(key):!!this._cache.has(key)&&this._cache.delete(key)}update(key,value){this.cache.set(key,value),this.cache.size>=this.maxSize&&(this._cache=this.cache,this.cache=new Map)}}(100);function build_isCryptoKey(key){return key instanceof CryptoKey}function isPrivateKey(key){return build_isCryptoKey(key)&&"private"===key.type}function processDpopNonce(response){const url=new URL(response.url);return response.headers.has("dpop-nonce")&&dpopNonces.set(url.origin,response.headers.get("dpop-nonce")),response}function isJsonObject(input){return null!==input&&"object"==typeof input&&!Array.isArray(input)}function prepareHeaders(input){if(void 0!==input&&!(input instanceof Headers))throw new TypeError('"options.headers" must be an instance of Headers');const headers=new Headers(input);if(USER_AGENT&&!headers.has("user-agent")&&headers.set("user-agent",USER_AGENT),headers.has("authorization"))throw new TypeError('"options.headers" must not include the "authorization" header name');if(headers.has("dpop"))throw new TypeError('"options.headers" must not include the "dpop" header name');return headers}function signal(value){if("function"==typeof value&&(value=value()),!(value instanceof AbortSignal))throw new TypeError('"options.signal" must return or be an instance of AbortSignal');return value}async function discoveryRequest(issuerIdentifier,options){if(!(issuerIdentifier instanceof URL))throw new TypeError('"issuerIdentifier" must be an instance of URL');if("https:"!==issuerIdentifier.protocol&&"http:"!==issuerIdentifier.protocol)throw new TypeError('"issuer.protocol" must be "https:" or "http:"');const url=new URL(issuerIdentifier.href);switch(options?.algorithm){case void 0:case"oidc":url.pathname=`${url.pathname}/.well-known/openid-configuration`.replace("//","/");break;case"oauth2":"/"===url.pathname?url.pathname=".well-known/oauth-authorization-server":url.pathname=`.well-known/oauth-authorization-server/${url.pathname}`.replace("//","/");break;default:throw new TypeError('"options.algorithm" must be "oidc" (default), or "oauth2"')}const headers=prepareHeaders(options?.headers);return headers.set("accept","application/json"),fetch(url.href,{headers,method:"GET",redirect:"manual",signal:options?.signal?signal(options.signal):null}).then(processDpopNonce)}function validateString(input){return"string"==typeof input&&0!==input.length}async function processDiscoveryResponse(expectedIssuerIdentifier,response){if(!(expectedIssuerIdentifier instanceof URL))throw new TypeError('"expectedIssuer" must be an instance of URL');if(!(response instanceof Response))throw new TypeError('"response" must be an instance of Response');if(200!==response.status)throw new OPE('"response" is not a conform Authorization Server Metadata response');let json;assertReadableResponse(response);try{json=await response.json()}catch{throw new OPE('failed to parse "response" body as JSON')}if(!isJsonObject(json))throw new OPE('"response" body must be a top level object');if(!validateString(json.issuer))throw new OPE('"response" body "issuer" property must be a non-empty string');if(new URL(json.issuer).href!==expectedIssuerIdentifier.href)throw new OPE('"response" body "issuer" does not match "expectedIssuer"');return json}function randomBytes(){return b64u(crypto.getRandomValues(new Uint8Array(32)))}function getKeyAndKid(input){if(input instanceof CryptoKey)return{key:input};if(!(input?.key instanceof CryptoKey))return{};if(void 0!==input.kid&&!validateString(input.kid))throw new TypeError('"kid" must be a non-empty string');return{key:input.key,kid:input.kid}}function formUrlEncode(token){return encodeURIComponent(token).replace(/%20/g,"+")}function keyToJws(key){switch(key.algorithm.name){case"RSA-PSS":return function psAlg(key){switch(key.algorithm.hash.name){case"SHA-256":return"PS256";case"SHA-384":return"PS384";case"SHA-512":return"PS512";default:throw new UnsupportedOperationError("unsupported RsaHashedKeyAlgorithm hash name")}}(key);case"RSASSA-PKCS1-v1_5":return function rsAlg(key){switch(key.algorithm.hash.name){case"SHA-256":return"RS256";case"SHA-384":return"RS384";case"SHA-512":return"RS512";default:throw new UnsupportedOperationError("unsupported RsaHashedKeyAlgorithm hash name")}}(key);case"ECDSA":return function esAlg(key){switch(key.algorithm.namedCurve){case"P-256":return"ES256";case"P-384":return"ES384";case"P-521":return"ES512";default:throw new UnsupportedOperationError("unsupported EcKeyAlgorithm namedCurve")}}(key);case"Ed25519":case"Ed448":return"EdDSA";default:throw new UnsupportedOperationError("unsupported CryptoKey algorithm name")}}function getClockSkew(client){return Number.isFinite(client[clockSkew])?client[clockSkew]:0}function getClockTolerance(client){const tolerance=client[clockTolerance];return Number.isFinite(tolerance)&&-1!==Math.sign(tolerance)?tolerance:30}function epochTime(){return Math.floor(Date.now()/1e3)}async function privateKeyJwt(as,client,key,kid){return jwt({alg:keyToJws(key),kid},function clientAssertion(as,client){const now=epochTime()+getClockSkew(client);return{jti:randomBytes(),aud:[as.issuer,as.token_endpoint],exp:now+60,iat:now,nbf:now,iss:client.client_id,sub:client.client_id}}(as,client),key)}function assertAs(as){if("object"!=typeof as||null===as)throw new TypeError('"as" must be an object');if(!validateString(as.issuer))throw new TypeError('"as.issuer" property must be a non-empty string');return!0}function assertClient(client){if("object"!=typeof client||null===client)throw new TypeError('"client" must be an object');if(!validateString(client.client_id))throw new TypeError('"client.client_id" property must be a non-empty string');return!0}function assertClientSecret(clientSecret){if(!validateString(clientSecret))throw new TypeError('"client.client_secret" property must be a non-empty string');return clientSecret}function assertNoClientPrivateKey(clientAuthMethod,clientPrivateKey){if(void 0!==clientPrivateKey)throw new TypeError(`"options.clientPrivateKey" property must not be provided when ${clientAuthMethod} client authentication method is used.`)}function assertNoClientSecret(clientAuthMethod,clientSecret){if(void 0!==clientSecret)throw new TypeError(`"client.client_secret" property must not be provided when ${clientAuthMethod} client authentication method is used.`)}async function clientAuthentication(as,client,body,headers,clientPrivateKey){switch(body.delete("client_secret"),body.delete("client_assertion_type"),body.delete("client_assertion"),client.token_endpoint_auth_method){case void 0:case"client_secret_basic":assertNoClientPrivateKey("client_secret_basic",clientPrivateKey),headers.set("authorization",function clientSecretBasic(clientId,clientSecret){const username=formUrlEncode(clientId),password=formUrlEncode(clientSecret);return`Basic ${btoa(`${username}:${password}`)}`}(client.client_id,assertClientSecret(client.client_secret)));break;case"client_secret_post":assertNoClientPrivateKey("client_secret_post",clientPrivateKey),body.set("client_id",client.client_id),body.set("client_secret",assertClientSecret(client.client_secret));break;case"private_key_jwt":{if(assertNoClientSecret("private_key_jwt",client.client_secret),void 0===clientPrivateKey)throw new TypeError('"options.clientPrivateKey" must be provided when "client.token_endpoint_auth_method" is "private_key_jwt"');const{key,kid}=getKeyAndKid(clientPrivateKey);if(!isPrivateKey(key))throw new TypeError('"options.clientPrivateKey.key" must be a private CryptoKey');body.set("client_id",client.client_id),body.set("client_assertion_type","urn:ietf:params:oauth:client-assertion-type:jwt-bearer"),body.set("client_assertion",await privateKeyJwt(as,client,key,kid));break}case"none":assertNoClientSecret("none",client.client_secret),assertNoClientPrivateKey("none",clientPrivateKey),body.set("client_id",client.client_id);break;default:throw new UnsupportedOperationError("unsupported client token_endpoint_auth_method")}}async function jwt(header,claimsSet,key){if(!key.usages.includes("sign"))throw new TypeError('CryptoKey instances used for signing assertions must include "sign" in their "usages"');const input=`${b64u(buf(JSON.stringify(header)))}.${b64u(buf(JSON.stringify(claimsSet)))}`;return`${input}.${b64u(await crypto.subtle.sign(keyToSubtle(key),key,buf(input)))}`}async function dpopProofJwt(headers,options,url,htm,clockSkew,accessToken){const{privateKey,publicKey,nonce=dpopNonces.get(url.origin)}=options;if(!isPrivateKey(privateKey))throw new TypeError('"DPoP.privateKey" must be a private CryptoKey');if(!function isPublicKey(key){return build_isCryptoKey(key)&&"public"===key.type}(publicKey))throw new TypeError('"DPoP.publicKey" must be a public CryptoKey');if(void 0!==nonce&&!validateString(nonce))throw new TypeError('"DPoP.nonce" must be a non-empty string or undefined');if(!publicKey.extractable)throw new TypeError('"DPoP.publicKey.extractable" must be true');const now=epochTime()+clockSkew,proof=await jwt({alg:keyToJws(privateKey),typ:"dpop+jwt",jwk:await publicJwk(publicKey)},{iat:now,jti:randomBytes(),htm,nonce,htu:`${url.origin}${url.pathname}`,ath:accessToken?b64u(await crypto.subtle.digest({name:"SHA-256"},buf(accessToken))):void 0},privateKey);headers.set("dpop",proof)}let jwkCache;async function publicJwk(key){if(jwkCache||(jwkCache=new WeakMap),jwkCache.has(key))return jwkCache.get(key);const{kty,e,n,x,y,crv}=await crypto.subtle.exportKey("jwk",key),jwk={kty,e,n,x,y,crv};return jwkCache.set(key,jwk),jwk}function isOAuth2Error(input){const value=input;return"object"==typeof value&&!Array.isArray(value)&&null!==value&&void 0!==value.error}const SPLIT_REGEXP=/((?:,|, )?[0-9a-zA-Z!#$%&'*+-.^_`|~]+=)/,SCHEMES_REGEXP=/(?:^|, ?)([0-9a-zA-Z!#$%&'*+\-.^_`|~]+)(?=$|[ ,])/g;function parseWwwAuthenticateChallenges(response){if(!(response instanceof Response))throw new TypeError('"response" must be an instance of Response');if(!response.headers.has("www-authenticate"))return;const header=response.headers.get("www-authenticate"),result=[];for(const{1:scheme,index}of header.matchAll(SCHEMES_REGEXP))result.push([scheme,index]);if(!result.length)return;const challenges=result.map((([scheme,indexOf],i,others)=>{const next=others[i+1];let parameters;return parameters=next?header.slice(indexOf,next[1]):header.slice(indexOf),function wwwAuth(scheme,params){const arr=params.split(SPLIT_REGEXP).slice(1);if(!arr.length)return{scheme:scheme.toLowerCase(),parameters:{}};arr[arr.length-1]=arr[arr.length-1].replace(/,$/,"");const parameters={};for(let i=1;i<arr.length;i+=2){const idx=i;if('"'===arr[idx][0])for(;'"'!==arr[idx].slice(-1)&&++i<arr.length;)arr[idx]+=arr[i];parameters[arr[idx-1].replace(/^(?:, ?)|=$/g,"").toLowerCase()]=(value=arr[idx]).length>=2&&'"'===value[0]&&'"'===value[value.length-1]?value.slice(1,-1):value}var value;return{scheme:scheme.toLowerCase(),parameters}}(scheme,parameters)}));return challenges}async function userInfoRequest(as,client,accessToken,options){if(assertAs(as),assertClient(client),"string"!=typeof as.userinfo_endpoint)throw new TypeError('"as.userinfo_endpoint" must be a string');const url=new URL(as.userinfo_endpoint),headers=prepareHeaders(options?.headers);return client.userinfo_signed_response_alg?headers.set("accept","application/jwt"):(headers.set("accept","application/json"),headers.append("accept","application/jwt")),async function protectedResourceRequest(accessToken,method,url,headers,body,options){if(!validateString(accessToken))throw new TypeError('"accessToken" must be a non-empty string');if(!(url instanceof URL))throw new TypeError('"url" must be an instance of URL');return headers=prepareHeaders(headers),void 0===options?.DPoP?headers.set("authorization",`Bearer ${accessToken}`):(await dpopProofJwt(headers,options.DPoP,url,"GET",getClockSkew({[clockSkew]:options?.clockSkew}),accessToken),headers.set("authorization",`DPoP ${accessToken}`)),fetch(url.href,{body,headers,method,redirect:"manual",signal:options?.signal?signal(options.signal):null}).then(processDpopNonce)}(accessToken,"GET",url,headers,null,{...options,clockSkew:getClockSkew(client)})}Symbol();async function authenticatedRequest(as,client,method,url,body,headers,options){return await clientAuthentication(as,client,body,headers,options?.clientPrivateKey),headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),fetch(url.href,{body,headers,method,redirect:"manual",signal:options?.signal?signal(options.signal):null}).then(processDpopNonce)}async function tokenEndpointRequest(as,client,grantType,parameters,options){if("string"!=typeof as.token_endpoint)throw new TypeError('"as.token_endpoint" must be a string');const url=new URL(as.token_endpoint);parameters.set("grant_type",grantType);const headers=prepareHeaders(options?.headers);return headers.set("accept","application/json"),void 0!==options?.DPoP&&await dpopProofJwt(headers,options.DPoP,url,"POST",getClockSkew(client)),authenticatedRequest(as,client,"POST",url,parameters,headers,options)}const idTokenClaims=new WeakMap;function getValidatedIdTokenClaims(ref){if(!ref.id_token)return;const claims=idTokenClaims.get(ref);if(!claims)throw new TypeError('"ref" was already garbage collected or did not resolve from the proper sources');return claims}async function processGenericAccessTokenResponse(as,client,response,ignoreIdToken=!1,ignoreRefreshToken=!1){if(assertAs(as),assertClient(client),!(response instanceof Response))throw new TypeError('"response" must be an instance of Response');if(200!==response.status){let err;if(err=await handleOAuthBodyError(response))return err;throw new OPE('"response" is not a conform Token Endpoint response')}let json;assertReadableResponse(response);try{json=await response.json()}catch{throw new OPE('failed to parse "response" body as JSON')}if(!isJsonObject(json))throw new OPE('"response" body must be a top level object');if(!validateString(json.access_token))throw new OPE('"response" body "access_token" property must be a non-empty string');if(!validateString(json.token_type))throw new OPE('"response" body "token_type" property must be a non-empty string');if(json.token_type=json.token_type.toLowerCase(),"dpop"!==json.token_type&&"bearer"!==json.token_type)throw new UnsupportedOperationError("unsupported `token_type` value");if(void 0!==json.expires_in&&("number"!=typeof json.expires_in||json.expires_in<=0))throw new OPE('"response" body "expires_in" property must be a positive number');if(!ignoreRefreshToken&&void 0!==json.refresh_token&&!validateString(json.refresh_token))throw new OPE('"response" body "refresh_token" property must be a non-empty string');if(void 0!==json.scope&&"string"!=typeof json.scope)throw new OPE('"response" body "scope" property must be a string');if(!ignoreIdToken){if(void 0!==json.id_token&&!validateString(json.id_token))throw new OPE('"response" body "id_token" property must be a non-empty string');if(json.id_token){const{claims}=await validateJwt(json.id_token,checkSigningAlgorithm.bind(void 0,client.id_token_signed_response_alg,as.id_token_signing_alg_values_supported),noSignatureCheck,getClockSkew(client),getClockTolerance(client)).then(validatePresence.bind(void 0,["aud","exp","iat","iss","sub"])).then(validateIssuer.bind(void 0,as.issuer)).then(validateAudience.bind(void 0,client.client_id));if(Array.isArray(claims.aud)&&1!==claims.aud.length&&claims.azp!==client.client_id)throw new OPE('unexpected ID Token "azp" (authorized party) claim value');if(client.require_auth_time&&"number"!=typeof claims.auth_time)throw new OPE('unexpected ID Token "auth_time" (authentication time) claim value');idTokenClaims.set(json,claims)}}return json}function validateAudience(expected,result){if(Array.isArray(result.claims.aud)){if(!result.claims.aud.includes(expected))throw new OPE('unexpected JWT "aud" (audience) claim value')}else if(result.claims.aud!==expected)throw new OPE('unexpected JWT "aud" (audience) claim value');return result}function validateIssuer(expected,result){if(result.claims.iss!==expected)throw new OPE('unexpected JWT "iss" (issuer) claim value');return result}const branded=new WeakSet;const claimNames={aud:"audience",exp:"expiration time",iat:"issued at",iss:"issuer",sub:"subject"};function validatePresence(required,result){for(const claim of required)if(void 0===result.claims[claim])throw new OPE(`JWT "${claim}" (${claimNames[claim]}) claim missing`);return result}const expectNoNonce=Symbol(),skipAuthTimeCheck=Symbol();function assertReadableResponse(response){if(response.bodyUsed)throw new TypeError('"response" body has been used already')}async function handleOAuthBodyError(response){if(response.status>399&&response.status<500){assertReadableResponse(response);try{const json=await response.json();if(isJsonObject(json)&&"string"==typeof json.error&&json.error.length)return void 0!==json.error_description&&"string"!=typeof json.error_description&&delete json.error_description,void 0!==json.error_uri&&"string"!=typeof json.error_uri&&delete json.error_uri,void 0!==json.algs&&"string"!=typeof json.algs&&delete json.algs,void 0!==json.scope&&"string"!=typeof json.scope&&delete json.scope,json}catch{}}}function checkRsaKeyAlgorithm(algorithm){if("number"!=typeof algorithm.modulusLength||algorithm.modulusLength<2048)throw new OPE(`${algorithm.name} modulusLength must be at least 2048 bits`)}function ecdsaHashName(namedCurve){switch(namedCurve){case"P-256":return"SHA-256";case"P-384":return"SHA-384";case"P-521":return"SHA-512";default:throw new UnsupportedOperationError}}function keyToSubtle(key){switch(key.algorithm.name){case"ECDSA":return{name:key.algorithm.name,hash:{name:ecdsaHashName(key.algorithm.namedCurve)}};case"RSA-PSS":switch(checkRsaKeyAlgorithm(key.algorithm),key.algorithm.hash.name){case"SHA-256":case"SHA-384":case"SHA-512":return{name:key.algorithm.name,saltLength:parseInt(key.algorithm.hash.name.slice(-3),10)>>3};default:throw new UnsupportedOperationError}case"RSASSA-PKCS1-v1_5":return checkRsaKeyAlgorithm(key.algorithm),{name:key.algorithm.name};case"Ed448":case"Ed25519":return{name:key.algorithm.name}}throw new UnsupportedOperationError}const noSignatureCheck=Symbol();async function validateJwt(jws,checkAlg,getKey,clockSkew,clockTolerance){const{0:protectedHeader,1:payload,2:encodedSignature,length}=jws.split(".");if(5===length)throw new UnsupportedOperationError("JWE structure JWTs are not supported");if(3!==length)throw new OPE("Invalid JWT");let header;try{header=JSON.parse(buf(b64u(protectedHeader)))}catch{throw new OPE("failed to parse JWT Header body as base64url encoded JSON")}if(!isJsonObject(header))throw new OPE("JWT Header must be a top level object");if(checkAlg(header),void 0!==header.crit)throw new OPE('unexpected JWT "crit" header parameter');const signature=b64u(encodedSignature);if(getKey!==noSignatureCheck){const key=await getKey(header),input=`${protectedHeader}.${payload}`;if(!await crypto.subtle.verify(keyToSubtle(key),key,signature,buf(input)))throw new OPE("JWT signature verification failed")}let claims;try{claims=JSON.parse(buf(b64u(payload)))}catch{throw new OPE("failed to parse JWT Payload body as base64url encoded JSON")}if(!isJsonObject(claims))throw new OPE("JWT Payload must be a top level object");const now=epochTime()+clockSkew;if(void 0!==claims.exp){if("number"!=typeof claims.exp)throw new OPE('unexpected JWT "exp" (expiration time) claim type');if(claims.exp<=now-clockTolerance)throw new OPE('unexpected JWT "exp" (expiration time) claim value, timestamp is <= now()')}if(void 0!==claims.iat&&"number"!=typeof claims.iat)throw new OPE('unexpected JWT "iat" (issued at) claim type');if(void 0!==claims.iss&&"string"!=typeof claims.iss)throw new OPE('unexpected JWT "iss" (issuer) claim type');if(void 0!==claims.nbf){if("number"!=typeof claims.nbf)throw new OPE('unexpected JWT "nbf" (not before) claim type');if(claims.nbf>now+clockTolerance)throw new OPE('unexpected JWT "nbf" (not before) claim value, timestamp is > now()')}if(void 0!==claims.aud&&"string"!=typeof claims.aud&&!Array.isArray(claims.aud))throw new OPE('unexpected JWT "aud" (audience) claim type');return{header,claims,signature}}function checkSigningAlgorithm(client,issuer,header){if(void 0===client){if(Array.isArray(issuer)){if(!issuer.includes(header.alg))throw new OPE('unexpected JWT "alg" header parameter')}else if("RS256"!==header.alg)throw new OPE('unexpected JWT "alg" header parameter')}else if(header.alg!==client)throw new OPE('unexpected JWT "alg" header parameter')}function getURLSearchParameter(parameters,name){const{0:value,length}=parameters.getAll(name);if(length>1)throw new OPE(`"${name}" parameter must be provided only once`);return value}const skipStateCheck=Symbol(),expectNoState=Symbol();function validateAuthResponse(as,client,parameters,expectedState){if(assertAs(as),assertClient(client),parameters instanceof URL&&(parameters=parameters.searchParams),!(parameters instanceof URLSearchParams))throw new TypeError('"parameters" must be an instance of URLSearchParams, or URL');if(getURLSearchParameter(parameters,"response"))throw new OPE('"parameters" contains a JARM response, use validateJwtAuthResponse() instead of validateAuthResponse()');const iss=getURLSearchParameter(parameters,"iss"),state=getURLSearchParameter(parameters,"state");if(!iss&&as.authorization_response_iss_parameter_supported)throw new OPE('response parameter "iss" (issuer) missing');if(iss&&iss!==as.issuer)throw new OPE('unexpected "iss" (issuer) response parameter value');switch(expectedState){case void 0:case expectNoState:if(void 0!==state)throw new OPE('unexpected "state" response parameter encountered');break;case skipStateCheck:break;default:if(!validateString(expectedState))throw new OPE('"expectedState" must be a non-empty string');if(void 0===state)throw new OPE('response parameter "state" missing');if(state!==expectedState)throw new OPE('unexpected "state" response parameter value')}const error=getURLSearchParameter(parameters,"error");if(error)return{error,error_description:getURLSearchParameter(parameters,"error_description"),error_uri:getURLSearchParameter(parameters,"error_uri")};const id_token=getURLSearchParameter(parameters,"id_token"),token=getURLSearchParameter(parameters,"token");if(void 0!==id_token||void 0!==token)throw new UnsupportedOperationError("implicit and hybrid flows are not supported");return function brand(searchParams){return branded.add(searchParams),searchParams}(new URLSearchParams(parameters))}async function signCookie(type,value,maxAge,options,data){const{cookies,logger}=options;logger.debug(`CREATE_${type.toUpperCase()}`,{value,maxAge});const expires=new Date;expires.setTime(expires.getTime()+1e3*maxAge);const token={value};return"state"===type&&data&&(token.data=data),{name:cookies[type].name,value:await jwt_encode({...options.jwt,maxAge,token}),options:{...cookies[type].options,expires}}}const pkce={async create(options){const code_verifier=function generateRandomCodeVerifier(){return randomBytes()}(),value=await async function calculatePKCECodeChallenge(codeVerifier){if(!validateString(codeVerifier))throw new TypeError('"codeVerifier" must be a non-empty string');return b64u(await crypto.subtle.digest({name:"SHA-256"},buf(codeVerifier)))}(code_verifier);return{cookie:await signCookie("pkceCodeVerifier",code_verifier,900,options),value}},async use(cookies,resCookies,options){const{provider}=options;if(!provider?.checks?.includes("pkce"))return;const codeVerifier=cookies?.[options.cookies.pkceCodeVerifier.name];if(!codeVerifier)throw new errors.gS("PKCE code_verifier cookie was missing.");const value=await jwt_decode({...options.jwt,token:codeVerifier});if(!value?.value)throw new errors.gS("PKCE code_verifier value could not be parsed.");return resCookies.push({name:options.cookies.pkceCodeVerifier.name,value:"",options:{...options.cookies.pkceCodeVerifier.options,maxAge:0}}),value.value}};function decodeState(value){try{const decoder=new TextDecoder;return JSON.parse(decoder.decode(base64url_decode(value)))}catch{}}const checks_state={async create(options,data){const{provider}=options;if(!provider.checks.includes("state")){if(data)throw new errors.gS("State data was provided but the provider is not configured to use state.");return}const encodedState=base64url_encode(JSON.stringify({...data,random:randomBytes()}));return{cookie:await signCookie("state",encodedState,900,options,data),value:encodedState}},async use(cookies,resCookies,options,paramRandom){const{provider}=options;if(!provider.checks.includes("state"))return;const state=cookies?.[options.cookies.state.name];if(!state)throw new errors.gS("State cookie was missing.");const encodedState=await jwt_decode({...options.jwt,token:state});if(!encodedState?.value)throw new errors.gS("State (cookie) value could not be parsed.");const decodedState=decodeState(encodedState.value);if(!decodedState)throw new errors.gS("State (encoded) value could not be parsed.");if(decodedState.random!==paramRandom)throw new errors.gS(`Random state values did not match. Expected: ${decodedState.random}. Got: ${paramRandom}`);return resCookies.push({name:options.cookies.state.name,value:"",options:{...options.cookies.state.options,maxAge:0}}),encodedState.value}},checks_nonce={async create(options){if(!options.provider.checks.includes("nonce"))return;const value=function generateRandomNonce(){return randomBytes()}();return{cookie:await signCookie("nonce",value,900,options),value}},async use(cookies,resCookies,options){const{provider}=options;if(!provider?.checks?.includes("nonce"))return;const nonce=cookies?.[options.cookies.nonce.name];if(!nonce)throw new errors.gS("Nonce cookie was missing.");const value=await jwt_decode({...options.jwt,token:nonce});if(!value?.value)throw new errors.gS("Nonce value could not be parsed.");return resCookies.push({name:options.cookies.nonce.name,value:"",options:{...options.cookies.nonce.options,maxAge:0}}),value.value}};var callback_console=__webpack_require__("./node_modules/console-browserify/index.js");async function handleOAuth(query,cookies,options,randomState){const{logger,provider}=options;let as;const{token,userinfo}=provider;if(token?.url&&"authjs.dev"!==token.url.host||userinfo?.url&&"authjs.dev"!==userinfo.url.host)as={issuer:provider.issuer??"https://authjs.dev",token_endpoint:token?.url.toString(),userinfo_endpoint:userinfo?.url.toString()};else{const issuer=new URL(provider.issuer),discoveryResponse=await discoveryRequest(issuer),discoveredAs=await processDiscoveryResponse(issuer,discoveryResponse);if(!discoveredAs.token_endpoint)throw new TypeError("TODO: Authorization server did not provide a token endpoint.");if(!discoveredAs.userinfo_endpoint)throw new TypeError("TODO: Authorization server did not provide a userinfo endpoint.");as=discoveredAs}const client={client_id:provider.clientId,client_secret:provider.clientSecret,...provider.client},resCookies=[],state=await checks_state.use(cookies,resCookies,options,randomState),codeGrantParams=validateAuthResponse(as,client,new URLSearchParams(query),provider.checks.includes("state")?state:skipStateCheck);if(isOAuth2Error(codeGrantParams)){const cause={providerId:provider.id,...codeGrantParams};throw logger.debug("OAuthCallbackError",cause),new errors.iV("OAuth Provider returned an error",cause)}const codeVerifier=await pkce.use(cookies,resCookies,options);let redirect_uri=provider.callbackUrl;!options.isOnRedirectProxy&&provider.redirectProxyUrl&&(redirect_uri=provider.redirectProxyUrl);let challenges,codeGrantResponse=await async function authorizationCodeGrantRequest(as,client,callbackParameters,redirectUri,codeVerifier,options){if(assertAs(as),assertClient(client),!branded.has(callbackParameters))throw new TypeError('"callbackParameters" must be an instance of URLSearchParams obtained from "validateAuthResponse()", or "validateJwtAuthResponse()');if(!validateString(redirectUri))throw new TypeError('"redirectUri" must be a non-empty string');if(!validateString(codeVerifier))throw new TypeError('"codeVerifier" must be a non-empty string');const code=getURLSearchParameter(callbackParameters,"code");if(!code)throw new OPE('no authorization code in "callbackParameters"');const parameters=new URLSearchParams(options?.additionalParameters);return parameters.set("redirect_uri",redirectUri),parameters.set("code_verifier",codeVerifier),parameters.set("code",code),tokenEndpointRequest(as,client,"authorization_code",parameters,options)}(as,client,codeGrantParams,redirect_uri,codeVerifier??"auth");if(provider.token?.conform&&(codeGrantResponse=await provider.token.conform(codeGrantResponse.clone())??codeGrantResponse),challenges=parseWwwAuthenticateChallenges(codeGrantResponse)){for(const challenge of challenges)callback_console.log("challenge",challenge);throw new Error("TODO: Handle www-authenticate challenges as needed")}let tokens,profile={};if("oidc"===provider.type){const nonce=await checks_nonce.use(cookies,resCookies,options),result=await async function processAuthorizationCodeOpenIDResponse(as,client,response,expectedNonce,maxAge){const result=await processGenericAccessTokenResponse(as,client,response);if(isOAuth2Error(result))return result;if(!validateString(result.id_token))throw new OPE('"response" body "id_token" property must be a non-empty string');maxAge??(maxAge=client.default_max_age??skipAuthTimeCheck);const claims=getValidatedIdTokenClaims(result);if((client.require_auth_time||maxAge!==skipAuthTimeCheck)&&void 0===claims.auth_time)throw new OPE('ID Token "auth_time" (authentication time) claim missing');if(maxAge!==skipAuthTimeCheck){if("number"!=typeof maxAge||maxAge<0)throw new TypeError('"options.max_age" must be a non-negative number');const now=epochTime()+getClockSkew(client),tolerance=getClockTolerance(client);if(claims.auth_time+maxAge<now-tolerance)throw new OPE("too much time has elapsed since the last End-User authentication")}switch(expectedNonce){case void 0:case expectNoNonce:if(void 0!==claims.nonce)throw new OPE('unexpected ID Token "nonce" claim value');break;default:if(!validateString(expectedNonce))throw new TypeError('"expectedNonce" must be a non-empty string');if(void 0===claims.nonce)throw new OPE('ID Token "nonce" claim missing');if(claims.nonce!==expectedNonce)throw new OPE('unexpected ID Token "nonce" claim value')}return result}(as,client,codeGrantResponse,nonce??expectNoNonce);if(isOAuth2Error(result))throw callback_console.log("error",result),new Error("TODO: Handle OIDC response body error");profile=getValidatedIdTokenClaims(result),tokens=result}else{if(tokens=await async function processAuthorizationCodeOAuth2Response(as,client,response){const result=await processGenericAccessTokenResponse(as,client,response,!0);if(isOAuth2Error(result))return result;if(void 0!==result.id_token){if("string"==typeof result.id_token&&result.id_token.length)throw new OPE("Unexpected ID Token returned, use processAuthorizationCodeOpenIDResponse() for OpenID Connect callback processing");delete result.id_token}return result}(as,client,codeGrantResponse),isOAuth2Error(tokens))throw callback_console.log("error",tokens),new Error("TODO: Handle OAuth 2.0 response body error");if(userinfo?.request){const _profile=await userinfo.request({tokens,provider});_profile instanceof Object&&(profile=_profile)}else{if(!userinfo?.url)throw new TypeError("No userinfo endpoint configured");{const userinfoResponse=await userInfoRequest(as,client,tokens.access_token);profile=await userinfoResponse.json()}}}tokens.expires_in&&(tokens.expires_at=Math.floor(Date.now()/1e3)+Number(tokens.expires_in));const profileResult=await async function getUserAndAccount(OAuthProfile,provider,tokens,logger){try{const user=await provider.profile(OAuthProfile,tokens);if(user.email=user.email?.toLowerCase(),!user.id)throw new TypeError(`User id is missing in ${provider.name} OAuth profile response`);return{user,account:{provider:provider.id,type:provider.type,providerAccountId:user.id.toString(),...tokens}}}catch(e){logger.debug("getProfile error details",OAuthProfile),logger.error(new errors.X0(e,{provider:provider.id}))}}(profile,provider,tokens,logger);return{...profileResult,profile,cookies:resCookies}}async function handleAuthorized(params,{url,logger,callbacks:{signIn}}){try{if(!await signIn(params))return url.pathname+="/error",logger.debug("User not authorized",params),url.searchParams.set("error","AccessDenied"),{status:403,redirect:url.toString()}}catch(e){url.pathname+="/error";const error=new errors.NX(e);return logger.error(error),url.searchParams.set("error","Configuration"),{status:500,redirect:url.toString()}}}async function callback_callback(params){const{options,query,body,method,headers,sessionStore}=params,{provider,adapter,url,callbackUrl,pages,jwt,events,callbacks,session:{strategy:sessionStrategy,maxAge:sessionMaxAge},logger}=options,cookies=[],useJwtSession="jwt"===sessionStrategy;try{if("oauth"===provider.type||"oidc"===provider.type){const{proxyRedirect,randomState}=function handleState(query,provider,isOnRedirectProxy){let randomState,proxyRedirect;if(provider.redirectProxyUrl&&!query?.state)throw new errors.gS("Missing state in query, but required for redirect proxy");const state=decodeState(query?.state);if(randomState=state?.random,isOnRedirectProxy){if(!state?.origin)return{randomState};proxyRedirect=`${state.origin}?${new URLSearchParams(query)}`}return{randomState,proxyRedirect}}(query,provider,options.isOnRedirectProxy);if(proxyRedirect)return logger.debug("proxy redirect",{proxyRedirect,randomState}),{redirect:proxyRedirect};const authorizationResult=await handleOAuth(query,params.cookies,options,randomState);authorizationResult.cookies.length&&cookies.push(...authorizationResult.cookies),logger.debug("authorization result",authorizationResult);const{user:userFromProvider,account,profile:OAuthProfile}=authorizationResult;if(!userFromProvider||!account||!OAuthProfile)return{redirect:`${url}/signin`,cookies};let userByAccountOrFromProvider;if(adapter){const{getUserByAccount}=adapter,userByAccount=await getUserByAccount({providerAccountId:account.providerAccountId,provider:provider.id});userByAccount&&(userByAccountOrFromProvider=userByAccount)}const unauthorizedOrError=await handleAuthorized({user:userByAccountOrFromProvider,account,profile:OAuthProfile},options);if(unauthorizedOrError)return{...unauthorizedOrError,cookies};const{user,session,isNewUser}=await handleLogin(sessionStore.value,userFromProvider,account,options);if(useJwtSession){const defaultToken={name:user.name,email:user.email,picture:user.image,sub:user.id?.toString()},token=await callbacks.jwt({token:defaultToken,user,account,profile:OAuthProfile,isNewUser,trigger:isNewUser?"signUp":"signIn"});if(null===token)cookies.push(...sessionStore.clean());else{const newToken=await jwt.encode({...jwt,token}),cookieExpires=new Date;cookieExpires.setTime(cookieExpires.getTime()+1e3*sessionMaxAge);const sessionCookies=sessionStore.chunk(newToken,{expires:cookieExpires});cookies.push(...sessionCookies)}}else cookies.push({name:options.cookies.sessionToken.name,value:session.sessionToken,options:{...options.cookies.sessionToken.options,expires:session.expires}});return await(events.signIn?.({user,account,profile:OAuthProfile,isNewUser})),isNewUser&&pages.newUser?{redirect:`${pages.newUser}${pages.newUser.includes("?")?"&":"?"}${new URLSearchParams({callbackUrl})}`,cookies}:{redirect:callbackUrl,cookies}}if("email"===provider.type){const token=query?.token,identifier=query?.email;if(!token||!identifier){const e=new TypeError("Missing token or email. The sign-in URL was manually opened without token/identifier or the link was not sent correctly in the email.",{cause:{hasToken:!!token,hasEmail:!!identifier}});throw e.name="Configuration",e}const secret=provider.secret??options.secret,invite=await adapter.useVerificationToken({identifier,token:await createHash(`${token}${secret}`)}),hasInvite=!!invite,expired=invite?invite.expires.valueOf()<Date.now():void 0;if(!hasInvite||expired)throw new errors.GX({hasInvite,expired});const user=await adapter.getUserByEmail(identifier)??{id:identifier,email:identifier,emailVerified:null},account={providerAccountId:user.email,userId:user.id,type:"email",provider:provider.id},unauthorizedOrError=await handleAuthorized({user,account},options);if(unauthorizedOrError)return{...unauthorizedOrError,cookies};const{user:loggedInUser,session,isNewUser}=await handleLogin(sessionStore.value,user,account,options);if(useJwtSession){const defaultToken={name:loggedInUser.name,email:loggedInUser.email,picture:loggedInUser.image,sub:loggedInUser.id?.toString()},token=await callbacks.jwt({token:defaultToken,user:loggedInUser,account,isNewUser,trigger:isNewUser?"signUp":"signIn"});if(null===token)cookies.push(...sessionStore.clean());else{const newToken=await jwt.encode({...jwt,token}),cookieExpires=new Date;cookieExpires.setTime(cookieExpires.getTime()+1e3*sessionMaxAge);const sessionCookies=sessionStore.chunk(newToken,{expires:cookieExpires});cookies.push(...sessionCookies)}}else cookies.push({name:options.cookies.sessionToken.name,value:session.sessionToken,options:{...options.cookies.sessionToken.options,expires:session.expires}});return await(events.signIn?.({user:loggedInUser,account,isNewUser})),isNewUser&&pages.newUser?{redirect:`${pages.newUser}${pages.newUser.includes("?")?"&":"?"}${new URLSearchParams({callbackUrl})}`,cookies}:{redirect:callbackUrl,cookies}}if("credentials"===provider.type&&"POST"===method){const credentials=body??{};Object.entries(query??{}).forEach((([k,v])=>url.searchParams.set(k,v)));const user=await provider.authorize(credentials,new Request(url,{headers,method,body:JSON.stringify(body)}));if(!user)return{status:401,redirect:`${url}/error?${new URLSearchParams({error:"CredentialsSignin",provider:provider.id})}`,cookies};const account={providerAccountId:user.id,type:"credentials",provider:provider.id},unauthorizedOrError=await handleAuthorized({user,account,credentials},options);if(unauthorizedOrError)return{...unauthorizedOrError,cookies};const defaultToken={name:user.name,email:user.email,picture:user.image,sub:user.id?.toString()},token=await callbacks.jwt({token:defaultToken,user,account,isNewUser:!1,trigger:"signIn"});if(null===token)cookies.push(...sessionStore.clean());else{const newToken=await jwt.encode({...jwt,token}),cookieExpires=new Date;cookieExpires.setTime(cookieExpires.getTime()+1e3*sessionMaxAge);const sessionCookies=sessionStore.chunk(newToken,{expires:cookieExpires});cookies.push(...sessionCookies)}return await(events.signIn?.({user,account})),{redirect:callbackUrl,cookies}}return{status:500,body:`Error: Callback for provider type ${provider.type} not supported`,cookies}}catch(e){if(e instanceof errors.iV)return logger.error(e),url.searchParams.set("error",errors.iV.name),url.pathname+="/signin",{redirect:url.toString(),cookies};const error=new errors.Ng(e,{provider:provider.id});return logger.debug("callback route error details",{method,query,body}),logger.error(error),url.searchParams.set("error",errors.Ng.name),url.pathname+="/error",{redirect:url.toString(),cookies}}}async function session_session(params){const{options,sessionStore,newSession,isUpdate}=params,{adapter,jwt,events,callbacks,logger,session:{strategy:sessionStrategy,maxAge:sessionMaxAge}}=options,response={body:null,headers:{"Content-Type":"application/json"},cookies:[]},sessionToken=sessionStore.value;if(!sessionToken)return response;if("jwt"===sessionStrategy){try{const decodedToken=await jwt.decode({...jwt,token:sessionToken});if(!decodedToken)throw new Error("Invalid JWT");const token=await callbacks.jwt({token:decodedToken,...isUpdate&&{trigger:"update"},session:newSession}),newExpires=fromDate(sessionMaxAge);if(null!==token){const session={user:{name:token.name,email:token.email,image:token.picture},expires:newExpires.toISOString()},newSession=await callbacks.session({session,token});response.body=newSession;const newToken=await jwt.encode({...jwt,token}),sessionCookies=sessionStore.chunk(newToken,{expires:newExpires});response.cookies?.push(...sessionCookies),await(events.session?.({session:newSession,token}))}else response.cookies?.push(...sessionStore.clean())}catch(e){logger.error(new errors.xo(e)),response.cookies?.push(...sessionStore.clean())}return response}try{const{getSessionAndUser,deleteSession,updateSession}=adapter;let userAndSession=await getSessionAndUser(sessionToken);if(userAndSession&&userAndSession.session.expires.valueOf()<Date.now()&&(await deleteSession(sessionToken),userAndSession=null),userAndSession){const{user,session}=userAndSession,sessionUpdateAge=options.session.updateAge,sessionIsDueToBeUpdatedDate=session.expires.valueOf()-1e3*sessionMaxAge+1e3*sessionUpdateAge,newExpires=fromDate(sessionMaxAge);sessionIsDueToBeUpdatedDate<=Date.now()&&await updateSession({sessionToken,expires:newExpires});const sessionPayload=await callbacks.session({session:{user:{name:user.name,email:user.email,image:user.image},expires:session.expires.toISOString()},user,newSession,...isUpdate?{trigger:"update"}:{}});response.body=sessionPayload,response.cookies?.push({name:options.cookies.sessionToken.name,value:sessionToken,options:{...options.cookies.sessionToken.options,expires:newExpires}}),await(events.session?.({session:sessionPayload}))}else sessionToken&&response.cookies?.push(...sessionStore.clean())}catch(e){logger.error(new errors.li(e))}return response}async function signin_signin(request,options){const{query,body}=request,{url,logger,provider}=options;try{if("oauth"===provider.type||"oidc"===provider.type)return await async function getAuthorizationUrl(query,options){const{logger,provider}=options;let url=provider.authorization?.url;if(!url||"authjs.dev"===url.host){const issuer=new URL(provider.issuer),discoveryResponse=await discoveryRequest(issuer),as=await processDiscoveryResponse(issuer,discoveryResponse);if(!as.authorization_endpoint)throw new TypeError("Authorization server did not provide an authorization endpoint.");url=new URL(as.authorization_endpoint)}const authParams=url.searchParams;let data,redirect_uri=provider.callbackUrl;!options.isOnRedirectProxy&&provider.redirectProxyUrl&&(redirect_uri=provider.redirectProxyUrl,data={origin:provider.callbackUrl},logger.debug("using redirect proxy",{redirect_uri,data}));const params=Object.assign({response_type:"code",client_id:provider.clientId,redirect_uri,...provider.authorization?.params},Object.fromEntries(provider.authorization?.url.searchParams??[]),query);for(const k in params)authParams.set(k,params[k]);const cookies=[],state=await checks_state.create(options,data);if(state&&(authParams.set("state",state.value),cookies.push(state.cookie)),provider.checks?.includes("pkce")){const{value,cookie}=await pkce.create(options);authParams.set("code_challenge",value),authParams.set("code_challenge_method","S256"),cookies.push(cookie)}const nonce=await checks_nonce.create(options);return nonce&&(authParams.set("nonce",nonce.value),cookies.push(nonce.cookie)),"oidc"!==provider.type||url.searchParams.has("scope")||url.searchParams.set("scope","openid profile email"),logger.debug("authorization url is ready",{url,cookies,provider}),{redirect:url.toString(),cookies}}(query,options);if("email"===provider.type){const email=(provider.normalizeIdentifier??defaultNormalizer)(body?.email),user=await options.adapter.getUserByEmail(email)??{id:email,email,emailVerified:null},account={providerAccountId:email,userId:user.id,type:"email",provider:provider.id},unauthorizedOrError=await handleAuthorized({user,account,email:{verificationRequest:!0}},options);if(unauthorizedOrError)return unauthorizedOrError;const redirect=await async function signin_email(identifier,options,request){const{url,adapter,provider,callbackUrl,theme}=options,token=await(provider.generateVerificationToken?.())??randomString(32),expires=new Date(Date.now()+1e3*(provider.maxAge??86400)),params=new URLSearchParams({callbackUrl,token,email:identifier}),_url=`${url}/callback/${provider.id}?${params}`,secret=provider.secret??options.secret;return await Promise.all([provider.sendVerificationRequest({identifier,token,expires,url:_url,provider,theme,request:toRequest(request)}),adapter.createVerificationToken?.({identifier,token:await createHash(`${token}${secret}`),expires})]),`${url}/verify-request?${new URLSearchParams({provider:provider.id,type:provider.type})}`}(email,options,request);return{redirect}}return{redirect:`${url}/signin`}}catch(e){const error=new errors.wK(e,{provider:provider.id});logger.error(error);const code="email"===provider.type?"EmailSignin":"OAuthSignin";return url.searchParams.set("error",code),url.pathname+="/signin",{redirect:url.toString()}}}function defaultNormalizer(email){if(!email)throw new Error("Missing email from request body.");let[local,domain]=email.toLowerCase().trim().split("@");return domain=domain.split(",")[0],`${local}@${domain}`}async function AuthInternal(request,authOptions){const{action,providerId,error,method}=request,csrfDisabled=authOptions.skipCSRFCheck===skipCSRFCheck,{options,cookies}=await init({authOptions,action,providerId,url:request.url,callbackUrl:request.body?.callbackUrl??request.query?.callbackUrl,csrfToken:request.body?.csrfToken,cookies:request.cookies,isPost:"POST"===method,csrfDisabled}),sessionStore=new cookie_SessionStore(options.cookies.sessionToken,request,options.logger);if("GET"===method){const render=renderPage({...options,query:request.query,cookies}),{pages}=options;switch(action){case"providers":return await function providers(providers){return{headers:{"Content-Type":"application/json"},body:providers.reduce(((acc,{id,name,type,signinUrl,callbackUrl})=>(acc[id]={id,name,type,signinUrl,callbackUrl},acc)),{})}}(options.providers);case"session":{const session=await session_session({sessionStore,options});return session.cookies&&cookies.push(...session.cookies),{...session,cookies}}case"csrf":return csrfDisabled?(options.logger.warn("csrf-disabled"),cookies.push({name:options.cookies.csrfToken.name,value:"",options:{...options.cookies.csrfToken.options,maxAge:0}}),{status:404,cookies}):{headers:{"Content-Type":"application/json"},body:{csrfToken:options.csrfToken},cookies};case"signin":if(pages.signIn){let signinUrl=`${pages.signIn}${pages.signIn.includes("?")?"&":"?"}${new URLSearchParams({callbackUrl:options.callbackUrl})}`;return error&&(signinUrl=`${signinUrl}&${new URLSearchParams({error})}`),{redirect:signinUrl,cookies}}return render.signin();case"signout":return pages.signOut?{redirect:pages.signOut,cookies}:render.signout();case"callback":if(options.provider){const callback=await callback_callback({body:request.body,query:request.query,headers:request.headers,cookies:request.cookies,method,options,sessionStore});return callback.cookies&&cookies.push(...callback.cookies),{...callback,cookies}}break;case"verify-request":return pages.verifyRequest?{redirect:pages.verifyRequest,cookies}:render.verifyRequest();case"error":return["Signin","OAuthCreateAccount","EmailCreateAccount","Callback","OAuthAccountNotLinked","SessionRequired"].includes(error)?{redirect:`${options.url}/signin?error=${error}`,cookies}:pages.error?{redirect:`${pages.error}${pages.error.includes("?")?"&":"?"}error=${error}`,cookies}:render.error({error})}}else switch(action){case"signin":if((csrfDisabled||options.csrfTokenVerified)&&options.provider){const signin=await signin_signin(request,options);return signin.cookies&&cookies.push(...signin.cookies),{...signin,cookies}}return{redirect:`${options.url}/signin?csrf=true`,cookies};case"signout":if(csrfDisabled||options.csrfTokenVerified){const signout=await async function signout_signout(sessionStore,options){const{jwt,events,callbackUrl:redirect,logger,session}=options,sessionToken=sessionStore.value;if(!sessionToken)return{redirect};try{if("jwt"===session.strategy){const token=await jwt.decode({...jwt,token:sessionToken});await(events.signOut?.({token}))}else{const session=await(options.adapter?.deleteSession(sessionToken));await(events.signOut?.({session}))}}catch(e){logger.error(new errors.V1(e))}return{redirect,cookies:sessionStore.clean()}}(sessionStore,options);return signout.cookies&&cookies.push(...signout.cookies),{...signout,cookies}}return{redirect:`${options.url}/signout?csrf=true`,cookies};case"callback":if(options.provider){if("credentials"===options.provider.type&&!csrfDisabled&&!options.csrfTokenVerified)return{redirect:`${options.url}/signin?csrf=true`,cookies};const callback=await callback_callback({body:request.body,query:request.query,headers:request.headers,cookies:request.cookies,method,options,sessionStore});return callback.cookies&&cookies.push(...callback.cookies),{...callback,cookies}}break;case"session":if(options.csrfTokenVerified){const session=await session_session({options,sessionStore,newSession:request.body?.data,isUpdate:!0});return session.cookies&&cookies.push(...session.cookies),{...session,cookies}}return{status:400,cookies}}throw new errors.D7(`Cannot handle action: ${action}`)}const skipCSRFCheck=Symbol("skip-csrf-check"),raw=Symbol("return-type-raw");async function Auth(request,config){!function setLogger(newLogger={},debug){debug||(logger.debug=()=>{}),newLogger.error&&(logger.error=newLogger.error),newLogger.warn&&(logger.warn=newLogger.warn),newLogger.debug&&(logger.debug=newLogger.debug)}(config.logger,config.debug);const internalRequest=await async function toInternalRequest(req){try{const url=new URL(req.url.replace(/\/$/,""));url.searchParams.delete("nextauth");const pathname=url.pathname.replace(/\/$/,""),action=actions.find((a=>pathname.includes(a)));if(!action)throw new errors.D7(`Cannot detect action in pathname (${pathname}).`);if("GET"!==req.method&&"POST"!==req.method)throw new errors.D7("Only GET and POST requests are supported.");const providerIdOrAction=pathname.split("/").pop();let providerId;return providerIdOrAction&&!action.includes(providerIdOrAction)&&["signin","callback"].includes(action)&&(providerId=providerIdOrAction),{url,action,providerId,method:req.method,headers:Object.fromEntries(req.headers),body:req.body?await getBody(req):void 0,cookies:(0,node_modules_cookie.Q)(req.headers.get("cookie")??"")??{},error:url.searchParams.get("error")??void 0,query:Object.fromEntries(url.searchParams)}}catch(e){return e}}(request);if(internalRequest instanceof Error)return logger.error(internalRequest),new Response(`Error: This action with HTTP ${request.method} is not supported.`,{status:400});const assertionResult=function assertConfig(request,options){const{url}=request,warnings=[];if(!warned&&options.debug&&warnings.push("debug-enabled"),!options.trustHost)return new errors.kA(`Host must be trusted. URL was: ${request.url}`);if(!options.secret)return new errors.yv("Please define a `secret`.");const callbackUrlParam=request.query?.callbackUrl;if(callbackUrlParam&&!isValidHttpUrl(callbackUrlParam,url.origin))return new errors.k7(`Invalid callback URL. Received: ${callbackUrlParam}`);const{callbackUrl:defaultCallbackUrl}=defaultCookies(options.useSecureCookies??"https:"===url.protocol),callbackUrlCookie=request.cookies?.[options.cookies?.callbackUrl?.name??defaultCallbackUrl.name];if(callbackUrlCookie&&!isValidHttpUrl(callbackUrlCookie,url.origin))return new errors.k7(`Invalid callback URL. Received: ${callbackUrlCookie}`);for(const p of options.providers){const provider="function"==typeof p?p():p;if(("oauth"===provider.type||"oidc"===provider.type)&&!(provider.issuer??provider.options?.issuer)){const{authorization:a,token:t,userinfo:u}=provider;let key;if("string"==typeof a||a?.url?"string"==typeof t||t?.url?"string"==typeof u||u?.url||(key="userinfo"):key="token":key="authorization",key)return new errors.Hi(`Provider "${provider.id}" is missing both \`issuer\` and \`${key}\` endpoint config. At least one of them is required.`)}"credentials"===provider.type?hasCredentials=!0:"email"===provider.type&&(hasEmail=!0)}if(hasCredentials){const dbStrategy="database"===options.session?.strategy,onlyCredentials=!options.providers.some((p=>"credentials"!==("function"==typeof p?p():p).type));if(dbStrategy&&onlyCredentials)return new errors.lA("Signin in with credentials only supported if JWT strategy is enabled");const credentialsNoAuthorize=options.providers.some((p=>{const provider="function"==typeof p?p():p;return"credentials"===provider.type&&!provider.authorize}));if(credentialsNoAuthorize)return new errors.yQ("Must define an authorize() handler to use credentials authentication provider")}const{adapter,session}=options;if(hasEmail||"database"===session?.strategy||!session?.strategy&&adapter){let methods;if(hasEmail){if(!adapter)return new errors.Xp("Email login requires an adapter.");methods=emailMethods}else{if(!adapter)return new errors.Xp("Database session requires an adapter.");methods=sessionMethods}const missing=methods.filter((m=>!adapter[m]));if(missing.length)return new errors.xP(`Required adapter methods were missing: ${missing.join(", ")}`)}return warned||(warned=!0),warnings}(internalRequest,config);if(Array.isArray(assertionResult))assertionResult.forEach(logger.warn);else if(assertionResult instanceof Error){logger.error(assertionResult);if(!["signin","signout","error","verify-request"].includes(internalRequest.action)||"GET"!==internalRequest.method)return new Response(JSON.stringify({message:"There was a problem with the server configuration. Check the server logs for more information.",code:assertionResult.name}),{status:500,headers:{"Content-Type":"application/json"}});const{pages,theme}=config,authOnErrorPage=pages?.error&&internalRequest.url.searchParams.get("callbackUrl")?.startsWith(pages.error);if(!pages?.error||authOnErrorPage){authOnErrorPage&&logger.error(new errors.Mq(`The error page ${pages?.error} should not require authentication`));return toResponse(renderPage({theme}).error({error:"Configuration"}))}return Response.redirect(`${pages.error}?error=Configuration`)}const internalResponse=await AuthInternal(internalRequest,config);if(config.raw===raw)return internalResponse;const response=await toResponse(internalResponse),redirect=response.headers.get("Location");return request.headers.has("X-Auth-Return-Redirect")&&redirect?(response.headers.delete("Location"),response.headers.set("Content-Type","application/json"),new Response(JSON.stringify({url:redirect}),{headers:response.headers})):response}var env_process=__webpack_require__("./node_modules/process/browser.js");const providersEnv={"42-school":[env_process.env.AUTH_42_SCHOOL_ID,env_process.env.AUTH_42_SCHOOL_SECRET,env_process.env.AUTH_42_SCHOOL_ISSUER],apple:[env_process.env.AUTH_APPLE_ID,env_process.env.AUTH_APPLE_SECRET,env_process.env.AUTH_APPLE_ISSUER],asgardeo:[env_process.env.AUTH_ASGARDEO_ID,env_process.env.AUTH_ASGARDEO_SECRET,env_process.env.AUTH_ASGARDEO_ISSUER],atlassian:[env_process.env.AUTH_ATLASSIAN_ID,env_process.env.AUTH_ATLASSIAN_SECRET,env_process.env.AUTH_ATLASSIAN_ISSUER],auth0:[env_process.env.AUTH_AUTH0_ID,env_process.env.AUTH_AUTH0_SECRET,env_process.env.AUTH_AUTH0_ISSUER],authentik:[env_process.env.AUTH_AUTHENTIK_ID,env_process.env.AUTH_AUTHENTIK_SECRET,env_process.env.AUTH_AUTHENTIK_ISSUER],"azure-ad":[env_process.env.AUTH_AAD_ID,env_process.env.AUTH_AAD_SECRET,env_process.env.AUTH_AAD_ISSUER],"azure-ad-b2c":[env_process.env.AUTH_AAD_B2C_ID,env_process.env.AUTH_AAD_B2C_SECRET,env_process.env.AUTH_AAD_B2C_ISSUER],battlenet:[env_process.env.AUTH_BATTLENET_ID,env_process.env.AUTH_BATTLENET_SECRET,env_process.env.AUTH_BATTLENET_ISSUER],beyondidentity:[env_process.env.AUTH_BEYOND_IDENTITY_ID,env_process.env.AUTH_BEYOND_IDENTITY_SECRET,env_process.env.AUTH_BEYOND_IDENTITY_ISSUER],box:[env_process.env.AUTH_BOX_ID,env_process.env.AUTH_BOX_SECRET,env_process.env.AUTH_BOX_ISSUER],"boxyhq-saml":[env_process.env.AUTH_BOXYHQ_SAML_ID,env_process.env.AUTH_BOXYHQ_SAML_SECRET,env_process.env.AUTH_BOXYHQ_SAML_ISSUER],bungie:[env_process.env.AUTH_BUNGIE_ID,env_process.env.AUTH_BUNGIE_SECRET,env_process.env.AUTH_BUNGIE_ISSUER],cognito:[env_process.env.AUTH_COGNITO_ID,env_process.env.AUTH_COGNITO_SECRET,env_process.env.AUTH_COGNITO_ISSUER],coinbase:[env_process.env.AUTH_COINBASE_ID,env_process.env.AUTH_COINBASE_SECRET,env_process.env.AUTH_COINBASE_ISSUER],discord:[env_process.env.AUTH_DISCORD_ID,env_process.env.AUTH_DISCORD_SECRET,env_process.env.AUTH_DISCORD_ISSUER],dropbox:[env_process.env.AUTH_DROPBOX_ID,env_process.env.AUTH_DROPBOX_SECRET,env_process.env.AUTH_DROPBOX_ISSUER],"duende-identity-server6":[env_process.env.AUTH_IDS6_ID,env_process.env.AUTH_IDS6_SECRET,env_process.env.AUTH_IDS6_ISSUER],eveonline:[env_process.env.AUTH_EVEONLINE_ID,env_process.env.AUTH_EVEONLINE_SECRET,env_process.env.AUTH_EVEONLINE_ISSUER],facebook:[env_process.env.AUTH_FACEBOOK_ID,env_process.env.AUTH_FACEBOOK_SECRET,env_process.env.AUTH_FACEBOOK_ISSUER],faceit:[env_process.env.AUTH_FACEIT_ID,env_process.env.AUTH_FACEIT_SECRET,env_process.env.AUTH_FACEIT_ISSUER],foursquare:[env_process.env.AUTH_FOURSQUARE_ID,env_process.env.AUTH_FOURSQUARE_SECRET,env_process.env.AUTH_FOURSQUARE_ISSUER],freshbooks:[env_process.env.AUTH_FRESHBOOKS_ID,env_process.env.AUTH_FRESHBOOKS_SECRET,env_process.env.AUTH_FRESHBOOKS_ISSUER],fusionauth:[env_process.env.AUTH_FUSIONAUTH_ID,env_process.env.AUTH_FUSIONAUTH_SECRET,env_process.env.AUTH_FUSIONAUTH_ISSUER],github:[env_process.env.AUTH_GITHUB_ID,env_process.env.AUTH_GITHUB_SECRET,env_process.env.AUTH_GITHUB_ISSUER],gitlab:[env_process.env.AUTH_GITLAB_ID,env_process.env.AUTH_GITLAB_SECRET,env_process.env.AUTH_GITLAB_ISSUER],google:[env_process.env.AUTH_GOOGLE_ID,env_process.env.AUTH_GOOGLE_SECRET,env_process.env.AUTH_GOOGLE_ISSUER],hubspot:[env_process.env.AUTH_HUBSPOT_ID,env_process.env.AUTH_HUBSPOT_SECRET,env_process.env.AUTH_HUBSPOT_ISSUER],"identity-server4":[env_process.env.AUTH_IDS4_ID,env_process.env.AUTH_IDS4_SECRET,env_process.env.AUTH_IDS4_ISSUER],instagram:[env_process.env.AUTH_INSTAGRAM_ID,env_process.env.AUTH_INSTAGRAM_SECRET,env_process.env.AUTH_INSTAGRAM_ISSUER],kakao:[env_process.env.AUTH_KAKAO_ID,env_process.env.AUTH_KAKAO_SECRET,env_process.env.AUTH_KAKAO_ISSUER],keycloak:[env_process.env.AUTH_KEYCLOAK_ID,env_process.env.AUTH_KEYCLOAK_SECRET,env_process.env.AUTH_KEYCLOAK_ISSUER],line:[env_process.env.AUTH_LINE_ID,env_process.env.AUTH_LINE_SECRET,env_process.env.AUTH_LINE_ISSUER],linkedin:[env_process.env.AUTH_LINKEDIN_ID,env_process.env.AUTH_LINKEDIN_SECRET,env_process.env.AUTH_LINKEDIN_ISSUER],mailchimp:[env_process.env.AUTH_MAILCHIMP_ID,env_process.env.AUTH_MAILCHIMP_SECRET,env_process.env.AUTH_MAILCHIMP_ISSUER],mailru:[env_process.env.AUTH_MAILRU_ID,env_process.env.AUTH_MAILRU_SECRET,env_process.env.AUTH_MAILRU_ISSUER],mattermost:[env_process.env.AUTH_MATTERMOST_ID,env_process.env.AUTH_MATTERMOST_SECRET,env_process.env.AUTH_MATTERMOST_ISSUER],medium:[env_process.env.AUTH_MEDIUM_ID,env_process.env.AUTH_MEDIUM_SECRET,env_process.env.AUTH_MEDIUM_ISSUER],naver:[env_process.env.AUTH_NAVER_ID,env_process.env.AUTH_NAVER_SECRET,env_process.env.AUTH_NAVER_ISSUER],netlify:[env_process.env.AUTH_NETLIFY_ID,env_process.env.AUTH_NETLIFY_SECRET,env_process.env.AUTH_NETLIFY_ISSUER],notion:[env_process.env.AUTH_NOTION_ID,env_process.env.AUTH_NOTION_SECRET,env_process.env.AUTH_NOTION_ISSUER],okta:[env_process.env.AUTH_OKTA_ID,env_process.env.AUTH_OKTA_SECRET,env_process.env.AUTH_OKTA_ISSUER],onelogin:[env_process.env.AUTH_ONELOGIN_ID,env_process.env.AUTH_ONELOGIN_SECRET,env_process.env.AUTH_ONELOGIN_ISSUER],osso:[env_process.env.AUTH_OSSO_ID,env_process.env.AUTH_OSSO_SECRET,env_process.env.AUTH_OSSO_ISSUER],osu:[env_process.env.AUTH_OSU_ID,env_process.env.AUTH_OSU_SECRET,env_process.env.AUTH_OSU_ISSUER],patreon:[env_process.env.AUTH_PATREON_ID,env_process.env.AUTH_PATREON_SECRET,env_process.env.AUTH_PATREON_ISSUER],pinterest:[env_process.env.AUTH_PINTEREST_ID,env_process.env.AUTH_PINTEREST_SECRET,env_process.env.AUTH_PINTEREST_ISSUER],pipedrive:[env_process.env.AUTH_PIPEDRIVE_ID,env_process.env.AUTH_PIPEDRIVE_SECRET,env_process.env.AUTH_PIPEDRIVE_ISSUER],reddit:[env_process.env.AUTH_REDDIT_ID,env_process.env.AUTH_REDDIT_SECRET,env_process.env.AUTH_REDDIT_ISSUER],salesforce:[env_process.env.AUTH_SALESFORCE_ID,env_process.env.AUTH_SALESFORCE_SECRET,env_process.env.AUTH_SALESFORCE_ISSUER],slack:[env_process.env.AUTH_SLACK_ID,env_process.env.AUTH_SLACK_SECRET,env_process.env.AUTH_SLACK_ISSUER],spotify:[env_process.env.AUTH_SPOTIFY_ID,env_process.env.AUTH_SPOTIFY_SECRET,env_process.env.AUTH_SPOTIFY_ISSUER],strava:[env_process.env.AUTH_STRAVA_ID,env_process.env.AUTH_STRAVA_SECRET,env_process.env.AUTH_STRAVA_ISSUER],todoist:[env_process.env.AUTH_TODOIST_ID,env_process.env.AUTH_TODOIST_SECRET,env_process.env.AUTH_TODOIST_ISSUER],trakt:[env_process.env.AUTH_TRAKT_ID,env_process.env.AUTH_TRAKT_SECRET,env_process.env.AUTH_TRAKT_ISSUER],twitch:[env_process.env.AUTH_TWITCH_ID,env_process.env.AUTH_TWITCH_SECRET,env_process.env.AUTH_TWITCH_ISSUER],twitter:[env_process.env.AUTH_TWITTER_ID,env_process.env.AUTH_TWITTER_SECRET,env_process.env.AUTH_TWITTER_ISSUER],"united-effects":[env_process.env.AUTH_UNITED_EFFECTS_ID,env_process.env.AUTH_UNITED_EFFECTS_SECRET,env_process.env.AUTH_UNITED_EFFECTS_ISSUER],vk:[env_process.env.AUTH_VK_ID,env_process.env.AUTH_VK_SECRET,env_process.env.AUTH_VK_ISSUER],wikimedia:[env_process.env.AUTH_WIKIMEDIA_ID,env_process.env.AUTH_WIKIMEDIA_SECRET,env_process.env.AUTH_WIKIMEDIA_ISSUER],wordpress:[env_process.env.AUTH_WORDPRESS_ID,env_process.env.AUTH_WORDPRESS_SECRET,env_process.env.AUTH_WORDPRESS_ISSUER],workos:[env_process.env.AUTH_WORKOS_ID,env_process.env.AUTH_WORKOS_SECRET,env_process.env.AUTH_WORKOS_ISSUER],yandex:[env_process.env.AUTH_YANDEX_ID,env_process.env.AUTH_YANDEX_SECRET,env_process.env.AUTH_YANDEX_ISSUER],zitadel:[env_process.env.AUTH_ZITADEL_ID,env_process.env.AUTH_ZITADEL_SECRET,env_process.env.AUTH_ZITADEL_ISSUER],zoho:[env_process.env.AUTH_ZOHO_ID,env_process.env.AUTH_ZOHO_SECRET,env_process.env.AUTH_ZOHO_ISSUER],zoom:[env_process.env.AUTH_ZOOM_ID,env_process.env.AUTH_ZOOM_SECRET,env_process.env.AUTH_ZOOM_ISSUER]};var headers=__webpack_require__("./node_modules/next/headers.js"),server=__webpack_require__("./node_modules/next/server.js"),lib_process=__webpack_require__("./node_modules/process/browser.js");async function getSession(headers,config){const origin=function detectOrigin(_headers){const host=_headers.get("x-forwarded-host")??_headers.get("host"),protocol="http"===_headers.get("x-forwarded-proto")?"http":"https";return new URL(lib_process.env.NEXTAUTH_URL??`${protocol}://${host}`)}(headers),request=new Request(`${origin}/api/auth/session`,{headers:{cookie:headers.get("cookie")??""}});return config.useSecureCookies??(config.useSecureCookies="https:"===origin.protocol),config.callbacks=Object.assign(config.callbacks??{},{session:({session,user,token})=>({...session,user:user??token})}),Auth(request,config)}function initAuth(config){return(...args)=>{if(!args.length)return getSession((0,headers.headers)(),config).then((r=>r.json()));if(args[0]instanceof Request){return handleAuth([args[0],args[1]],config)}if(function isReqWrapper(arg){return"function"==typeof arg}(args[0])){const userMiddlewareOrRoute=args[0];return async(...args)=>handleAuth(args,config,userMiddlewareOrRoute)}const request="req"in args[0]?args[0].req:args[0],response="res"in args[0]?args[0].res:args[1];return getSession(new Headers(request.headers),config).then((async authResponse=>{const{user=null,expires=null,...rest}=await authResponse.json()??{},cookies=authResponse.headers.get("set-cookie");return cookies&&response?.setHeader("set-cookie",cookies),{user,expires,...rest}}))}}async function handleAuth(args,config,userMiddlewareOrRoute){const request=args[0],sessionResponse=await getSession(request.headers,config),{user=null,expires=null,...rest}=await sessionResponse.json()??{};let authorized=!0;const{pathname:basePath}=new URL(lib_process.env.NEXTAUTH_URL??"http://a/api/auth");!function isNextAuthAction(req,config,basePath){const{pathname}=req.nextUrl,action=pathname.replace(`${basePath}/`,""),pages=Object.values(config.pages??{});return lib_actions.has(action)||pages.some((page=>pathname===page))}(request,config,basePath)&&config.callbacks?.authorized&&(authorized=await config.callbacks.authorized({request,auth:{user,expires,...rest}}));let response=server.NextResponse.next?.();if(authorized instanceof Response)response=authorized;else if(userMiddlewareOrRoute){const augmentedReq=request;augmentedReq.auth={user,expires,...rest},response=await userMiddlewareOrRoute(augmentedReq,args[1])??server.NextResponse.next()}else if(!authorized){const signInPage=config.pages?.signIn??"/api/auth/signin";request.nextUrl.pathname!==signInPage&&(request.nextUrl.pathname=signInPage,request.nextUrl.searchParams.set("callbackUrl",request.nextUrl.href),response=server.NextResponse.redirect(request.nextUrl))}const finalResponse=new Response(response?.body,response),authCookies=sessionResponse.headers.get("set-cookie");return authCookies&&finalResponse.headers.set("set-cookie",authCookies),finalResponse}const lib_actions=new Set(["providers","session","csrf","signin","signout","callback","verify-request","error"]);function NextAuth(config){!function setEnvDefaults(config){config.secret??(config.secret=env_process.env.NEXTAUTH_SECRET??env_process.env.AUTH_SECRET),config.trustHost??(config.trustHost=!!(env_process.env.NEXTAUTH_URL??env_process.env.AUTH_TRUST_HOST??env_process.env.VERCEL)),config.redirectProxyUrl??(config.redirectProxyUrl=env_process.env.AUTH_REDIRECT_PROXY_URL),config.providers=config.providers.map((p=>{if("function"!=typeof p)return p;const provider=p();if("oauth"===provider.type||"oidc"===provider.type){const[clientId,clientSecret,issuer]=providersEnv[provider.id]??[];provider.clientId??(provider.clientId=clientId),provider.clientSecret??(provider.clientSecret=clientSecret),provider.issuer??(provider.issuer=issuer)}return provider}))}(config);const httpHandler=req=>Auth(req,config);return{handlers:{GET:httpHandler,POST:httpHandler},auth:initAuth(config),async CSRF_experimental(){const value=await Auth(new Request("http://a/api/auth/csrf",{headers:(0,headers.headers)()}),config).then((res=>res.json())).then((res=>res?.csrfToken));if(!value)throw new Error("CSRF token could not be found.");return(0,jsx_runtime.jsx)("input",{type:"hidden",name:"csrfToken",value})}}}},"./node_modules/next/dist/client/components/action-async-storage.external.js":(module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"actionAsyncStorage",{enumerable:!0,get:function(){return actionAsyncStorage}});const actionAsyncStorage=(0,__webpack_require__("./node_modules/next/dist/client/components/async-local-storage.js").createAsyncLocalStorage)();("function"==typeof exports.default||"object"==typeof exports.default&&null!==exports.default)&&void 0===exports.default.__esModule&&(Object.defineProperty(exports.default,"__esModule",{value:!0}),Object.assign(exports.default,exports),module.exports=exports.default)},"./node_modules/next/dist/client/components/async-local-storage.js":(module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"createAsyncLocalStorage",{enumerable:!0,get:function(){return createAsyncLocalStorage}});const sharedAsyncLocalStorageNotAvailableError=new Error("Invariant: AsyncLocalStorage accessed in runtime where it is not available");class FakeAsyncLocalStorage{disable(){throw sharedAsyncLocalStorageNotAvailableError}getStore(){}run(){throw sharedAsyncLocalStorageNotAvailableError}exit(){throw sharedAsyncLocalStorageNotAvailableError}enterWith(){throw sharedAsyncLocalStorageNotAvailableError}}const maybeGlobalAsyncLocalStorage=globalThis.AsyncLocalStorage;function createAsyncLocalStorage(){return maybeGlobalAsyncLocalStorage?new maybeGlobalAsyncLocalStorage:new FakeAsyncLocalStorage}("function"==typeof exports.default||"object"==typeof exports.default&&null!==exports.default)&&void 0===exports.default.__esModule&&(Object.defineProperty(exports.default,"__esModule",{value:!0}),Object.assign(exports.default,exports),module.exports=exports.default)},"./node_modules/next/dist/client/components/draft-mode.js":(module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"DraftMode",{enumerable:!0,get:function(){return DraftMode}});const _staticgenerationbailout=__webpack_require__("./node_modules/next/dist/client/components/static-generation-bailout.js");class DraftMode{get isEnabled(){return this._provider.isEnabled}enable(){if(!(0,_staticgenerationbailout.staticGenerationBailout)("draftMode().enable()"))return this._provider.enable()}disable(){if(!(0,_staticgenerationbailout.staticGenerationBailout)("draftMode().disable()"))return this._provider.disable()}constructor(provider){this._provider=provider}}("function"==typeof exports.default||"object"==typeof exports.default&&null!==exports.default)&&void 0===exports.default.__esModule&&(Object.defineProperty(exports.default,"__esModule",{value:!0}),Object.assign(exports.default,exports),module.exports=exports.default)},"./node_modules/next/dist/client/components/headers.js":(module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),function _export(target,all){for(var name in all)Object.defineProperty(target,name,{enumerable:!0,get:all[name]})}(exports,{headers:function(){return headers},cookies:function(){return cookies},draftMode:function(){return draftMode}});const _requestcookies=__webpack_require__("./node_modules/next/dist/server/web/spec-extension/adapters/request-cookies.js"),_headers=__webpack_require__("./node_modules/next/dist/server/web/spec-extension/adapters/headers.js"),_cookies=__webpack_require__("./node_modules/next/dist/server/web/spec-extension/cookies.js"),_requestasyncstorageexternal=__webpack_require__("./node_modules/next/dist/client/components/request-async-storage.external.js"),_actionasyncstorageexternal=__webpack_require__("./node_modules/next/dist/client/components/action-async-storage.external.js"),_staticgenerationbailout=__webpack_require__("./node_modules/next/dist/client/components/static-generation-bailout.js"),_draftmode=__webpack_require__("./node_modules/next/dist/client/components/draft-mode.js");function headers(){if((0,_staticgenerationbailout.staticGenerationBailout)("headers",{link:"https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering"}))return _headers.HeadersAdapter.seal(new Headers({}));const requestStore=_requestasyncstorageexternal.requestAsyncStorage.getStore();if(!requestStore)throw new Error("Invariant: headers() expects to have requestAsyncStorage, none available.");return requestStore.headers}function cookies(){if((0,_staticgenerationbailout.staticGenerationBailout)("cookies",{link:"https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering"}))return _requestcookies.RequestCookiesAdapter.seal(new _cookies.RequestCookies(new Headers({})));const requestStore=_requestasyncstorageexternal.requestAsyncStorage.getStore();if(!requestStore)throw new Error("Invariant: cookies() expects to have requestAsyncStorage, none available.");const asyncActionStore=_actionasyncstorageexternal.actionAsyncStorage.getStore();return asyncActionStore&&(asyncActionStore.isAction||asyncActionStore.isAppRoute)?requestStore.mutableCookies:requestStore.cookies}function draftMode(){const requestStore=_requestasyncstorageexternal.requestAsyncStorage.getStore();if(!requestStore)throw new Error("Invariant: draftMode() expects to have requestAsyncStorage, none available.");return new _draftmode.DraftMode(requestStore.draftMode)}("function"==typeof exports.default||"object"==typeof exports.default&&null!==exports.default)&&void 0===exports.default.__esModule&&(Object.defineProperty(exports.default,"__esModule",{value:!0}),Object.assign(exports.default,exports),module.exports=exports.default)},"./node_modules/next/dist/client/components/hooks-server-context.js":(module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),function _export(target,all){for(var name in all)Object.defineProperty(target,name,{enumerable:!0,get:all[name]})}(exports,{DYNAMIC_ERROR_CODE:function(){return DYNAMIC_ERROR_CODE},DynamicServerError:function(){return DynamicServerError}});const DYNAMIC_ERROR_CODE="DYNAMIC_SERVER_USAGE";class DynamicServerError extends Error{constructor(type){super("Dynamic server usage: "+type),this.digest=DYNAMIC_ERROR_CODE}}("function"==typeof exports.default||"object"==typeof exports.default&&null!==exports.default)&&void 0===exports.default.__esModule&&(Object.defineProperty(exports.default,"__esModule",{value:!0}),Object.assign(exports.default,exports),module.exports=exports.default)},"./node_modules/next/dist/client/components/request-async-storage.external.js":(module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"requestAsyncStorage",{enumerable:!0,get:function(){return requestAsyncStorage}});const requestAsyncStorage=(0,__webpack_require__("./node_modules/next/dist/client/components/async-local-storage.js").createAsyncLocalStorage)();("function"==typeof exports.default||"object"==typeof exports.default&&null!==exports.default)&&void 0===exports.default.__esModule&&(Object.defineProperty(exports.default,"__esModule",{value:!0}),Object.assign(exports.default,exports),module.exports=exports.default)},"./node_modules/next/dist/client/components/static-generation-async-storage.external.js":(module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"staticGenerationAsyncStorage",{enumerable:!0,get:function(){return staticGenerationAsyncStorage}});const staticGenerationAsyncStorage=(0,__webpack_require__("./node_modules/next/dist/client/components/async-local-storage.js").createAsyncLocalStorage)();("function"==typeof exports.default||"object"==typeof exports.default&&null!==exports.default)&&void 0===exports.default.__esModule&&(Object.defineProperty(exports.default,"__esModule",{value:!0}),Object.assign(exports.default,exports),module.exports=exports.default)},"./node_modules/next/dist/client/components/static-generation-bailout.js":(module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"staticGenerationBailout",{enumerable:!0,get:function(){return staticGenerationBailout}});const _hooksservercontext=__webpack_require__("./node_modules/next/dist/client/components/hooks-server-context.js"),_staticgenerationasyncstorageexternal=__webpack_require__("./node_modules/next/dist/client/components/static-generation-async-storage.external.js");class StaticGenBailoutError extends Error{constructor(...args){super(...args),this.code="NEXT_STATIC_GEN_BAILOUT"}}function formatErrorMessage(reason,opts){const{dynamic,link}=opts||{};return"Page"+(dynamic?' with `dynamic = "'+dynamic+'"`':"")+" couldn't be rendered statically because it used `"+reason+"`."+(link?" See more info here: "+link:"")}const staticGenerationBailout=(reason,opts)=>{const staticGenerationStore=_staticgenerationasyncstorageexternal.staticGenerationAsyncStorage.getStore();if(null==staticGenerationStore?void 0:staticGenerationStore.forceStatic)return!0;var _opts_dynamic;if(null==staticGenerationStore?void 0:staticGenerationStore.dynamicShouldError)throw new StaticGenBailoutError(formatErrorMessage(reason,{...opts,dynamic:null!=(_opts_dynamic=null==opts?void 0:opts.dynamic)?_opts_dynamic:"error"}));if(staticGenerationStore&&(staticGenerationStore.revalidate=0,(null==opts?void 0:opts.dynamic)||(staticGenerationStore.staticPrefetchBailout=!0)),null==staticGenerationStore?void 0:staticGenerationStore.isStaticGeneration){const err=new _hooksservercontext.DynamicServerError(formatErrorMessage(reason,{...opts,link:"https://nextjs.org/docs/messages/dynamic-server-error"}));throw staticGenerationStore.dynamicUsageDescription=reason,staticGenerationStore.dynamicUsageStack=err.stack,err}return!1};("function"==typeof exports.default||"object"==typeof exports.default&&null!==exports.default)&&void 0===exports.default.__esModule&&(Object.defineProperty(exports.default,"__esModule",{value:!0}),Object.assign(exports.default,exports),module.exports=exports.default)},"./node_modules/next/dist/compiled/@edge-runtime/cookies/index.js":module=>{"use strict";var mod,__defProp=Object.defineProperty,__getOwnPropDesc=Object.getOwnPropertyDescriptor,__getOwnPropNames=Object.getOwnPropertyNames,__hasOwnProp=Object.prototype.hasOwnProperty,src_exports={};function stringifyCookie(c){var _a;const attrs=["path"in c&&c.path&&`Path=${c.path}`,"expires"in c&&(c.expires||0===c.expires)&&`Expires=${("number"==typeof c.expires?new Date(c.expires):c.expires).toUTCString()}`,"maxAge"in c&&"number"==typeof c.maxAge&&`Max-Age=${c.maxAge}`,"domain"in c&&c.domain&&`Domain=${c.domain}`,"secure"in c&&c.secure&&"Secure","httpOnly"in c&&c.httpOnly&&"HttpOnly","sameSite"in c&&c.sameSite&&`SameSite=${c.sameSite}`].filter(Boolean);return`${c.name}=${encodeURIComponent(null!=(_a=c.value)?_a:"")}; ${attrs.join("; ")}`}function parseCookie(cookie){const map=new Map;for(const pair of cookie.split(/; */)){if(!pair)continue;const splitAt=pair.indexOf("=");if(-1===splitAt){map.set(pair,"true");continue}const[key,value]=[pair.slice(0,splitAt),pair.slice(splitAt+1)];try{map.set(key,decodeURIComponent(null!=value?value:"true"))}catch{}}return map}function parseSetCookie(setCookie){if(!setCookie)return;const[[name,value],...attributes]=parseCookie(setCookie),{domain,expires,httponly,maxage,path,samesite,secure}=Object.fromEntries(attributes.map((([key,value2])=>[key.toLowerCase(),value2])));return function compact(t){const newT={};for(const key in t)t[key]&&(newT[key]=t[key]);return newT}({name,value:decodeURIComponent(value),domain,...expires&&{expires:new Date(expires)},...httponly&&{httpOnly:!0},..."string"==typeof maxage&&{maxAge:Number(maxage)},path,...samesite&&{sameSite:parseSameSite(samesite)},...secure&&{secure:!0}})}((target,all)=>{for(var name in all)__defProp(target,name,{get:all[name],enumerable:!0})})(src_exports,{RequestCookies:()=>RequestCookies,ResponseCookies:()=>ResponseCookies,parseCookie:()=>parseCookie,parseSetCookie:()=>parseSetCookie,splitCookiesString:()=>splitCookiesString,stringifyCookie:()=>stringifyCookie}),module.exports=(mod=src_exports,((to,from,except,desc)=>{if(from&&"object"==typeof from||"function"==typeof from)for(let key of __getOwnPropNames(from))__hasOwnProp.call(to,key)||key===except||__defProp(to,key,{get:()=>from[key],enumerable:!(desc=__getOwnPropDesc(from,key))||desc.enumerable});return to})(__defProp({},"__esModule",{value:!0}),mod));var SAME_SITE=["strict","lax","none"];function parseSameSite(string){return string=string.toLowerCase(),SAME_SITE.includes(string)?string:void 0}function splitCookiesString(cookiesString){if(!cookiesString)return[];var start,ch,lastComma,nextStart,cookiesSeparatorFound,cookiesStrings=[],pos=0;function skipWhitespace(){for(;pos<cookiesString.length&&/\s/.test(cookiesString.charAt(pos));)pos+=1;return pos<cookiesString.length}for(;pos<cookiesString.length;){for(start=pos,cookiesSeparatorFound=!1;skipWhitespace();)if(","===(ch=cookiesString.charAt(pos))){for(lastComma=pos,pos+=1,skipWhitespace(),nextStart=pos;pos<cookiesString.length&&"="!==(ch=cookiesString.charAt(pos))&&";"!==ch&&","!==ch;)pos+=1;pos<cookiesString.length&&"="===cookiesString.charAt(pos)?(cookiesSeparatorFound=!0,pos=nextStart,cookiesStrings.push(cookiesString.substring(start,lastComma)),start=pos):pos=lastComma+1}else pos+=1;(!cookiesSeparatorFound||pos>=cookiesString.length)&&cookiesStrings.push(cookiesString.substring(start,cookiesString.length))}return cookiesStrings}var RequestCookies=class{constructor(requestHeaders){this._parsed=new Map,this._headers=requestHeaders;const header=requestHeaders.get("cookie");if(header){const parsed=parseCookie(header);for(const[name,value]of parsed)this._parsed.set(name,{name,value})}}[Symbol.iterator](){return this._parsed[Symbol.iterator]()}get size(){return this._parsed.size}get(...args){const name="string"==typeof args[0]?args[0]:args[0].name;return this._parsed.get(name)}getAll(...args){var _a;const all=Array.from(this._parsed);if(!args.length)return all.map((([_,value])=>value));const name="string"==typeof args[0]?args[0]:null==(_a=args[0])?void 0:_a.name;return all.filter((([n])=>n===name)).map((([_,value])=>value))}has(name){return this._parsed.has(name)}set(...args){const[name,value]=1===args.length?[args[0].name,args[0].value]:args,map=this._parsed;return map.set(name,{name,value}),this._headers.set("cookie",Array.from(map).map((([_,value2])=>stringifyCookie(value2))).join("; ")),this}delete(names){const map=this._parsed,result=Array.isArray(names)?names.map((name=>map.delete(name))):map.delete(names);return this._headers.set("cookie",Array.from(map).map((([_,value])=>stringifyCookie(value))).join("; ")),result}clear(){return this.delete(Array.from(this._parsed.keys())),this}[Symbol.for("edge-runtime.inspect.custom")](){return`RequestCookies ${JSON.stringify(Object.fromEntries(this._parsed))}`}toString(){return[...this._parsed.values()].map((v=>`${v.name}=${encodeURIComponent(v.value)}`)).join("; ")}},ResponseCookies=class{constructor(responseHeaders){var _a;this._parsed=new Map,this._headers=responseHeaders;const setCookie=null==(_a=responseHeaders.getSetCookie)?void 0:_a.call(responseHeaders);responseHeaders.get("set-cookie");const cookieStrings=Array.isArray(setCookie)?setCookie:splitCookiesString(setCookie);for(const cookieString of cookieStrings){const parsed=parseSetCookie(cookieString);parsed&&this._parsed.set(parsed.name,parsed)}}get(...args){const key="string"==typeof args[0]?args[0]:args[0].name;return this._parsed.get(key)}getAll(...args){var _a;const all=Array.from(this._parsed.values());if(!args.length)return all;const key="string"==typeof args[0]?args[0]:null==(_a=args[0])?void 0:_a.name;return all.filter((c=>c.name===key))}has(name){return this._parsed.has(name)}set(...args){const[name,value,cookie]=1===args.length?[args[0].name,args[0].value,args[0]]:args,map=this._parsed;return map.set(name,function normalizeCookie(cookie={name:"",value:""}){"number"==typeof cookie.expires&&(cookie.expires=new Date(cookie.expires));cookie.maxAge&&(cookie.expires=new Date(Date.now()+1e3*cookie.maxAge));null!==cookie.path&&void 0!==cookie.path||(cookie.path="/");return cookie}({name,value,...cookie})),function replace(bag,headers){headers.delete("set-cookie");for(const[,value]of bag){const serialized=stringifyCookie(value);headers.append("set-cookie",serialized)}}(map,this._headers),this}delete(...args){const[name,path,domain]="string"==typeof args[0]?[args[0]]:[args[0].name,args[0].path,args[0].domain];return this.set({name,path,domain,value:"",expires:new Date(0)})}[Symbol.for("edge-runtime.inspect.custom")](){return`ResponseCookies ${JSON.stringify(Object.fromEntries(this._parsed))}`}toString(){return[...this._parsed.values()].map(stringifyCookie).join("; ")}}},"./node_modules/next/dist/compiled/ua-parser-js/ua-parser.js":(module,exports,__webpack_require__)=>{var __WEBPACK_AMD_DEFINE_RESULT__;(()=>{var i={226:function(i,e){!function(o,a){"use strict";var s="function",b="undefined",w="object",l="string",d="major",c="model",u="name",p="type",m="vendor",f="version",h="architecture",v="console",g="mobile",k="tablet",x="smarttv",_="wearable",y="embedded",T="Amazon",S="Apple",z="ASUS",N="BlackBerry",A="Browser",C="Chrome",O="Firefox",U="Google",j="Huawei",P="LG",R="Microsoft",M="Motorola",B="Opera",V="Samsung",D="Sharp",I="Sony",F="Xiaomi",G="Zebra",H="Facebook",L="Chromium OS",Z="Mac OS",enumerize=function(i){for(var e={},o=0;o<i.length;o++)e[i[o].toUpperCase()]=i[o];return e},has=function(i,e){return typeof i===l&&-1!==lowerize(e).indexOf(lowerize(i))},lowerize=function(i){return i.toLowerCase()},trim=function(i,e){if(typeof i===l)return i=i.replace(/^\s\s*/,""),typeof e===b?i:i.substring(0,350)},rgxMapper=function(i,e){for(var r,t,n,b,l,d,o=0;o<e.length&&!l;){var c=e[o],u=e[o+1];for(r=t=0;r<c.length&&!l&&c[r];)if(l=c[r++].exec(i))for(n=0;n<u.length;n++)d=l[++t],typeof(b=u[n])===w&&b.length>0?2===b.length?typeof b[1]==s?this[b[0]]=b[1].call(this,d):this[b[0]]=b[1]:3===b.length?typeof b[1]!==s||b[1].exec&&b[1].test?this[b[0]]=d?d.replace(b[1],b[2]):a:this[b[0]]=d?b[1].call(this,d,b[2]):a:4===b.length&&(this[b[0]]=d?b[3].call(this,d.replace(b[1],b[2])):a):this[b]=d||a;o+=2}},strMapper=function(i,e){for(var o in e)if(typeof e[o]===w&&e[o].length>0){for(var r=0;r<e[o].length;r++)if(has(e[o][r],i))return"?"===o?a:o}else if(has(e[o],i))return"?"===o?a:o;return i},X={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},K={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[f,[u,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[f,[u,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[u,f],[/opios[\/ ]+([\w\.]+)/i],[f,[u,B+" Mini"]],[/\bopr\/([\w\.]+)/i],[f,[u,B]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(heytap|ovi)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[u,f],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[f,[u,"UC"+A]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i],[f,[u,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[f,[u,"WeChat"]],[/konqueror\/([\w\.]+)/i],[f,[u,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[f,[u,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[f,[u,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[u,/(.+)/,"$1 Secure "+A],f],[/\bfocus\/([\w\.]+)/i],[f,[u,O+" Focus"]],[/\bopt\/([\w\.]+)/i],[f,[u,B+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[f,[u,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[f,[u,"Dolphin"]],[/coast\/([\w\.]+)/i],[f,[u,B+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[f,[u,"MIUI "+A]],[/fxios\/([-\w\.]+)/i],[f,[u,O]],[/\bqihu|(qi?ho?o?|360)browser/i],[[u,"360 "+A]],[/(oculus|samsung|sailfish|huawei)browser\/([\w\.]+)/i],[[u,/(.+)/,"$1 "+A],f],[/(comodo_dragon)\/([\w\.]+)/i],[[u,/_/g," "],f],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[u,f],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i,/\[(linkedin)app\]/i],[u],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[u,H],f],[/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[u,f],[/\bgsa\/([\w\.]+) .*safari\//i],[f,[u,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[f,[u,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[f,[u,C+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[u,C+" WebView"],f],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[f,[u,"Android "+A]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[u,f],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[f,[u,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[f,u],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[u,[f,strMapper,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[u,f],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[u,"Netscape"],f],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[f,[u,O+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i,/panasonic;(viera)/i],[u,f],[/(cobalt)\/([\w\.]+)/i],[u,[f,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[h,"amd64"]],[/(ia32(?=;))/i],[[h,lowerize]],[/((?:i[346]|x)86)[;\)]/i],[[h,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[h,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[h,"armhf"]],[/windows (ce|mobile); ppc;/i],[[h,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[h,/ower/,"",lowerize]],[/(sun4\w)[;\)]/i],[[h,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[h,lowerize]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[c,[m,V],[p,k]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[c,[m,V],[p,g]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[c,[m,S],[p,g]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[c,[m,S],[p,k]],[/(macintosh);/i],[c,[m,S]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[c,[m,D],[p,g]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[c,[m,j],[p,k]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[c,[m,j],[p,g]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[c,/_/g," "],[m,F],[p,g]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[c,/_/g," "],[m,F],[p,k]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[c,[m,"OPPO"],[p,g]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[c,[m,"Vivo"],[p,g]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[c,[m,"Realme"],[p,g]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[c,[m,M],[p,g]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[c,[m,M],[p,k]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[c,[m,P],[p,k]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[c,[m,P],[p,g]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[c,[m,"Lenovo"],[p,k]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[c,/_/g," "],[m,"Nokia"],[p,g]],[/(pixel c)\b/i],[c,[m,U],[p,k]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[c,[m,U],[p,g]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[c,[m,I],[p,g]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[c,"Xperia Tablet"],[m,I],[p,k]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[c,[m,"OnePlus"],[p,g]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[c,[m,T],[p,k]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[c,/(.+)/g,"Fire Phone $1"],[m,T],[p,g]],[/(playbook);[-\w\),; ]+(rim)/i],[c,m,[p,k]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[c,[m,N],[p,g]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[c,[m,z],[p,k]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[c,[m,z],[p,g]],[/(nexus 9)/i],[c,[m,"HTC"],[p,k]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[m,[c,/_/g," "],[p,g]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[c,[m,"Acer"],[p,k]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[c,[m,"Meizu"],[p,g]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[m,c,[p,g]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[m,c,[p,k]],[/(surface duo)/i],[c,[m,R],[p,k]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[c,[m,"Fairphone"],[p,g]],[/(u304aa)/i],[c,[m,"AT&T"],[p,g]],[/\bsie-(\w*)/i],[c,[m,"Siemens"],[p,g]],[/\b(rct\w+) b/i],[c,[m,"RCA"],[p,k]],[/\b(venue[\d ]{2,7}) b/i],[c,[m,"Dell"],[p,k]],[/\b(q(?:mv|ta)\w+) b/i],[c,[m,"Verizon"],[p,k]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[c,[m,"Barnes & Noble"],[p,k]],[/\b(tm\d{3}\w+) b/i],[c,[m,"NuVision"],[p,k]],[/\b(k88) b/i],[c,[m,"ZTE"],[p,k]],[/\b(nx\d{3}j) b/i],[c,[m,"ZTE"],[p,g]],[/\b(gen\d{3}) b.+49h/i],[c,[m,"Swiss"],[p,g]],[/\b(zur\d{3}) b/i],[c,[m,"Swiss"],[p,k]],[/\b((zeki)?tb.*\b) b/i],[c,[m,"Zeki"],[p,k]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[m,"Dragon Touch"],c,[p,k]],[/\b(ns-?\w{0,9}) b/i],[c,[m,"Insignia"],[p,k]],[/\b((nxa|next)-?\w{0,9}) b/i],[c,[m,"NextBook"],[p,k]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[m,"Voice"],c,[p,g]],[/\b(lvtel\-)?(v1[12]) b/i],[[m,"LvTel"],c,[p,g]],[/\b(ph-1) /i],[c,[m,"Essential"],[p,g]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[c,[m,"Envizen"],[p,k]],[/\b(trio[-\w\. ]+) b/i],[c,[m,"MachSpeed"],[p,k]],[/\btu_(1491) b/i],[c,[m,"Rotor"],[p,k]],[/(shield[\w ]+) b/i],[c,[m,"Nvidia"],[p,k]],[/(sprint) (\w+)/i],[m,c,[p,g]],[/(kin\.[onetw]{3})/i],[[c,/\./g," "],[m,R],[p,g]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[c,[m,G],[p,k]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[c,[m,G],[p,g]],[/smart-tv.+(samsung)/i],[m,[p,x]],[/hbbtv.+maple;(\d+)/i],[[c,/^/,"SmartTV"],[m,V],[p,x]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[m,P],[p,x]],[/(apple) ?tv/i],[m,[c,S+" TV"],[p,x]],[/crkey/i],[[c,C+"cast"],[m,U],[p,x]],[/droid.+aft(\w)( bui|\))/i],[c,[m,T],[p,x]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[c,[m,D],[p,x]],[/(bravia[\w ]+)( bui|\))/i],[c,[m,I],[p,x]],[/(mitv-\w{5}) bui/i],[c,[m,F],[p,x]],[/Hbbtv.*(technisat) (.*);/i],[m,c,[p,x]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[m,trim],[c,trim],[p,x]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[p,x]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[m,c,[p,v]],[/droid.+; (shield) bui/i],[c,[m,"Nvidia"],[p,v]],[/(playstation [345portablevi]+)/i],[c,[m,I],[p,v]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[c,[m,R],[p,v]],[/((pebble))app/i],[m,c,[p,_]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[c,[m,S],[p,_]],[/droid.+; (glass) \d/i],[c,[m,U],[p,_]],[/droid.+; (wt63?0{2,3})\)/i],[c,[m,G],[p,_]],[/(quest( 2| pro)?)/i],[c,[m,H],[p,_]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[m,[p,y]],[/(aeobc)\b/i],[c,[m,T],[p,y]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[c,[p,g]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[c,[p,k]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[p,k]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[p,g]],[/(android[-\w\. ]{0,9});.+buil/i],[c,[m,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[f,[u,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[f,[u,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[u,f],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[f,u]],os:[[/microsoft (windows) (vista|xp)/i],[u,f],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[u,[f,strMapper,X]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[u,"Windows"],[f,strMapper,X]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/ios;fbsv\/([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[f,/_/g,"."],[u,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[u,Z],[f,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[f,u],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[u,f],[/\(bb(10);/i],[f,[u,N]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[f,[u,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[f,[u,O+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[f,[u,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[f,[u,"watchOS"]],[/crkey\/([\d\.]+)/i],[f,[u,C+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[u,L],f],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[u,f],[/(sunos) ?([\w\.\d]*)/i],[[u,"Solaris"],f],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[u,f]]},UAParser=function(i,e){if(typeof i===w&&(e=i,i=a),!(this instanceof UAParser))return new UAParser(i,e).getResult();var r=typeof o!==b&&o.navigator?o.navigator:a,n=i||(r&&r.userAgent?r.userAgent:""),v=r&&r.userAgentData?r.userAgentData:a,x=e?function(i,e){var o={};for(var a in i)e[a]&&e[a].length%2==0?o[a]=e[a].concat(i[a]):o[a]=i[a];return o}(K,e):K,_=r&&r.userAgent==n;return this.getBrowser=function(){var i={};return i[u]=a,i[f]=a,rgxMapper.call(i,n,x.browser),i[d]=function(i){return typeof i===l?i.replace(/[^\d\.]/g,"").split(".")[0]:a}(i[f]),_&&r&&r.brave&&typeof r.brave.isBrave==s&&(i[u]="Brave"),i},this.getCPU=function(){var i={};return i[h]=a,rgxMapper.call(i,n,x.cpu),i},this.getDevice=function(){var i={};return i[m]=a,i[c]=a,i[p]=a,rgxMapper.call(i,n,x.device),_&&!i[p]&&v&&v.mobile&&(i[p]=g),_&&"Macintosh"==i[c]&&r&&typeof r.standalone!==b&&r.maxTouchPoints&&r.maxTouchPoints>2&&(i[c]="iPad",i[p]=k),i},this.getEngine=function(){var i={};return i[u]=a,i[f]=a,rgxMapper.call(i,n,x.engine),i},this.getOS=function(){var i={};return i[u]=a,i[f]=a,rgxMapper.call(i,n,x.os),_&&!i[u]&&v&&"Unknown"!=v.platform&&(i[u]=v.platform.replace(/chrome os/i,L).replace(/macos/i,Z)),i},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return n},this.setUA=function(i){return n=typeof i===l&&i.length>350?trim(i,350):i,this},this.setUA(n),this};UAParser.VERSION="1.0.35",UAParser.BROWSER=enumerize([u,f,d]),UAParser.CPU=enumerize([h]),UAParser.DEVICE=enumerize([c,m,p,v,g,x,k,_,y]),UAParser.ENGINE=UAParser.OS=enumerize([u,f]),typeof e!==b?(i.exports&&(e=i.exports=UAParser),e.UAParser=UAParser):__webpack_require__.amdO?void 0===(__WEBPACK_AMD_DEFINE_RESULT__=function(){return UAParser}.call(exports,__webpack_require__,exports,module))||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__):typeof o!==b&&(o.UAParser=UAParser);var Q=typeof o!==b&&(o.jQuery||o.Zepto);if(Q&&!Q.ua){var Y=new UAParser;Q.ua=Y.getResult(),Q.ua.get=function(){return Y.getUA()},Q.ua.set=function(i){Y.setUA(i);var e=Y.getResult();for(var o in e)Q.ua[o]=e[o]}}}("object"==typeof window?window:this)}},e={};function __nccwpck_require__(o){var a=e[o];if(void 0!==a)return a.exports;var r=e[o]={exports:{}},t=!0;try{i[o].call(r.exports,r,r.exports,__nccwpck_require__),t=!1}finally{t&&delete e[o]}return r.exports}__nccwpck_require__.ab="//";var o=__nccwpck_require__(226);module.exports=o})()},"./node_modules/next/dist/server/web/error.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),function _export(target,all){for(var name in all)Object.defineProperty(target,name,{enumerable:!0,get:all[name]})}(exports,{PageSignatureError:function(){return PageSignatureError},RemovedPageError:function(){return RemovedPageError},RemovedUAError:function(){return RemovedUAError}});class PageSignatureError extends Error{constructor({page}){super(`The middleware "${page}" accepts an async API directly with the form:\n  \n  export function middleware(request, event) {\n    return NextResponse.redirect('/new-location')\n  }\n  \n  Read more: https://nextjs.org/docs/messages/middleware-new-signature\n  `)}}class RemovedPageError extends Error{constructor(){super("The request.page has been deprecated in favour of `URLPattern`.\n  Read more: https://nextjs.org/docs/messages/middleware-request-page\n  ")}}class RemovedUAError extends Error{constructor(){super("The request.ua has been removed in favour of `userAgent` function.\n  Read more: https://nextjs.org/docs/messages/middleware-parse-user-agent\n  ")}}},"./node_modules/next/dist/server/web/next-url.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";var process=__webpack_require__("./node_modules/process/browser.js");Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"NextURL",{enumerable:!0,get:function(){return NextURL}});const _detectdomainlocale=__webpack_require__("./node_modules/next/dist/shared/lib/i18n/detect-domain-locale.js"),_formatnextpathnameinfo=__webpack_require__("./node_modules/next/dist/shared/lib/router/utils/format-next-pathname-info.js"),_gethostname=__webpack_require__("./node_modules/next/dist/shared/lib/get-hostname.js"),_getnextpathnameinfo=__webpack_require__("./node_modules/next/dist/shared/lib/router/utils/get-next-pathname-info.js"),REGEX_LOCALHOST_HOSTNAME=/(?!^https?:\/\/)(127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}|\[::1\]|localhost)/;function parseURL(url,base){return new URL(String(url).replace(REGEX_LOCALHOST_HOSTNAME,"localhost"),base&&String(base).replace(REGEX_LOCALHOST_HOSTNAME,"localhost"))}const Internal=Symbol("NextURLInternal");class NextURL{constructor(input,baseOrOpts,opts){let base,options;"object"==typeof baseOrOpts&&"pathname"in baseOrOpts||"string"==typeof baseOrOpts?(base=baseOrOpts,options=opts||{}):options=opts||baseOrOpts||{},this[Internal]={url:parseURL(input,base??options.base),options,basePath:""},this.analyze()}analyze(){var _this_Internal_options_nextConfig_i18n,_this_Internal_options_nextConfig,_this_Internal_domainLocale,_this_Internal_options_nextConfig_i18n1,_this_Internal_options_nextConfig1;const info=(0,_getnextpathnameinfo.getNextPathnameInfo)(this[Internal].url.pathname,{nextConfig:this[Internal].options.nextConfig,parseData:!process.env.__NEXT_NO_MIDDLEWARE_URL_NORMALIZE,i18nProvider:this[Internal].options.i18nProvider}),hostname=(0,_gethostname.getHostname)(this[Internal].url,this[Internal].options.headers);this[Internal].domainLocale=this[Internal].options.i18nProvider?this[Internal].options.i18nProvider.detectDomainLocale(hostname):(0,_detectdomainlocale.detectDomainLocale)(null==(_this_Internal_options_nextConfig=this[Internal].options.nextConfig)||null==(_this_Internal_options_nextConfig_i18n=_this_Internal_options_nextConfig.i18n)?void 0:_this_Internal_options_nextConfig_i18n.domains,hostname);const defaultLocale=(null==(_this_Internal_domainLocale=this[Internal].domainLocale)?void 0:_this_Internal_domainLocale.defaultLocale)||(null==(_this_Internal_options_nextConfig1=this[Internal].options.nextConfig)||null==(_this_Internal_options_nextConfig_i18n1=_this_Internal_options_nextConfig1.i18n)?void 0:_this_Internal_options_nextConfig_i18n1.defaultLocale);this[Internal].url.pathname=info.pathname,this[Internal].defaultLocale=defaultLocale,this[Internal].basePath=info.basePath??"",this[Internal].buildId=info.buildId,this[Internal].locale=info.locale??defaultLocale,this[Internal].trailingSlash=info.trailingSlash}formatPathname(){return(0,_formatnextpathnameinfo.formatNextPathnameInfo)({basePath:this[Internal].basePath,buildId:this[Internal].buildId,defaultLocale:this[Internal].options.forceLocale?void 0:this[Internal].defaultLocale,locale:this[Internal].locale,pathname:this[Internal].url.pathname,trailingSlash:this[Internal].trailingSlash})}formatSearch(){return this[Internal].url.search}get buildId(){return this[Internal].buildId}set buildId(buildId){this[Internal].buildId=buildId}get locale(){return this[Internal].locale??""}set locale(locale){var _this_Internal_options_nextConfig_i18n,_this_Internal_options_nextConfig;if(!this[Internal].locale||!(null==(_this_Internal_options_nextConfig=this[Internal].options.nextConfig)||null==(_this_Internal_options_nextConfig_i18n=_this_Internal_options_nextConfig.i18n)?void 0:_this_Internal_options_nextConfig_i18n.locales.includes(locale)))throw new TypeError(`The NextURL configuration includes no locale "${locale}"`);this[Internal].locale=locale}get defaultLocale(){return this[Internal].defaultLocale}get domainLocale(){return this[Internal].domainLocale}get searchParams(){return this[Internal].url.searchParams}get host(){return this[Internal].url.host}set host(value){this[Internal].url.host=value}get hostname(){return this[Internal].url.hostname}set hostname(value){this[Internal].url.hostname=value}get port(){return this[Internal].url.port}set port(value){this[Internal].url.port=value}get protocol(){return this[Internal].url.protocol}set protocol(value){this[Internal].url.protocol=value}get href(){const pathname=this.formatPathname(),search=this.formatSearch();return`${this.protocol}//${this.host}${pathname}${search}${this.hash}`}set href(url){this[Internal].url=parseURL(url),this.analyze()}get origin(){return this[Internal].url.origin}get pathname(){return this[Internal].url.pathname}set pathname(value){this[Internal].url.pathname=value}get hash(){return this[Internal].url.hash}set hash(value){this[Internal].url.hash=value}get search(){return this[Internal].url.search}set search(value){this[Internal].url.search=value}get password(){return this[Internal].url.password}set password(value){this[Internal].url.password=value}get username(){return this[Internal].url.username}set username(value){this[Internal].url.username=value}get basePath(){return this[Internal].basePath}set basePath(value){this[Internal].basePath=value.startsWith("/")?value:`/${value}`}toString(){return this.href}toJSON(){return this.href}[Symbol.for("edge-runtime.inspect.custom")](){return{href:this.href,origin:this.origin,protocol:this.protocol,username:this.username,password:this.password,host:this.host,hostname:this.hostname,port:this.port,pathname:this.pathname,search:this.search,searchParams:this.searchParams,hash:this.hash}}clone(){return new NextURL(String(this),this[Internal].options)}}},"./node_modules/next/dist/server/web/spec-extension/adapters/headers.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),function _export(target,all){for(var name in all)Object.defineProperty(target,name,{enumerable:!0,get:all[name]})}(exports,{ReadonlyHeadersError:function(){return ReadonlyHeadersError},HeadersAdapter:function(){return HeadersAdapter}});const _reflect=__webpack_require__("./node_modules/next/dist/server/web/spec-extension/adapters/reflect.js");class ReadonlyHeadersError extends Error{constructor(){super("Headers cannot be modified. Read more: https://nextjs.org/docs/app/api-reference/functions/headers")}static callable(){throw new ReadonlyHeadersError}}class HeadersAdapter extends Headers{constructor(headers){super(),this.headers=new Proxy(headers,{get(target,prop,receiver){if("symbol"==typeof prop)return _reflect.ReflectAdapter.get(target,prop,receiver);const lowercased=prop.toLowerCase(),original=Object.keys(headers).find((o=>o.toLowerCase()===lowercased));return void 0!==original?_reflect.ReflectAdapter.get(target,original,receiver):void 0},set(target,prop,value,receiver){if("symbol"==typeof prop)return _reflect.ReflectAdapter.set(target,prop,value,receiver);const lowercased=prop.toLowerCase(),original=Object.keys(headers).find((o=>o.toLowerCase()===lowercased));return _reflect.ReflectAdapter.set(target,original??prop,value,receiver)},has(target,prop){if("symbol"==typeof prop)return _reflect.ReflectAdapter.has(target,prop);const lowercased=prop.toLowerCase(),original=Object.keys(headers).find((o=>o.toLowerCase()===lowercased));return void 0!==original&&_reflect.ReflectAdapter.has(target,original)},deleteProperty(target,prop){if("symbol"==typeof prop)return _reflect.ReflectAdapter.deleteProperty(target,prop);const lowercased=prop.toLowerCase(),original=Object.keys(headers).find((o=>o.toLowerCase()===lowercased));return void 0===original||_reflect.ReflectAdapter.deleteProperty(target,original)}})}static seal(headers){return new Proxy(headers,{get(target,prop,receiver){switch(prop){case"append":case"delete":case"set":return ReadonlyHeadersError.callable;default:return _reflect.ReflectAdapter.get(target,prop,receiver)}}})}merge(value){return Array.isArray(value)?value.join(", "):value}static from(headers){return headers instanceof Headers?headers:new HeadersAdapter(headers)}append(name,value){const existing=this.headers[name];"string"==typeof existing?this.headers[name]=[existing,value]:Array.isArray(existing)?existing.push(value):this.headers[name]=value}delete(name){delete this.headers[name]}get(name){const value=this.headers[name];return void 0!==value?this.merge(value):null}has(name){return void 0!==this.headers[name]}set(name,value){this.headers[name]=value}forEach(callbackfn,thisArg){for(const[name,value]of this.entries())callbackfn.call(thisArg,value,name,this)}*entries(){for(const key of Object.keys(this.headers)){const name=key.toLowerCase(),value=this.get(name);yield[name,value]}}*keys(){for(const key of Object.keys(this.headers)){const name=key.toLowerCase();yield name}}*values(){for(const key of Object.keys(this.headers)){const value=this.get(key);yield value}}[Symbol.iterator](){return this.entries()}}},"./node_modules/next/dist/server/web/spec-extension/adapters/reflect.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"ReflectAdapter",{enumerable:!0,get:function(){return ReflectAdapter}});class ReflectAdapter{static get(target,prop,receiver){const value=Reflect.get(target,prop,receiver);return"function"==typeof value?value.bind(target):value}static set(target,prop,value,receiver){return Reflect.set(target,prop,value,receiver)}static has(target,prop){return Reflect.has(target,prop)}static deleteProperty(target,prop){return Reflect.deleteProperty(target,prop)}}},"./node_modules/next/dist/server/web/spec-extension/adapters/request-cookies.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),function _export(target,all){for(var name in all)Object.defineProperty(target,name,{enumerable:!0,get:all[name]})}(exports,{ReadonlyRequestCookiesError:function(){return ReadonlyRequestCookiesError},RequestCookiesAdapter:function(){return RequestCookiesAdapter},getModifiedCookieValues:function(){return getModifiedCookieValues},appendMutableCookies:function(){return appendMutableCookies},MutableRequestCookiesAdapter:function(){return MutableRequestCookiesAdapter}});const _cookies=__webpack_require__("./node_modules/next/dist/server/web/spec-extension/cookies.js"),_reflect=__webpack_require__("./node_modules/next/dist/server/web/spec-extension/adapters/reflect.js");class ReadonlyRequestCookiesError extends Error{constructor(){super("Cookies can only be modified in a Server Action or Route Handler. Read more: https://nextjs.org/docs/app/api-reference/functions/cookies#cookiessetname-value-options")}static callable(){throw new ReadonlyRequestCookiesError}}class RequestCookiesAdapter{static seal(cookies){return new Proxy(cookies,{get(target,prop,receiver){switch(prop){case"clear":case"delete":case"set":return ReadonlyRequestCookiesError.callable;default:return _reflect.ReflectAdapter.get(target,prop,receiver)}}})}}const SYMBOL_MODIFY_COOKIE_VALUES=Symbol.for("next.mutated.cookies");function getModifiedCookieValues(cookies){const modified=cookies[SYMBOL_MODIFY_COOKIE_VALUES];return modified&&Array.isArray(modified)&&0!==modified.length?modified:[]}function appendMutableCookies(headers,mutableCookies){const modifiedCookieValues=getModifiedCookieValues(mutableCookies);if(0===modifiedCookieValues.length)return!1;const resCookies=new _cookies.ResponseCookies(headers),returnedCookies=resCookies.getAll();for(const cookie of modifiedCookieValues)resCookies.set(cookie);for(const cookie of returnedCookies)resCookies.set(cookie);return!0}class MutableRequestCookiesAdapter{static wrap(cookies,onUpdateCookies){const responseCookes=new _cookies.ResponseCookies(new Headers);for(const cookie of cookies.getAll())responseCookes.set(cookie);let modifiedValues=[];const modifiedCookies=new Set,updateResponseCookies=()=>{var _fetch___nextGetStaticStore;const staticGenerationAsyncStore=null==fetch.__nextGetStaticStore||null==(_fetch___nextGetStaticStore=fetch.__nextGetStaticStore.call(fetch))?void 0:_fetch___nextGetStaticStore.getStore();staticGenerationAsyncStore&&(staticGenerationAsyncStore.pathWasRevalidated=!0);const allCookies=responseCookes.getAll();if(modifiedValues=allCookies.filter((c=>modifiedCookies.has(c.name))),onUpdateCookies){const serializedCookies=[];for(const cookie of modifiedValues){const tempCookies=new _cookies.ResponseCookies(new Headers);tempCookies.set(cookie),serializedCookies.push(tempCookies.toString())}onUpdateCookies(serializedCookies)}};return new Proxy(responseCookes,{get(target,prop,receiver){switch(prop){case SYMBOL_MODIFY_COOKIE_VALUES:return modifiedValues;case"delete":return function(...args){modifiedCookies.add("string"==typeof args[0]?args[0]:args[0].name);try{target.delete(...args)}finally{updateResponseCookies()}};case"set":return function(...args){modifiedCookies.add("string"==typeof args[0]?args[0]:args[0].name);try{return target.set(...args)}finally{updateResponseCookies()}};default:return _reflect.ReflectAdapter.get(target,prop,receiver)}}})}}},"./node_modules/next/dist/server/web/spec-extension/cookies.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),function _export(target,all){for(var name in all)Object.defineProperty(target,name,{enumerable:!0,get:all[name]})}(exports,{RequestCookies:function(){return _cookies.RequestCookies},ResponseCookies:function(){return _cookies.ResponseCookies}});const _cookies=__webpack_require__("./node_modules/next/dist/compiled/@edge-runtime/cookies/index.js")},"./node_modules/next/dist/server/web/spec-extension/image-response.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";var process=__webpack_require__("./node_modules/process/browser.js");Object.defineProperty(exports,"E",{enumerable:!0,get:function(){return ImageResponse}});class ImageResponse extends Response{static#_=this.displayName="NextImageResponse";constructor(...args){const readable=new ReadableStream({async start(controller){const imageResponse=new(0,(await __webpack_require__("./node_modules/next/dist/server/web/spec-extension lazy recursive")("edge"===process.env.NEXT_RUNTIME?"next/dist/compiled/@vercel/og/index.edge.js":"next/dist/compiled/@vercel/og/index.node.js")).ImageResponse)(...args);if(!imageResponse.body)return controller.close();const reader=imageResponse.body.getReader();for(;;){const{done,value}=await reader.read();if(done)return controller.close();controller.enqueue(value)}}}),options=args[1]||{};super(readable,{headers:{"content-type":"image/png","cache-control":"public, immutable, no-transform, max-age=31536000",...options.headers},status:options.status,statusText:options.statusText})}}},"./node_modules/next/dist/server/web/spec-extension/request.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";var process=__webpack_require__("./node_modules/process/browser.js");Object.defineProperty(exports,"__esModule",{value:!0}),function _export(target,all){for(var name in all)Object.defineProperty(target,name,{enumerable:!0,get:all[name]})}(exports,{INTERNALS:function(){return INTERNALS},NextRequest:function(){return NextRequest}});const _nexturl=__webpack_require__("./node_modules/next/dist/server/web/next-url.js"),_utils=__webpack_require__("./node_modules/next/dist/server/web/utils.js"),_error=__webpack_require__("./node_modules/next/dist/server/web/error.js"),_cookies=__webpack_require__("./node_modules/next/dist/server/web/spec-extension/cookies.js"),INTERNALS=Symbol("internal request");class NextRequest extends Request{constructor(input,init={}){const url="string"!=typeof input&&"url"in input?input.url:String(input);(0,_utils.validateURL)(url),input instanceof Request?super(input,init):super(url,init);const nextUrl=new _nexturl.NextURL(url,{headers:(0,_utils.toNodeOutgoingHttpHeaders)(this.headers),nextConfig:init.nextConfig});this[INTERNALS]={cookies:new _cookies.RequestCookies(this.headers),geo:init.geo||{},ip:init.ip,nextUrl,url:process.env.__NEXT_NO_MIDDLEWARE_URL_NORMALIZE?url:nextUrl.toString()}}[Symbol.for("edge-runtime.inspect.custom")](){return{cookies:this.cookies,geo:this.geo,ip:this.ip,nextUrl:this.nextUrl,url:this.url,bodyUsed:this.bodyUsed,cache:this.cache,credentials:this.credentials,destination:this.destination,headers:Object.fromEntries(this.headers),integrity:this.integrity,keepalive:this.keepalive,method:this.method,mode:this.mode,redirect:this.redirect,referrer:this.referrer,referrerPolicy:this.referrerPolicy,signal:this.signal}}get cookies(){return this[INTERNALS].cookies}get geo(){return this[INTERNALS].geo}get ip(){return this[INTERNALS].ip}get nextUrl(){return this[INTERNALS].nextUrl}get page(){throw new _error.RemovedPageError}get ua(){throw new _error.RemovedUAError}get url(){return this[INTERNALS].url}}},"./node_modules/next/dist/server/web/spec-extension/response.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"x",{enumerable:!0,get:function(){return NextResponse}});const _nexturl=__webpack_require__("./node_modules/next/dist/server/web/next-url.js"),_utils=__webpack_require__("./node_modules/next/dist/server/web/utils.js"),_cookies=__webpack_require__("./node_modules/next/dist/server/web/spec-extension/cookies.js"),INTERNALS=Symbol("internal response"),REDIRECTS=new Set([301,302,303,307,308]);function handleMiddlewareField(init,headers){var _init_request;if(null==init||null==(_init_request=init.request)?void 0:_init_request.headers){if(!(init.request.headers instanceof Headers))throw new Error("request.headers must be an instance of Headers");const keys=[];for(const[key,value]of init.request.headers)headers.set("x-middleware-request-"+key,value),keys.push(key);headers.set("x-middleware-override-headers",keys.join(","))}}class NextResponse extends Response{constructor(body,init={}){super(body,init),this[INTERNALS]={cookies:new _cookies.ResponseCookies(this.headers),url:init.url?new _nexturl.NextURL(init.url,{headers:(0,_utils.toNodeOutgoingHttpHeaders)(this.headers),nextConfig:init.nextConfig}):void 0}}[Symbol.for("edge-runtime.inspect.custom")](){return{cookies:this.cookies,url:this.url,body:this.body,bodyUsed:this.bodyUsed,headers:Object.fromEntries(this.headers),ok:this.ok,redirected:this.redirected,status:this.status,statusText:this.statusText,type:this.type}}get cookies(){return this[INTERNALS].cookies}static json(body,init){const response=Response.json(body,init);return new NextResponse(response.body,response)}static redirect(url,init){const status="number"==typeof init?init:(null==init?void 0:init.status)??307;if(!REDIRECTS.has(status))throw new RangeError('Failed to execute "redirect" on "response": Invalid status code');const initObj="object"==typeof init?init:{},headers=new Headers(null==initObj?void 0:initObj.headers);return headers.set("Location",(0,_utils.validateURL)(url)),new NextResponse(null,{...initObj,headers,status})}static rewrite(destination,init){const headers=new Headers(null==init?void 0:init.headers);return headers.set("x-middleware-rewrite",(0,_utils.validateURL)(destination)),handleMiddlewareField(init,headers),new NextResponse(null,{...init,headers})}static next(init){const headers=new Headers(null==init?void 0:init.headers);return headers.set("x-middleware-next","1"),handleMiddlewareField(init,headers),new NextResponse(null,{...init,headers})}}},"./node_modules/next/dist/server/web/spec-extension/user-agent.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),function _export(target,all){for(var name in all)Object.defineProperty(target,name,{enumerable:!0,get:all[name]})}(exports,{isBot:function(){return isBot},userAgentFromString:function(){return userAgentFromString},userAgent:function(){return userAgent}});const _uaparserjs=_interop_require_default(__webpack_require__("./node_modules/next/dist/compiled/ua-parser-js/ua-parser.js"));function _interop_require_default(obj){return obj&&obj.__esModule?obj:{default:obj}}function isBot(input){return/Googlebot|Mediapartners-Google|AdsBot-Google|googleweblight|Storebot-Google|Google-PageRenderer|Google-InspectionTool|Bingbot|BingPreview|Slurp|DuckDuckBot|baiduspider|yandex|sogou|LinkedInBot|bitlybot|tumblr|vkShare|quora link preview|facebookexternalhit|facebookcatalog|Twitterbot|applebot|redditbot|Slackbot|Discordbot|WhatsApp|SkypeUriPreview|ia_archiver/i.test(input)}function userAgentFromString(input){return{...(0,_uaparserjs.default)(input),isBot:void 0!==input&&isBot(input)}}function userAgent({headers}){return userAgentFromString(headers.get("user-agent")||void 0)}},"./node_modules/next/dist/server/web/utils.js":(__unused_webpack_module,exports)=>{"use strict";function fromNodeOutgoingHttpHeaders(nodeHeaders){const headers=new Headers;for(let[key,value]of Object.entries(nodeHeaders)){const values=Array.isArray(value)?value:[value];for(let v of values)void 0!==v&&("number"==typeof v&&(v=v.toString()),headers.append(key,v))}return headers}function splitCookiesString(cookiesString){var start,ch,lastComma,nextStart,cookiesSeparatorFound,cookiesStrings=[],pos=0;function skipWhitespace(){for(;pos<cookiesString.length&&/\s/.test(cookiesString.charAt(pos));)pos+=1;return pos<cookiesString.length}for(;pos<cookiesString.length;){for(start=pos,cookiesSeparatorFound=!1;skipWhitespace();)if(","===(ch=cookiesString.charAt(pos))){for(lastComma=pos,pos+=1,skipWhitespace(),nextStart=pos;pos<cookiesString.length&&"="!==(ch=cookiesString.charAt(pos))&&";"!==ch&&","!==ch;)pos+=1;pos<cookiesString.length&&"="===cookiesString.charAt(pos)?(cookiesSeparatorFound=!0,pos=nextStart,cookiesStrings.push(cookiesString.substring(start,lastComma)),start=pos):pos=lastComma+1}else pos+=1;(!cookiesSeparatorFound||pos>=cookiesString.length)&&cookiesStrings.push(cookiesString.substring(start,cookiesString.length))}return cookiesStrings}function toNodeOutgoingHttpHeaders(headers){const nodeHeaders={},cookies=[];if(headers)for(const[key,value]of headers.entries())"set-cookie"===key.toLowerCase()?(cookies.push(...splitCookiesString(value)),nodeHeaders[key]=1===cookies.length?cookies[0]:cookies):nodeHeaders[key]=value;return nodeHeaders}function validateURL(url){try{return String(new URL(String(url)))}catch(error){throw new Error(`URL is malformed "${String(url)}". Please use only absolute URLs - https://nextjs.org/docs/messages/middleware-relative-urls`,{cause:error})}}Object.defineProperty(exports,"__esModule",{value:!0}),function _export(target,all){for(var name in all)Object.defineProperty(target,name,{enumerable:!0,get:all[name]})}(exports,{fromNodeOutgoingHttpHeaders:function(){return fromNodeOutgoingHttpHeaders},splitCookiesString:function(){return splitCookiesString},toNodeOutgoingHttpHeaders:function(){return toNodeOutgoingHttpHeaders},validateURL:function(){return validateURL}})},"./node_modules/next/dist/shared/lib/get-hostname.js":(__unused_webpack_module,exports)=>{"use strict";function getHostname(parsed,headers){let hostname;if((null==headers?void 0:headers.host)&&!Array.isArray(headers.host))hostname=headers.host.toString().split(":")[0];else{if(!parsed.hostname)return;hostname=parsed.hostname}return hostname.toLowerCase()}Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"getHostname",{enumerable:!0,get:function(){return getHostname}})},"./node_modules/next/dist/shared/lib/router/utils/add-path-suffix.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"addPathSuffix",{enumerable:!0,get:function(){return addPathSuffix}});const _parsepath=__webpack_require__("./node_modules/next/dist/shared/lib/router/utils/parse-path.js");function addPathSuffix(path,suffix){if(!path.startsWith("/")||!suffix)return path;const{pathname,query,hash}=(0,_parsepath.parsePath)(path);return""+pathname+suffix+query+hash}},"./node_modules/next/dist/shared/lib/router/utils/format-next-pathname-info.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"formatNextPathnameInfo",{enumerable:!0,get:function(){return formatNextPathnameInfo}});const _removetrailingslash=__webpack_require__("./node_modules/next/dist/shared/lib/router/utils/remove-trailing-slash.js"),_addpathprefix=__webpack_require__("./node_modules/next/dist/shared/lib/router/utils/add-path-prefix.js"),_addpathsuffix=__webpack_require__("./node_modules/next/dist/shared/lib/router/utils/add-path-suffix.js"),_addlocale=__webpack_require__("./node_modules/next/dist/shared/lib/router/utils/add-locale.js");function formatNextPathnameInfo(info){let pathname=(0,_addlocale.addLocale)(info.pathname,info.locale,info.buildId?void 0:info.defaultLocale,info.ignorePrefix);return!info.buildId&&info.trailingSlash||(pathname=(0,_removetrailingslash.removeTrailingSlash)(pathname)),info.buildId&&(pathname=(0,_addpathsuffix.addPathSuffix)((0,_addpathprefix.addPathPrefix)(pathname,"/_next/data/"+info.buildId),"/"===info.pathname?"index.json":".json")),pathname=(0,_addpathprefix.addPathPrefix)(pathname,info.basePath),!info.buildId&&info.trailingSlash?pathname.endsWith("/")?pathname:(0,_addpathsuffix.addPathSuffix)(pathname,"/"):(0,_removetrailingslash.removeTrailingSlash)(pathname)}},"./node_modules/next/dist/shared/lib/router/utils/get-next-pathname-info.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"getNextPathnameInfo",{enumerable:!0,get:function(){return getNextPathnameInfo}});const _normalizelocalepath=__webpack_require__("./node_modules/next/dist/shared/lib/i18n/normalize-locale-path.js"),_removepathprefix=__webpack_require__("./node_modules/next/dist/shared/lib/router/utils/remove-path-prefix.js"),_pathhasprefix=__webpack_require__("./node_modules/next/dist/shared/lib/router/utils/path-has-prefix.js");function getNextPathnameInfo(pathname,options){var _options_nextConfig;const{basePath,i18n,trailingSlash}=null!=(_options_nextConfig=options.nextConfig)?_options_nextConfig:{},info={pathname,trailingSlash:"/"!==pathname?pathname.endsWith("/"):trailingSlash};basePath&&(0,_pathhasprefix.pathHasPrefix)(info.pathname,basePath)&&(info.pathname=(0,_removepathprefix.removePathPrefix)(info.pathname,basePath),info.basePath=basePath);let pathnameNoDataPrefix=info.pathname;if(info.pathname.startsWith("/_next/data/")&&info.pathname.endsWith(".json")){const paths=info.pathname.replace(/^\/_next\/data\//,"").replace(/\.json$/,"").split("/"),buildId=paths[0];info.buildId=buildId,pathnameNoDataPrefix="index"!==paths[1]?"/"+paths.slice(1).join("/"):"/",!0===options.parseData&&(info.pathname=pathnameNoDataPrefix)}if(i18n){let result=options.i18nProvider?options.i18nProvider.analyze(info.pathname):(0,_normalizelocalepath.normalizeLocalePath)(info.pathname,i18n.locales);var _result_pathname;info.locale=result.detectedLocale,info.pathname=null!=(_result_pathname=result.pathname)?_result_pathname:info.pathname,!result.detectedLocale&&info.buildId&&(result=options.i18nProvider?options.i18nProvider.analyze(pathnameNoDataPrefix):(0,_normalizelocalepath.normalizeLocalePath)(pathnameNoDataPrefix,i18n.locales),result.detectedLocale&&(info.locale=result.detectedLocale))}return info}},"./node_modules/next/dist/shared/lib/router/utils/remove-path-prefix.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"removePathPrefix",{enumerable:!0,get:function(){return removePathPrefix}});const _pathhasprefix=__webpack_require__("./node_modules/next/dist/shared/lib/router/utils/path-has-prefix.js");function removePathPrefix(path,prefix){if(!(0,_pathhasprefix.pathHasPrefix)(path,prefix))return path;const withoutPrefix=path.slice(prefix.length);return withoutPrefix.startsWith("/")?withoutPrefix:"/"+withoutPrefix}},"./node_modules/next/headers.js":(module,__unused_webpack_exports,__webpack_require__)=>{module.exports=__webpack_require__("./node_modules/next/dist/client/components/headers.js")},"./node_modules/next/server.js":(module,exports,__webpack_require__)=>{const serverExports={NextRequest:__webpack_require__("./node_modules/next/dist/server/web/spec-extension/request.js").NextRequest,NextResponse:__webpack_require__("./node_modules/next/dist/server/web/spec-extension/response.js").x,ImageResponse:__webpack_require__("./node_modules/next/dist/server/web/spec-extension/image-response.js").E,userAgentFromString:__webpack_require__("./node_modules/next/dist/server/web/spec-extension/user-agent.js").userAgentFromString,userAgent:__webpack_require__("./node_modules/next/dist/server/web/spec-extension/user-agent.js").userAgent};"undefined"!=typeof URLPattern&&(serverExports.URLPattern=URLPattern),module.exports=serverExports,exports.NextRequest=serverExports.NextRequest,exports.NextResponse=serverExports.NextResponse,exports.ImageResponse=serverExports.ImageResponse,exports.userAgentFromString=serverExports.userAgentFromString,exports.userAgent=serverExports.userAgent,exports.URLPattern=serverExports.URLPattern}}]);